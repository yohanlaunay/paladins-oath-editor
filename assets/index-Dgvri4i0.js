var mi=Object.defineProperty;var _i=(a,e,t)=>e in a?mi(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var Rt=(a,e,t)=>_i(a,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var nt,le,Vt,Me,Mt,Zt,mt,bt,_t,ft,Jt,He={},qt=[],fi=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,St=Array.isArray;function Ie(a,e){for(var t in e)a[t]=e[t];return a}function Xt(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function gi(a,e,t){var n,r,i,s={};for(i in e)i=="key"?n=e[i]:i=="ref"?r=e[i]:s[i]=e[i];if(arguments.length>2&&(s.children=arguments.length>3?nt.call(arguments,2):t),typeof a=="function"&&a.defaultProps!=null)for(i in a.defaultProps)s[i]===void 0&&(s[i]=a.defaultProps[i]);return $e(a,s,n,r,null)}function $e(a,e,t,n,r){var i={type:a,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++Vt,__i:-1,__u:0};return r==null&&le.vnode!=null&&le.vnode(i),i}function rt(a){return a.children}function Ye(a,e){this.props=a,this.context=e}function Oe(a,e){if(e==null)return a.__?Oe(a.__,a.__i+1):null;for(var t;e<a.__k.length;e++)if((t=a.__k[e])!=null&&t.__e!=null)return t.__e;return typeof a.type=="function"?Oe(a):null}function $t(a){var e,t;if((a=a.__)!=null&&a.__c!=null){for(a.__e=a.__c.base=null,e=0;e<a.__k.length;e++)if((t=a.__k[e])!=null&&t.__e!=null){a.__e=a.__c.base=t.__e;break}return $t(a)}}function gt(a){(!a.__d&&(a.__d=!0)&&Me.push(a)&&!et.__r++||Mt!==le.debounceRendering)&&((Mt=le.debounceRendering)||Zt)(et)}function et(){var a,e,t,n,r,i,s,o;for(Me.sort(mt);a=Me.shift();)a.__d&&(e=Me.length,n=void 0,i=(r=(t=a).__v).__e,s=[],o=[],t.__P&&((n=Ie({},r)).__v=r.__v+1,le.vnode&&le.vnode(n),At(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,s,i??Oe(r),!!(32&r.__u),o),n.__v=r.__v,n.__.__k[n.__i]=n,ei(s,n,o),n.__e!=i&&$t(n)),Me.length>e&&Me.sort(mt));et.__r=0}function Yt(a,e,t,n,r,i,s,o,c,h,g){var p,_,d,y,u,w=n&&n.__k||qt,f=e.length;for(t.__d=c,yi(t,e,w),c=t.__d,p=0;p<f;p++)(d=t.__k[p])!=null&&(_=d.__i===-1?He:w[d.__i]||He,d.__i=p,At(a,d,_,r,i,s,o,c,h,g),y=d.__e,d.ref&&_.ref!=d.ref&&(_.ref&&Ct(_.ref,null,d),g.push(d.ref,d.__c||y,d)),u==null&&y!=null&&(u=y),65536&d.__u||_.__k===d.__k?c=Qt(d,c,a):typeof d.type=="function"&&d.__d!==void 0?c=d.__d:y&&(c=y.nextSibling),d.__d=void 0,d.__u&=-196609);t.__d=c,t.__e=u}function yi(a,e,t){var n,r,i,s,o,c=e.length,h=t.length,g=h,p=0;for(a.__k=[],n=0;n<c;n++)(r=e[n])!=null&&typeof r!="boolean"&&typeof r!="function"?(s=n+p,(r=a.__k[n]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?$e(null,r,null,null,null):St(r)?$e(rt,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?$e(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=a,r.__b=a.__b+1,i=null,(o=r.__i=wi(r,t,s,g))!==-1&&(g--,(i=t[o])&&(i.__u|=131072)),i==null||i.__v===null?(o==-1&&p--,typeof r.type!="function"&&(r.__u|=65536)):o!==s&&(o==s-1?p--:o==s+1?p++:(o>s?p--:p++,r.__u|=65536))):r=a.__k[n]=null;if(g)for(n=0;n<h;n++)(i=t[n])!=null&&!(131072&i.__u)&&(i.__e==a.__d&&(a.__d=Oe(i)),ti(i,i))}function Qt(a,e,t){var n,r;if(typeof a.type=="function"){for(n=a.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=a,e=Qt(n[r],e,t));return e}a.__e!=e&&(e&&a.type&&!t.contains(e)&&(e=Oe(a)),t.insertBefore(a.__e,e||null),e=a.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function wi(a,e,t,n){var r=a.key,i=a.type,s=t-1,o=t+1,c=e[t];if(c===null||c&&r==c.key&&i===c.type&&!(131072&c.__u))return t;if(n>(c!=null&&!(131072&c.__u)?1:0))for(;s>=0||o<e.length;){if(s>=0){if((c=e[s])&&!(131072&c.__u)&&r==c.key&&i===c.type)return s;s--}if(o<e.length){if((c=e[o])&&!(131072&c.__u)&&r==c.key&&i===c.type)return o;o++}}return-1}function Bt(a,e,t){e[0]==="-"?a.setProperty(e,t??""):a[e]=t==null?"":typeof t!="number"||fi.test(e)?t:t+"px"}function qe(a,e,t,n,r){var i;e:if(e==="style")if(typeof t=="string")a.style.cssText=t;else{if(typeof n=="string"&&(a.style.cssText=n=""),n)for(e in n)t&&e in t||Bt(a.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||Bt(a.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in a||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),a.l||(a.l={}),a.l[e+i]=t,t?n?t.u=n.u:(t.u=bt,a.addEventListener(e,i?ft:_t,i)):a.removeEventListener(e,i?ft:_t,i);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in a)try{a[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?a.removeAttribute(e):a.setAttribute(e,e=="popover"&&t==1?"":t))}}function Nt(a){return function(e){if(this.l){var t=this.l[e.type+a];if(e.t==null)e.t=bt++;else if(e.t<t.u)return;return t(le.event?le.event(e):e)}}}function At(a,e,t,n,r,i,s,o,c,h){var g,p,_,d,y,u,w,f,k,S,C,E,F,B,L,N,j=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(c=!!(32&t.__u),i=[o=e.__e=t.__e]),(g=le.__b)&&g(e);e:if(typeof j=="function")try{if(f=e.props,k="prototype"in j&&j.prototype.render,S=(g=j.contextType)&&n[g.__c],C=g?S?S.props.value:g.__:n,t.__c?w=(p=e.__c=t.__c).__=p.__E:(k?e.__c=p=new j(f,C):(e.__c=p=new Ye(f,C),p.constructor=j,p.render=vi),S&&S.sub(p),p.props=f,p.state||(p.state={}),p.context=C,p.__n=n,_=p.__d=!0,p.__h=[],p._sb=[]),k&&p.__s==null&&(p.__s=p.state),k&&j.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=Ie({},p.__s)),Ie(p.__s,j.getDerivedStateFromProps(f,p.__s))),d=p.props,y=p.state,p.__v=e,_)k&&j.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),k&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(k&&j.getDerivedStateFromProps==null&&f!==d&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(f,C),!p.__e&&(p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(f,p.__s,C)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(p.props=f,p.state=p.__s,p.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function($){$&&($.__=e)}),E=0;E<p._sb.length;E++)p.__h.push(p._sb[E]);p._sb=[],p.__h.length&&s.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(f,p.__s,C),k&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(d,y,u)})}if(p.context=C,p.props=f,p.__P=a,p.__e=!1,F=le.__r,B=0,k){for(p.state=p.__s,p.__d=!1,F&&F(e),g=p.render(p.props,p.state,p.context),L=0;L<p._sb.length;L++)p.__h.push(p._sb[L]);p._sb=[]}else do p.__d=!1,F&&F(e),g=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++B<25);p.state=p.__s,p.getChildContext!=null&&(n=Ie(Ie({},n),p.getChildContext())),k&&!_&&p.getSnapshotBeforeUpdate!=null&&(u=p.getSnapshotBeforeUpdate(d,y)),Yt(a,St(N=g!=null&&g.type===rt&&g.key==null?g.props.children:g)?N:[N],e,t,n,r,i,s,o,c,h),p.base=e.__e,e.__u&=-161,p.__h.length&&s.push(p),w&&(p.__E=p.__=null)}catch($){if(e.__v=null,c||i!=null){for(e.__u|=c?160:128;o&&o.nodeType===8&&o.nextSibling;)o=o.nextSibling;i[i.indexOf(o)]=null,e.__e=o}else e.__e=t.__e,e.__k=t.__k;le.__e($,e,t)}else i==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=ki(t.__e,e,t,n,r,i,s,c,h);(g=le.diffed)&&g(e)}function ei(a,e,t){e.__d=void 0;for(var n=0;n<t.length;n++)Ct(t[n],t[++n],t[++n]);le.__c&&le.__c(e,a),a.some(function(r){try{a=r.__h,r.__h=[],a.some(function(i){i.call(r)})}catch(i){le.__e(i,r.__v)}})}function ki(a,e,t,n,r,i,s,o,c){var h,g,p,_,d,y,u,w=t.props,f=e.props,k=e.type;if(k==="svg"?r="http://www.w3.org/2000/svg":k==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),i!=null){for(h=0;h<i.length;h++)if((d=i[h])&&"setAttribute"in d==!!k&&(k?d.localName===k:d.nodeType===3)){a=d,i[h]=null;break}}if(a==null){if(k===null)return document.createTextNode(f);a=document.createElementNS(r,k,f.is&&f),o&&(le.__m&&le.__m(e,i),o=!1),i=null}if(k===null)w===f||o&&a.data===f||(a.data=f);else{if(i=i&&nt.call(a.childNodes),w=t.props||He,!o&&i!=null)for(w={},h=0;h<a.attributes.length;h++)w[(d=a.attributes[h]).name]=d.value;for(h in w)if(d=w[h],h!="children"){if(h=="dangerouslySetInnerHTML")p=d;else if(!(h in f)){if(h=="value"&&"defaultValue"in f||h=="checked"&&"defaultChecked"in f)continue;qe(a,h,null,d,r)}}for(h in f)d=f[h],h=="children"?_=d:h=="dangerouslySetInnerHTML"?g=d:h=="value"?y=d:h=="checked"?u=d:o&&typeof d!="function"||w[h]===d||qe(a,h,d,w[h],r);if(g)o||p&&(g.__html===p.__html||g.__html===a.innerHTML)||(a.innerHTML=g.__html),e.__k=[];else if(p&&(a.innerHTML=""),Yt(a,St(_)?_:[_],e,t,n,k==="foreignObject"?"http://www.w3.org/1999/xhtml":r,i,s,i?i[0]:t.__k&&Oe(t,0),o,c),i!=null)for(h=i.length;h--;)Xt(i[h]);o||(h="value",k==="progress"&&y==null?a.removeAttribute("value"):y!==void 0&&(y!==a[h]||k==="progress"&&!y||k==="option"&&y!==w[h])&&qe(a,h,y,w[h],r),h="checked",u!==void 0&&u!==a[h]&&qe(a,h,u,w[h],r))}return a}function Ct(a,e,t){try{if(typeof a=="function"){var n=typeof a.__u=="function";n&&a.__u(),n&&e==null||(a.__u=a(e))}else a.current=e}catch(r){le.__e(r,t)}}function ti(a,e,t){var n,r;if(le.unmount&&le.unmount(a),(n=a.ref)&&(n.current&&n.current!==a.__e||Ct(n,null,e)),(n=a.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){le.__e(i,e)}n.base=n.__P=null}if(n=a.__k)for(r=0;r<n.length;r++)n[r]&&ti(n[r],e,t||typeof a.type!="function");t||Xt(a.__e),a.__c=a.__=a.__e=a.__d=void 0}function vi(a,e,t){return this.constructor(a,t)}function Ot(a,e,t){var n,r,i,s;le.__&&le.__(a,e),r=(n=typeof t=="function")?null:e.__k,i=[],s=[],At(e,a=(!n&&t||e).__k=gi(rt,null,[a]),r||He,He,e.namespaceURI,!n&&t?[t]:r?null:e.firstChild?nt.call(e.childNodes):null,i,!n&&t?t:r?r.__e:e.firstChild,n,s),ei(i,a,s)}function ii(a,e){var t={__c:e="__cC"+Jt++,__:a,Consumer:function(n,r){return n.children(r)},Provider:function(n){var r,i;return this.getChildContext||(r=new Set,(i={})[e]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&r.forEach(function(o){o.__e=!0,gt(o)})},this.sub=function(s){r.add(s);var o=s.componentWillUnmount;s.componentWillUnmount=function(){r&&r.delete(s),o&&o.call(s)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}nt=qt.slice,le={__e:function(a,e,t,n){for(var r,i,s;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(a)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(a,n||{}),s=r.__d),s)return r.__E=r}catch(o){a=o}throw a}},Vt=0,Ye.prototype.setState=function(a,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ie({},this.state),typeof a=="function"&&(a=a(Ie({},t),this.props)),a&&Ie(t,a),a!=null&&this.__v&&(e&&this._sb.push(e),gt(this))},Ye.prototype.forceUpdate=function(a){this.__v&&(this.__e=!0,a&&this.__h.push(a),gt(this))},Ye.prototype.render=rt,Me=[],Zt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,mt=function(a,e){return a.__v.__b-e.__v.__b},et.__r=0,bt=0,_t=Nt(!1),ft=Nt(!0),Jt=0;var bi=0;function T(a,e,t,n,r,i){e||(e={});var s,o,c=e;"ref"in e&&(s=e.ref,delete e.ref);var h={type:a,props:c,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--bi,__i:-1,__u:0,__source:r,__self:i};if(typeof a=="function"&&(s=a.defaultProps))for(o in s)c[o]===void 0&&(c[o]=s[o]);return le.vnode&&le.vnode(h),h}const Si="paladinsoath.db",ke="store";class Ai{constructor(e={}){this.version=e.version||1,this.assets={},this.db=null}init(){return new Promise(e=>{const t=indexedDB.open(Si,this.version);t.onupgradeneeded=n=>{n.target.result.createObjectStore(ke)},t.onsuccess=()=>{if(this.db=t.result,this.db.onerror=()=>{console.error("Error creating/accessing db")},this.db.setVersion&&this.db.version!==this.version){const n=this.db.setVersion(this.version);n.onsuccess=()=>{this.db.createObjectStore(ke),e()}}else e()}})}clear(){return new Promise((e,t)=>{if(!this.db)return t("DB not initialized. Call the init method");this.db.transaction([ke],"readwrite").objectStore(ke).clear(),e()})}downloadAndStoreImage(e,t){return new Promise((n,r)=>{if(!this.db)return r("DB not initialized. Call the init method");const i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=o,i.onerror=c=>console.error(c),i.send();const s=this.db;function o(c){const h=this.response;s.transaction([ke],"readwrite").objectStore(ke).put(h,e),n()}})}deleteData(e){return new Promise((t,n)=>{if(!this.db)return n("DB not initialized. Call the init method");this.db.transaction([ke],"readwrite").objectStore(ke).delete(e),t()})}putData(e,t){return new Promise((n,r)=>{if(!this.db)return r("DB not initialized. Call the init method");this.db.transaction([ke],"readwrite").objectStore(ke).put(t,e),n()})}getData(e){return new Promise(t=>{const n=this.db.transaction([ke]);n.objectStore("store").get(e).onsuccess=r=>{t(r.target.result)}})}getAllKeys(){return new Promise(e=>{const t=this.db.transaction([ke]);t.objectStore("store").getAllKeys().onsuccess=n=>{e(n.target.result.sort())}})}putBase64Img(e,t,n="png"){let r;return t.startsWith("data:image/")?r=t:r="data:image/"+n+";base64,"+t,this.putData(e,r)}getBase64Img(e){return this.getData(e)}}const ot=ii(null);var Fe,de,ut,Ft,tt=0,ai=[],me=le,zt=me.__b,Pt=me.__r,Kt=me.diffed,Lt=me.__c,Gt=me.unmount,Ut=me.__;function st(a,e){me.__h&&me.__h(de,a,tt||e),tt=0;var t=de.__H||(de.__H={__:[],__h:[]});return a>=t.__.length&&t.__.push({}),t.__[a]}function ye(a){return tt=1,Ci(oi,a)}function Ci(a,e,t){var n=st(Fe++,2);if(n.t=a,!n.__c&&(n.__=[oi(void 0,e),function(o){var c=n.__N?n.__N[0]:n.__[0],h=n.t(c,o);c!==h&&(n.__N=[h,n.__[1]],n.__c.setState({}))}],n.__c=de,!de.u)){var r=function(o,c,h){if(!n.__c.__H)return!0;var g=n.__c.__H.__.filter(function(_){return!!_.__c});if(g.every(function(_){return!_.__N}))return!i||i.call(this,o,c,h);var p=!1;return g.forEach(function(_){if(_.__N){var d=_.__[0];_.__=_.__N,_.__N=void 0,d!==_.__[0]&&(p=!0)}}),!(!p&&n.__c.props===o)&&(!i||i.call(this,o,c,h))};de.u=!0;var i=de.shouldComponentUpdate,s=de.componentWillUpdate;de.componentWillUpdate=function(o,c,h){if(this.__e){var g=i;i=void 0,r(o,c,h),i=g}s&&s.call(this,o,c,h)},de.shouldComponentUpdate=r}return n.__N||n.__}function Et(a,e){var t=st(Fe++,3);!me.__s&&ri(t.__H,e)&&(t.__=a,t.i=e,de.__H.__h.push(t))}function Tt(a){return tt=5,ni(function(){return{current:a}},[])}function ni(a,e){var t=st(Fe++,7);return ri(t.__H,e)&&(t.__=a(),t.__H=e,t.__h=a),t.__}function ze(a){var e=de.context[a.__c],t=st(Fe++,9);return t.c=a,e?(t.__==null&&(t.__=!0,e.sub(de)),e.props.value):a.__}function Ei(){for(var a;a=ai.shift();)if(a.__P&&a.__H)try{a.__H.__h.forEach(Qe),a.__H.__h.forEach(yt),a.__H.__h=[]}catch(e){a.__H.__h=[],me.__e(e,a.__v)}}me.__b=function(a){de=null,zt&&zt(a)},me.__=function(a,e){a&&e.__k&&e.__k.__m&&(a.__m=e.__k.__m),Ut&&Ut(a,e)},me.__r=function(a){Pt&&Pt(a),Fe=0;var e=(de=a.__c).__H;e&&(ut===de?(e.__h=[],de.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0})):(e.__h.forEach(Qe),e.__h.forEach(yt),e.__h=[],Fe=0)),ut=de},me.diffed=function(a){Kt&&Kt(a);var e=a.__c;e&&e.__H&&(e.__H.__h.length&&(ai.push(e)!==1&&Ft===me.requestAnimationFrame||((Ft=me.requestAnimationFrame)||Ti)(Ei)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.i=void 0})),ut=de=null},me.__c=function(a,e){e.some(function(t){try{t.__h.forEach(Qe),t.__h=t.__h.filter(function(n){return!n.__||yt(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],me.__e(n,t.__v)}}),Lt&&Lt(a,e)},me.unmount=function(a){Gt&&Gt(a);var e,t=a.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{Qe(n)}catch(r){e=r}}),t.__H=void 0,e&&me.__e(e,t.__v))};var jt=typeof requestAnimationFrame=="function";function Ti(a){var e,t=function(){clearTimeout(n),jt&&cancelAnimationFrame(e),setTimeout(a)},n=setTimeout(t,100);jt&&(e=requestAnimationFrame(t))}function Qe(a){var e=de,t=a.__c;typeof t=="function"&&(a.__c=void 0,t()),de=e}function yt(a){var e=de;a.__c=a.__(),de=e}function ri(a,e){return!a||a.length!==e.length||e.some(function(t,n){return t!==a[n]})}function oi(a,e){return typeof e=="function"?e(a):e}function We(a){const[e,t]=ye(a.data.data||{}),[n,r]=ye(null),i=()=>{a.data.saveData(e)};Et(()=>{if(!a.data||n)return;const p={};a.data.specs.properties.forEach(_=>{const d=e[_.id];d==null&&!_.optional?p[_.id]="Value is required":p[_.id]=null}),r(p),a.data.validateData(e)},[n]);const s=a.data.specs,o=[];s.properties.forEach(p=>{const _=p,d={id:_.id,property:_,value:e[_.id]!==void 0?e[_.id]:null,defaultValue:_.default!==void 0?_.default:null,error:(n?n[_.id]:null)||null,validate:k=>{try{return _.specs.validator(k),_.validator&&_.validator(k),null}catch(S){return S.message}},onValueChanged:k=>{let S={...e};if(S[_.id]=k,t(S),k===null){let C=n?{...n}:{};_.optional===!0||_.default!==void 0?C[_.id]=null:C[_.id]="Required value",r(C),a.data.validateData(S);return}try{_.specs.validator(k),_.validator&&_.validator(k);let C=n?{...n}:{};C[_.id]=null,r(C)}catch(C){let E=n?{...n}:{};E[_.id]=C.message,r(E)}a.data.validateData(S)}},y=_.renderConfig||{},u=Array.isArray(y.renderConditions)?y.renderConditions:[];let w=!0;for(const k of u){switch(k[0]){case"disableIf":{const C=k[1];if(C(e)){w=!1;break}}break}if(!w)break}if(!w)return;const f=[];if(_.illustration&&f.push(T("img",{src:_.illustration})),_.links&&_.links.length>0)for(const k of _.links)f.push(T("a",{href:k.url,children:k.label}));o.push([T("div",{className:"prop_title",children:[T("div",{className:"title",children:"⊸ "+_.label+(_.optional||_.default!==void 0?"":" (*)")}),f.length>0?T("div",{className:"prop_extras",children:f}):null]}),T("div",{className:"prop_container",children:[_.description?T("div",{className:"prop_description",children:_.description||""}):null,d.error?T("div",{className:"error",children:d.error}):null,T("div",{className:"prop_value_container",children:_.specs.render(d)})]})])});let c=!a.data.error;if(n!=null){for(const p of Object.values(n))if(p!==null){c=!1;break}}const h=a.data.titleOverride!==void 0?a.data.titleOverride:s.title,g=a.data.descriptionOverride!==void 0?a.data.descriptionOverride:s.description;return T("div",{className:"spec_editor",children:[T("div",{className:"header",children:[T("div",{className:"title",children:h}),g?T("div",{className:"description",children:g}):null]}),T("div",{className:"prop_containers",children:o}),T("div",{className:"prop_footer",children:[a.data.disableActions!==!0?T("div",{className:"actions",children:T("button",{onClick:i,disabled:!c,children:"Save"})}):null,a.data.error?T("div",{className:"error",children:a.data.error}):null]})]})}var De=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Di(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var si={exports:{}};(function(a,e){(function(t,n){n()})(De,function(){function t(h,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function n(h,g,p){var _=new XMLHttpRequest;_.open("GET",h),_.responseType="blob",_.onload=function(){c(_.response,g,p)},_.onerror=function(){console.error("could not download file")},_.send()}function r(h){var g=new XMLHttpRequest;g.open("HEAD",h,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function i(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(g)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof De=="object"&&De.global===De?De:void 0,o=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(h,g,p){var _=s.URL||s.webkitURL,d=document.createElement("a");g=g||h.name||"download",d.download=g,d.rel="noopener",typeof h=="string"?(d.href=h,d.origin===location.origin?i(d):r(d.href)?n(h,g,p):i(d,d.target="_blank")):(d.href=_.createObjectURL(h),setTimeout(function(){_.revokeObjectURL(d.href)},4e4),setTimeout(function(){i(d)},0))}:"msSaveOrOpenBlob"in navigator?function(h,g,p){if(g=g||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,p),g);else if(r(h))n(h,g,p);else{var _=document.createElement("a");_.href=h,_.target="_blank",setTimeout(function(){i(_)})}}:function(h,g,p,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof h=="string")return n(h,g,p);var d=h.type==="application/octet-stream",y=/constructor/i.test(s.HTMLElement)||s.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||d&&y||o)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var S=w.result;S=u?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=S:location=S,_=null},w.readAsDataURL(h)}else{var f=s.URL||s.webkitURL,k=f.createObjectURL(h);_?_.location=k:location.href=k,_=null,setTimeout(function(){f.revokeObjectURL(k)},4e4)}});s.saveAs=c.saveAs=c,a.exports=c})})(si);var xi=si.exports;class Ce{constructor(e=null){this.activeMod=e?e.activeMod:null,this.activeModule=e?e.activeModule:null,this.editorError=e?e.editorError:null}getActiveMod(){return this.activeMod}getActiveModule(){return this.activeModule}getEditorError(){return this.editorError}getContextProvider(){return{getModDescriptor:()=>this.getActiveMod()}}withActiveMod(e){const t=new Ce(this);return t.activeMod=e,t}withActiveModule(e){const t=new Ce(this);return t.activeModule=e,t}withEditorError(e=null){const t=new Ce(this);return t.editorError=e,t}}const lt=ii(null),je=(a,e)=>"data:image/"+e+";base64,"+a,Ii="iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+P+/HgAFhAJ/wlseKgAAAABJRU5ErkJggg==",Ee=je(Ii,"png"),ae={Card:"Card",MapSection:"MapSection",Terrain:"Terrain",Location:"Location",Enemy:"Enemy",Follower:"Follower",Scoring:"Scoring",Blessing:"Blessing",Rewards:"Rewards",Oath:"Oath",Character:"Character",Scenario:"Scenario",ScenarioExtension:"ScenarioExtension",Language:"Language"},it={[ae.Card]:{card_fury:{id:"card_fury",name:"[Action (Starter)] Fury",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/46/Fury.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_iron_resolve:{id:"card_iron_resolve",name:"[Action (Starter)] Iron Resolve",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/35/Iron_resolve.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_frenzy:{id:"card_frenzy",name:"[Action (Starter)] Frenzy",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f1/Frenzy.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_wayfinding:{id:"card_wayfinding",name:"[Action (Starter)] Wayfinding",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/08/Wayfinding.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_endurance:{id:"card_endurance",name:"[Action (Starter)] Endurance",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/0a/Endurance.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_prayer_of_healing:{id:"card_prayer_of_healing",name:"[Action (Starter)] Prayer of Healing",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/74/Prayer_of_healing.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_honour:{id:"card_honour",name:"[Action (Starter)] Honour",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/10/Honour.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_contract:{id:"card_contract",name:"[Action (Starter)] Contract",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/45/Contract.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_arcane_crafting:{id:"card_arcane_crafting",name:"[Action (Starter)] Arcane Crafting",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/23/Arcane_crafting.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_arcane_source:{id:"card_arcane_source",name:"[Action (Starter)] Arcane Source",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/af/Arcane_source.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_arcane_language:{id:"card_arcane_language",name:"[Action (Starter)] Arcane Language",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/b2/Arcane_language.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_preparation:{id:"card_preparation",name:"[Action (Starter)] Preparation",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/aa/Preparation.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_arcane_mastery:{id:"card_arcane_mastery",name:"[Action (Starter)] Arcane Mastery",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/9e/Arcane_mastery.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_righteousness:{id:"card_righteousness",name:"[Action (Starter)] Righteousness",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/49/Righteousness.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_cold_mastery:{id:"card_cold_mastery",name:"[Action (Starter)] Cold Mastery",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/bf/Cold_mastery.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_battlemaster:{id:"card_battlemaster",name:"[Action (Starter)] Battlemaster",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/18/Battlemaster.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_crystal_source:{id:"card_crystal_source",name:"[Action (Starter)] Crystal Source",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d3/Crystal_source.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_goodberry:{id:"card_goodberry",name:"[Action (Starter)] Goodberry",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/9a/Goodberry.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_versatility:{id:"card_versatility",name:"[Action (Starter)] Versatility",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/91/Versatility.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_arcane_control:{id:"card_arcane_control",name:"[Action (Starter)] Arcane Control",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/8b/Arcane_control.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_acrobatics:{id:"card_acrobatics",name:"[Action (Starter)] Acrobatics",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/db/Acrobatics.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_forced_march:{id:"card_forced_march",name:"[Action (Starter)] Forced March",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a2/Forced_march.png",properties:{cardType:"Action",isStarter:!0,groupingKey:"Action (Starter)"}},card_pyrokinesis:{id:"card_pyrokinesis",name:"[Action] Pyrokinesis",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/5e/Pyrokinesis.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_ice_manipulation:{id:"card_ice_manipulation",name:"[Action] Ice Manipulation",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/4f/Ice_Manipulation.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_invocation:{id:"card_invocation",name:"[Action] Invocation",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/bd/Invocation.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_telekinesis_bolt:{id:"card_telekinesis_bolt",name:"[Action] Telekinesis Bolt",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/27/Telekinesis_Bolt.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_berserk:{id:"card_berserk",name:"[Action] Berserk",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/44/Berserk.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_frost_saturation:{id:"card_frost_saturation",name:"[Action] Frost Saturation",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/62/Frost_Saturation.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_prowess:{id:"card_prowess",name:"[Action] Prowess",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e6/Prowess.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_regeneration:{id:"card_regeneration",name:"[Action] Regeneration",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/53/Regeneration.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_subdue:{id:"card_subdue",name:"[Action] Subdue",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/89/Subdue.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_ice_dash:{id:"card_ice_dash",name:"[Action] Ice Dash",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/51/Ice_dash.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_cloud_walking:{id:"card_cloud_walking",name:"[Action] Cloud Walking",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/17/Cloud_Walking.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_summon_mount:{id:"card_summon_mount",name:"[Action] Summon Mount",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e8/Summon_mount.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_sanguine_evocation:{id:"card_sanguine_evocation",name:"[Action] Sanguine Evocation",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/74/Sanguine_evocation.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_incarnum:{id:"card_incarnum",name:"[Action] Incarnum",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/bb/Incarnum.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_life_transference:{id:"card_life_transference",name:"[Action] Life Transference",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/5a/Life_transference.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_tireless:{id:"card_tireless",name:"[Action] Tireless",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f1/Tireless.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_scare_tactics:{id:"card_scare_tactics",name:"[Action] Scare Tactics",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7b/Scare_tactics.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_blood_pact:{id:"card_blood_pact",name:"[Action] Blood Pact",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/ae/Blood_pact.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_entropy_manipulation:{id:"card_entropy_manipulation",name:"[Action] Entropy Manipulation",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/0d/Entropy_manipulation.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_indomitable_rage:{id:"card_indomitable_rage",name:"[Action] Indomitable Rage",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/0a/Indomitable_rage.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_riposte:{id:"card_riposte",name:"[Action] Riposte",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/de/Riposte.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_transmutation:{id:"card_transmutation",name:"[Action] Transmutation",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/cd/Transmutation.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_rooted_faith:{id:"card_rooted_faith",name:"[Action] Rooted Faith",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d3/Rooted_faith.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_mana_abjuration:{id:"card_mana_abjuration",name:"[Action] Mana Abjuration",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/db/Mana_abjuration.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_glorious_death:{id:"card_glorious_death",name:"[Action] Glorious Death",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/4c/Glorious_Death.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_power_word:{id:"card_power_word",name:"[Action] Power Word",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e0/Power_word.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_flesh_to_stone:{id:"card_flesh_to_stone",name:"[Action] Flesh to Stone",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/69/Flesh_to_stone.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_lightning_blast:{id:"card_lightning_blast",name:"[Action] Lightning Blast",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/08/Lightning_blast.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_arcane_mimicry:{id:"card_arcane_mimicry",name:"[Action] Arcane Mimicry",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d4/Arcane_mimicry.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_archetype:{id:"card_archetype",name:"[Action] Archetype",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/b2/Archetype.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_ascension:{id:"card_ascension",name:"[Action] Ascension",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/cb/Ascension.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_blood_rite:{id:"card_blood_rite",name:"[Action] Blood Rite",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/cb/Blood_rite.png",properties:{cardType:"Action",isStarter:!1,groupingKey:"Action"}},card_fire_artillery:{id:"card_fire_artillery",name:"[Spell] Fire Artillery",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f8/Fire_artillery.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_arctic_reckoning:{id:"card_arctic_reckoning",name:"[Spell] Arctic Reckoning",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/0b/Artic_reckoning.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_enfeeble:{id:"card_enfeeble",name:"[Spell] Enfeeble",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/26/Enfeeble.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_shock_wave:{id:"card_shock_wave",name:"[Spell] Shockwave",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/65/Shockwave.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_pyrokinetic_combat:{id:"card_pyrokinetic_combat",name:"[Spell] Pyrokinetic Combat",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/75/Pyrokinetic_combat.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_astral_rift:{id:"card_astral_rift",name:"[Spell] Astral Rift",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e1/Astral_rift.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_cloud_kill:{id:"card_cloud_kill",name:"[Spell] Cloud Kill",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e0/Cloud_kill.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_fire_ward:{id:"card_fire_ward",name:"[Spell] Fire Ward",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e9/Fire_ward.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_glacial_heart:{id:"card_glacial_heart",name:"[Spell] Glacial Heart",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/25/Glacial_heart.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_levitate:{id:"card_levitate",name:"[Spell] Levitate",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/ad/Levitate.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_sylvanism:{id:"card_sylvanism",name:"[Spell] Sylvanism",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/db/Sylvanism.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_impurity_destruction:{id:"card_impurity_destruction",name:"[Spell] Impurity Destruction",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/2c/Impurity_destruction.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_crystal_siege:{id:"card_crystal_siege",name:"[Spell] Crystal Siege",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7f/Crystal_siege.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_ethereal_form:{id:"card_ethereal_form",name:"[Spell] Ethereal Form",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/ae/Ethereal_form.png",properties:{cardType:"Spell",isStarter:!1,groupingKey:"Spell"}},card_mark_of_the_tyrant:{id:"card_mark_of_the_tyrant",name:"[Relic] Mark of the Tyrant",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/8c/Mark_of_the_tyrant.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_angelic_tears:{id:"card_angelic_tears",name:"[Relic] Angelic Tears",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f0/Angelic_tears.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_crimson_shroud:{id:"card_crimson_shroud",name:"[Relic] Crimson Shroud",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/fe/Crimson_shroud.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_cerulean_mantle:{id:"card_cerulean_mantle",name:"[Relic] Cerulean Mantle",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d9/Cerulean_mantle.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_silvermoon_cloak:{id:"card_silvermoon_cloak",name:"[Relic] Silvermoon Cloak",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a2/Silvermoon_cloak.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_smaragdine_cape:{id:"card_smaragdine_cape",name:"[Relic] Smaragdine Cape",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/fb/Smaragdine_cape.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_holy_slayer_ring:{id:"card_holy_slayer_ring",name:"[Relic] Holy Slayer Ring",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f6/Holy_slayer_ring.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_ethereal_crucifix:{id:"card_ethereal_crucifix",name:"[Relic] Ethereal Crucifix",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/60/Ethereal_crucifix.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_sacred_scroll:{id:"card_sacred_scroll",name:"[Relic] Sacred Scroll",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/eb/Sacred_scroll.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_conjurer_writ:{id:"card_conjurer_writ",name:"[Relic] Writ of the Conjurer",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/17/Conjurer_writ.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_chalice_of_power:{id:"card_chalice_of_power",name:"[Relic] Chalice of Power",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/b4/Chalice_of_power.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_holy_shield:{id:"card_holy_shield",name:"[Relic] Holy Shield",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/b1/Holy_shield.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}},card_shadow_puppets:{id:"card_shadow_puppets",name:"[Relic] Shadow Puppets",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/9c/Shadow_puppets.png",properties:{cardType:"Relic",isStarter:!1,groupingKey:"Relic"}}},[ae.MapSection]:{map_section_reg_1:{id:"map_section_reg_1",name:"[Regular] 1",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/53/Map_section_reg_1.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_2:{id:"map_section_reg_2",name:"[Regular] 2",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a6/Map_section_reg_2.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_3:{id:"map_section_reg_3",name:"[Regular] 3",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7b/Map_section_reg_3.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_4:{id:"map_section_reg_4",name:"[Regular] 4",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/eb/Map_section_reg_4.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_5:{id:"map_section_reg_5",name:"[Regular] 5",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/19/Map_section_reg_5.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_6:{id:"map_section_reg_6",name:"[Regular] 6",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/08/Map_section_reg_6.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_7:{id:"map_section_reg_7",name:"[Regular] 7",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/ac/Map_section_reg_7.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_8:{id:"map_section_reg_8",name:"[Regular] 8",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/ce/Map_section_reg_8.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_9:{id:"map_section_reg_9",name:"[Regular] 9",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/1e/Map_section_reg_9.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_10:{id:"map_section_reg_10",name:"[Regular] 10",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/38/Map_section_reg_10.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_11:{id:"map_section_reg_11",name:"[Regular] 11",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/65/Map_section_reg_11.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_12:{id:"map_section_reg_12",name:"[Regular] 12",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/56/Map_section_reg_12.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_13:{id:"map_section_reg_13",name:"[Regular] 13",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/27/Map_section_reg_13.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_reg_14:{id:"map_section_reg_14",name:"[Regular] 14",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/9e/Map_section_reg_14.png",properties:{sectionType:"Regular",groupingKey:"Regular"}},map_section_core_1:{id:"map_section_core_1",name:"[Core] 1",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a9/Map_section_core_1.png",properties:{sectionType:"Core",groupingKey:"Core"}},map_section_core_2:{id:"map_section_core_2",name:"[Core] 2",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/88/Map_section_core_2.png",properties:{sectionType:"Core",groupingKey:"Core"}},map_section_core_3:{id:"map_section_core_3",name:"[Core] 3",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c0/Map_section_core_3.png",properties:{sectionType:"Core",groupingKey:"Core"}},map_section_core_4:{id:"map_section_core_4",name:"[Core] 4",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e5/Map_section_core_4.png",properties:{sectionType:"Core",groupingKey:"Core"}},map_section_core_5:{id:"map_section_core_5",name:"[Core] 5",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/5a/Map_section_core_5.png",properties:{sectionType:"Core",groupingKey:"Core"}},map_section_core_6:{id:"map_section_core_6",name:"[Core] 1",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/09/Map_section_core_6.png",properties:{sectionType:"Core",groupingKey:"Core"}},map_section_core_special_citadel_w:{id:"map_section_core_special_citadel_w",name:"[Special] White Citadel",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c5/Map_section_core_special_citadel_w.png",properties:{sectionType:"Core",groupingKey:"Citadel"}},map_section_core_special_citadel_b:{id:"map_section_core_special_citadel_b",name:"[Special] Blue Citadel",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/46/Map_section_core_special_citadel_b.png",properties:{sectionType:"Core",groupingKey:"Citadel"}},map_section_core_special_citadel_g:{id:"map_section_core_special_citadel_g",name:"[Special] Green Citadel",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/0e/Map_section_core_special_citadel_g.png",properties:{sectionType:"Core",groupingKey:"Citadel"}},map_section_core_special_citadel_r:{id:"map_section_core_special_citadel_r",name:"[Special] Red Citadel",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/20/Map_section_core_special_citadel_r.png",properties:{sectionType:"Core",groupingKey:"Citadel"}},map_section_core_special_camp:{id:"map_section_core_special_camp",name:"[Special] Camp",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d2/Map_section_core_special_camp.png",properties:{sectionType:"Core",groupingKey:"Special"}},map_section_starter_circular:{id:"map_section_starter_circular",name:"[Starter] Circular",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/be/Map_section_starter_circular.png",properties:{sectionType:"Starter",groupingKey:"Starter"}},map_section_starter_cone:{id:"map_section_starter_cone",name:"[Starter] Cone",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f1/Map_section_starter_cone.png",properties:{sectionType:"Starter",groupingKey:"Starter"}},map_section_starter_corridor:{id:"map_section_starter_corridor",name:"[Starter] Corridor",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/28/Map_section_starter_corridor.png",properties:{sectionType:"Starter",groupingKey:"Starter"}},map_section_starter_corridor_tight:{id:"map_section_starter_corridor_tight",name:"[Starter] Corridor Tight",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/9d/Map_section_starter_corridor_tight.png",properties:{sectionType:"Starter",groupingKey:"Starter"}}},[ae.Terrain]:{terrain__desert:{id:"terrain__desert",name:"Desert [5/3]",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/45/Desert_tile.png",properties:{}},terrain__forest:{id:"terrain__forest",name:"Forest [3/5]",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/ff/Forest_tile.png",properties:{}},terrain__hills:{id:"terrain__hills",name:"Hills [3/3]",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/3c/Hills_tile.png",properties:{}},terrain__lake:{id:"terrain__lake",name:"Lake [X/X]",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e5/Lake_tile.png",properties:{}},terrain__marsh:{id:"terrain__marsh",name:"Marsh [4/4]",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/34/Marsh_tile.png",properties:{}},terrain__mountains:{id:"terrain__mountains",name:"Mountains [X/X]",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d2/Mountains_tile.png",properties:{}},terrain__plains:{id:"terrain__plains",name:"Plains [2/2]",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c8/Plains_tile.png",properties:{}},terrain__swamp:{id:"terrain__swamp",name:"Swamp [5/5]",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/6d/Swamp_tile.png",properties:{}}},[ae.Location]:{location_krak:{id:"location_krak",name:"Krak",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/da/Krak1_icon.png",properties:{}},location_spire:{id:"location_spire",name:"Spire",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/86/Spire1_icon.png",properties:{}},location_citadel_blue:{id:"location_citadel_blue",name:"Citadel of Scahyrst (Blue)",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/89/Citadel_icon_%28Blue%29.png",properties:{}},location_citadel_red:{id:"location_citadel_red",name:"Citadel of Mistmoor (Red)",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/0f/Citadel_icon_%28Red%29.png",properties:{}},location_citadel_green:{id:"location_citadel_green",name:"Citadel of Valmynne (Green)",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/b4/Citadel_icon_%28Green%29.png",properties:{}},location_citadel_white:{id:"location_citadel_white",name:"Citadel of Barad (White)",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/07/Citadel_icon_%28White%29.png",properties:{}},location_labyrinth:{id:"location_labyrinth",name:"Labyrinth",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c9/Labyrinth1_icon.png",properties:{}},location_maze:{id:"location_maze",name:"Maze",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f4/Maze1_icon.png",properties:{}},location_tomb:{id:"location_tomb",name:"Tomb",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/6b/Tomb1_icon.png",properties:{}},location_ruins:{id:"location_ruins",name:"Ruins",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/ec/Ruins1_icon.png",properties:{}},location_dungeon:{id:"location_dungeon",name:"Dungeon",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/9a/Dungeon1_icon.png",properties:{}},location_hideout:{id:"location_hideout",name:"Hideout",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7a/Hideout1_icon.png",properties:{}},location_hallowed:{id:"location_hallowed",name:"Hallowed Site",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f8/Hallowed1_icon.png",properties:{}},location_portal:{id:"location_portal",name:"Portal",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7b/Portal1_icon.png",properties:{}},location_village:{id:"location_village",name:"Village",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/63/Village1_icon.png",properties:{}},location_market:{id:"location_market",name:"Bazaar",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/ef/Market1_icon.png",properties:{}},location_source:{id:"location_source",name:"Source",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/5c/Source1_icon.png",properties:{}},location_mine_b:{id:"location_mine_b",name:"Mine (Blue)",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a1/Mine1_icon.png",properties:{}},location_mine_g:{id:"location_mine_g",name:"Mine (Green)",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a1/Mine1_icon.png",properties:{}},location_mine_r:{id:"location_mine_r",name:"Mine (Red)",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a1/Mine1_icon.png",properties:{}},location_mine_w:{id:"location_mine_w",name:"Mine (White)",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a1/Mine1_icon.png",properties:{}},location_mine_deep_gb:{id:"location_mine_deep_gb",name:"Deep Mine (Green/Blue)",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a1/Mine1_icon.png",properties:{}},location_mine_deep_rw:{id:"location_mine_deep_rw",name:"Deep Mine (Red/White)",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a1/Mine1_icon.png",properties:{}},location_mine_deep_rgbw:{id:"location_mine_deep_rgbw",name:"Deep Mine (Red/Green/Blue/White)",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a1/Mine1_icon.png",properties:{}},location_temple:{id:"location_temple",name:"Temple",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c4/Temple1_icon.png",properties:{}}},[ae.Enemy]:{enemy_apterix:{id:"enemy_apterix",name:"Apterix",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/3c/Apterix.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_arachnophagous:{id:"enemy_arachnophagous",name:"Arachnophagous",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/b9/Arachnophagous.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_baneshrub:{id:"enemy_baneshrub",name:"Baneshrub",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/af/Baneshrub.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_brutalisk:{id:"enemy_brutalisk",name:"Brutalisk",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/ba/Brutalisk.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_bulwarg:{id:"enemy_bulwarg",name:"Bulwarg",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/b2/Bulwarg.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_burrower:{id:"enemy_burrower",name:"Burrower",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/b6/Burrower.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_chamcha:{id:"enemy_chamcha",name:"Chamcha",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c8/Chamcha.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_colossus:{id:"enemy_colossus",name:"Colossus",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/bb/Colossus.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_doryphoros:{id:"enemy_doryphoros",name:"Doryphoros",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/71/Doryphoros.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_dunkun:{id:"enemy_dunkun",name:"Dunkun",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7b/Dunkun.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_fizzog:{id:"enemy_fizzog",name:"Fizzog",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/1b/Fizzog.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_flub:{id:"enemy_flub",name:"Flub",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/91/Flub.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_jawa:{id:"enemy_jawa",name:"Jawa",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a6/Jawa.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_kopros:{id:"enemy_kopros",name:"Kopros",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c0/Korpros.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_kromalgor:{id:"enemy_kromalgor",name:"Kromalgor",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/89/Kromalgor.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_lich:{id:"enemy_lich",name:"Lich",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/86/Lich.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_mortician:{id:"enemy_mortician",name:"Mortician",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a8/Mortician.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_varloam:{id:"enemy_varloam",name:"Varloam",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/4f/Varloam.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_varmintide:{id:"enemy_varmintide",name:"Varmintide",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e3/Varmintide.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_zelisk:{id:"enemy_zelisk",name:"Zelisk",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/5c/Zelisk.png",properties:{enemyType:"enemy_type_vermling",groupingKey:"Vermling"}},enemy_crystalisk:{id:"enemy_crystalisk",name:"Crystalisk",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f9/Crystalisk.png",properties:{enemyType:"enemy_type_guardian",groupingKey:"Guardian"}},enemy_ebonum:{id:"enemy_ebonum",name:"Ebonum",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/36/Ebonum.png",properties:{enemyType:"enemy_type_guardian",groupingKey:"Guardian"}},enemy_leaflet:{id:"enemy_leaflet",name:"Leaflet",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/55/Leaflet.png",properties:{enemyType:"enemy_type_guardian",groupingKey:"Guardian"}},enemy_methraton:{id:"enemy_methraton",name:"Methraton",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/1c/Methraton.png",properties:{enemyType:"enemy_type_guardian",groupingKey:"Guardian"}},enemy_protector:{id:"enemy_protector",name:"Protector",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/cc/Protector.png",properties:{enemyType:"enemy_type_guardian",groupingKey:"Guardian"}},enemy_sage:{id:"enemy_sage",name:"Sage",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f8/Sage.png",properties:{enemyType:"enemy_type_guardian",groupingKey:"Guardian"}},enemy_slavist:{id:"enemy_slavist",name:"Slavist",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/af/Slavist.png",properties:{enemyType:"enemy_type_guardian",groupingKey:"Guardian"}},enemy_tegrophant:{id:"enemy_tegrophant",name:"Tegrophant",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/19/Tegrophant.png",properties:{enemyType:"enemy_type_guardian",groupingKey:"Guardian"}},enemy_timid:{id:"enemy_timid",name:"Timid",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/27/Timid.png",properties:{enemyType:"enemy_type_guardian",groupingKey:"Guardian"}},enemy_warden:{id:"enemy_warden",name:"Warden",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a5/Warden.png",properties:{enemyType:"enemy_type_guardian",groupingKey:"Guardian"}},enemy_apparition:{id:"enemy_apparition",name:"Apparition",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f5/Apparition.png",properties:{enemyType:"enemy_type_arcanum",groupingKey:"Arcanum"}},enemy_arachnean:{id:"enemy_arachnean",name:"Arachnean",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7e/Arachnean.png",properties:{enemyType:"enemy_type_arcanum",groupingKey:"Arcanum"}},enemy_custodian:{id:"enemy_custodian",name:"Custodian",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/83/Custodian.png",properties:{enemyType:"enemy_type_arcanum",groupingKey:"Arcanum"}},enemy_djinn:{id:"enemy_djinn",name:"Djinn",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c4/Djinn.png",properties:{enemyType:"enemy_type_arcanum",groupingKey:"Arcanum"}},enemy_genie:{id:"enemy_genie",name:"Genie",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/8c/Genie.png",properties:{enemyType:"enemy_type_arcanum",groupingKey:"Arcanum"}},enemy_hag:{id:"enemy_hag",name:"Hag",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/de/Hag.png",properties:{enemyType:"enemy_type_arcanum",groupingKey:"Arcanum"}},enemy_harvester:{id:"enemy_harvester",name:"Harvester",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/b7/Harvester.png",properties:{enemyType:"enemy_type_arcanum",groupingKey:"Arcanum"}},enemy_tuth:{id:"enemy_tuth",name:"Tuth",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c2/Tuth.png",properties:{enemyType:"enemy_type_arcanum",groupingKey:"Arcanum"}},enemy_abherration:{id:"enemy_abherration",name:"Abherration",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/21/Abherration.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_ancient_keeper:{id:"enemy_ancient_keeper",name:"Ancient Keeper",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/ad/Ancient_keeper.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_dragonkin:{id:"enemy_dragonkin",name:"Dragonkin",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/aa/Dragon_kin.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_emissary:{id:"enemy_emissary",name:"Emissary",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/bc/Emissary.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_flagellant:{id:"enemy_flagellant",name:"Flagellant",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/94/Flagellant.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_gorgon:{id:"enemy_gorgon",name:"Gorgon",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/03/Gorgon.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_iron_forge:{id:"enemy_iron_forge",name:"Iron Forge",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/6f/Iron_forge.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_kriss:{id:"enemy_kriss",name:"Kriss",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7d/Kriss.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_lilith:{id:"enemy_lilith",name:"Lilith",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7e/Lilith.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_lychen:{id:"enemy_lychen",name:"Lychen",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/fe/Lychen.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_observer:{id:"enemy_observer",name:"Observer",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d3/Observer.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_ooze:{id:"enemy_ooze",name:"Ooze",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/50/Ooze.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_primal_vampire:{id:"enemy_primal_vampire",name:"Primal Vampire",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/78/Primal_vampire.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_tokoloshe:{id:"enemy_tokoloshe",name:"Tokoloshe",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/03/Tokoloshe.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_werewolf:{id:"enemy_werewolf",name:"Werewolf",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f5/Werewolf.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_xenogog:{id:"enemy_xenogog",name:"Xenogog",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c0/Xenogog.png",properties:{enemyType:"enemy_type_abomination",groupingKey:"Abomination"}},enemy_abyss_sentry:{id:"enemy_abyss_sentry",name:"Abyss Sentry",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/4b/Abyss_sentry.png",properties:{enemyType:"enemy_type_abyssal",groupingKey:"Abyssal"}},enemy_berserker:{id:"enemy_berserker",name:"Berserker",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a8/Berserker.png",properties:{enemyType:"enemy_type_abyssal",groupingKey:"Abyssal"}},enemy_deep_seeker:{id:"enemy_deep_seeker",name:"Deep Seeker",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d7/Deep_seeker.png",properties:{enemyType:"enemy_type_abyssal",groupingKey:"Abyssal"}},enemy_molech:{id:"enemy_molech",name:"Molech",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/ea/Molech.png",properties:{enemyType:"enemy_type_abyssal",groupingKey:"Abyssal"}},enemy_night_gaunt:{id:"enemy_night_gaunt",name:"Night Gaunt",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/ec/Night_gaunt.png",properties:{enemyType:"enemy_type_abyssal",groupingKey:"Abyssal"}},enemy_reaper:{id:"enemy_reaper",name:"Reaper",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/6a/Reaper.png",properties:{enemyType:"enemy_type_abyssal",groupingKey:"Abyssal"}},enemy_sothoth:{id:"enemy_sothoth",name:"Sothoth",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d3/Sothoth.png",properties:{enemyType:"enemy_type_abyssal",groupingKey:"Abyssal"}},enemy_void_guardian:{id:"enemy_void_guardian",name:"Void Guardian",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/66/Void_guardian.png",properties:{enemyType:"enemy_type_abyssal",groupingKey:"Abyssal"}},enemy_azureus:{id:"enemy_azureus",name:"Azureus",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/23/Azureus.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}},enemy_citrix_hound:{id:"enemy_citrix_hound",name:"Citrix Hound",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/13/Citrix_hound.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}},enemy_fire_drake:{id:"enemy_fire_drake",name:"Fire Drake",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/16/Fire_drake.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}},enemy_harbinger:{id:"enemy_harbinger",name:"Harbinger",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/38/Harbinger.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}},enemy_herald:{id:"enemy_herald",name:"Herald",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/14/Herald.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}},enemy_primeval_beast:{id:"enemy_primeval_beast",name:"Primeval Beast",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/1a/Primeval_beast.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}},enemy_trickster:{id:"enemy_trickster",name:"Trickster",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/bd/Trickster.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}},enemy_vermillion:{id:"enemy_vermillion",name:"Vermillion",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c4/Vermillion.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}},enemy_viridian:{id:"enemy_viridian",name:"Viridian",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/63/Viridian.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}},enemy_viserion:{id:"enemy_viserion",name:"Viserion",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c9/Viserion.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}},enemy_wild_hunt:{id:"enemy_wild_hunt",name:"Wild Hunt",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/86/Wild_hunt.png",properties:{enemyType:"enemy_type_ancient",groupingKey:"Ancient"}}},[ae.Follower]:{unit_battlehammer:{id:"unit_battlehammer",name:"Battlehammer",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e9/Battlehammer.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_cardinal:{id:"unit_cardinal",name:"Cardinal",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d2/Cardinal.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_conjurer:{id:"unit_conjurer",name:"Conjurer",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d4/Conjurer.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_corruptor:{id:"unit_corruptor",name:"Corruptor",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/ac/Corruptor.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_falconeer:{id:"unit_falconeer",name:"Falconeer",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/1d/Falconeer.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_high_priestess:{id:"unit_high_priestess",name:"High Priestess",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/cc/High_priestess.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_pacifier:{id:"unit_pacifier",name:"Pacifier",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/2a/Pacifier.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_plague_doctor:{id:"unit_plague_doctor",name:"Plague Doctor",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/47/Plague_doctor.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_radiant_servant:{id:"unit_radiant_servant",name:"Radiant Servant",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/91/Radiant_servant.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_scoundrel:{id:"unit_scoundrel",name:"Scoundrel",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/fe/Scoundrel.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_squealer:{id:"unit_squealer",name:"Squealer",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/50/Squealer.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_tracker:{id:"unit_tracker",name:"Tracker",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c5/Tracker.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_traveller:{id:"unit_traveller",name:"Traveller",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/4b/Traveller.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_wyvaar:{id:"unit_wyvaar",name:"Wyvaar",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/64/Wyvar.png",properties:{followerType:"Basic",groupingKey:"Basic"}},unit_pyromancer:{id:"unit_pyromancer",name:"Pyromancer",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/78/Pyromancer.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_pirate:{id:"unit_pirate",name:"Pirate",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7d/Pirate.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_artificier:{id:"unit_artificier",name:"Artificier",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/93/Artificier.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_boreal_brute:{id:"unit_boreal_brute",name:"Boreal Brute",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/23/Boreal_brute.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_coldfire_golem:{id:"unit_coldfire_golem",name:"Cold Fire Golem",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e4/Cold_fire_golem.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_cryoptera:{id:"unit_cryoptera",name:"Cryoptera",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/56/Cryoptera.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_faerie:{id:"unit_faerie",name:"Faerie",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/4d/Faerie.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_feeble_draaken:{id:"unit_feeble_draaken",name:"Feeble Draaken",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/3a/Feeble_draaken.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_eminence:{id:"unit_eminence",name:"Eminence",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/4c/Eminence_champion.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_hatchet:{id:"unit_hatchet",name:"Hatchet",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/42/Hatchet_champion.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_timnit:{id:"unit_timnit",name:"Timnit",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/ef/Timnit_champion.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_deacon:{id:"unit_deacon",name:"Deacon",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/dd/Deacon_champion.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_rain_maker:{id:"unit_rain_maker",name:"Rain Maker",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/49/Rain_maker.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_sylvain_guards:{id:"unit_sylvain_guards",name:"Sylvain Guards",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/48/Sylvain_guards.png",properties:{followerType:"Elite",groupingKey:"Elite"}},unit_arcane_council:{id:"unit_arcane_council",name:"Arcane Council",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/0f/Arcane_council.png",properties:{followerType:"Elite",groupingKey:"Elite"}}},[ae.Scoring]:{score_conquered_all_citadels_15:{id:"score_conquered_all_citadels_15",name:"Conquered All Citadels (15)",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/bc/Score_conquered_all_citadels_icon.png",properties:{}},score_conquered_citadels_10:{id:"score_conquered_citadels_10",name:"Conquered Citadel (10)",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/68/Score_conquered_citadels_icon.png",properties:{}},score_conquered_locations:{id:"score_conquered_locations",name:"Conquered Locations (2)",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/3e/Score_conquered_locations_icon.png",properties:{}},score_crystal_pairs:{id:"score_crystal_pairs",name:"Pair of Crystals (1)",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/49/Score_crystal_pairs_icon.png",properties:{}},score_end_of_round_unannounced_5:{id:"score_end_of_round_unannounced_5",name:"End of Round Unannounced (5)",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/88/Score_end_of_round_unannounced_icon.png",properties:{}},score_remaining_rounds_30:{id:"score_remaining_rounds_30",name:"Remaining Rounds (30)",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/1c/Score_remaining_rounds_icon.png",properties:{}},score_units:{id:"score_units",name:"Followers (Follower Level, half if wounded)",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/68/Score_units_icon.png",properties:{}},score_relics_2:{id:"score_relics_2",name:"Relic (2)",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/1a/Score_relics_icon.png",properties:{}},score_spells_2:{id:"score_spells_2",name:"Spell (2)",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/fa/Score_spells_icon.png",properties:{}},score_advanced_actions_1:{id:"score_advanced_actions_1",name:"Advanced Actions (1)",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f3/Score_advanced_actions_icon.png",properties:{}},score_wounds_2:{id:"score_wounds_2",name:"Wounds (-2)",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e2/Score_wounds_icon.png",properties:{}},score_xp:{id:"score_xp",name:"XP (1)",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d5/Score_xp_icon.png",properties:{}}},[ae.Blessing]:{skill_driven_by_faith:{id:"skill_driven_by_faith",name:"Driven By Faith",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/b5/Skill_driven_by_faith.png",properties:{description:"Move 2 (Day) or Move 1 (Night)."}},skill_raven_vision:{id:"skill_raven_vision",name:"Raven Vision",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/98/Skill_raven_vision.png",properties:{description:"Range Attack 1 (Day) or Range Attack 2 (Night)."}},skill_ice_whisperer:{id:"skill_ice_whisperer",name:"Ice Whisperer",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/f0/Skill_ice_whisperer.png",properties:{description:"Attack 2 or Frost Attack 2."}},skill_divine_protection:{id:"skill_divine_protection",name:"Divine Protection",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/5a/Skill_divine_protection.png",properties:{description:"Block 3 or, Fire or Frost Block 2."}},skill_purification:{id:"skill_purification",name:"Purification",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/ea/Skill_purification.png",properties:{description:"Reduce Enemy Armor by 1 for each Resistance they have."}},skill_channel_divine_essence:{id:"skill_channel_divine_essence",name:"Divine Essence",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/2d/Skill_channel_divine_essence.png",properties:{description:"Discard a Wound from your Hand to Draw a Card (Outside Combat)."}},skill_offering:{id:"skill_offering",name:"Offering",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/78/Skill_offering.png",properties:{description:"The default action of one Starter Card gives +2 instead of +1. Any other (non-wounds) card will give +3 instead."}},skill_innate_communion:{id:"skill_innate_communion",name:"Innate Communion",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/1d/Skill_innate_communion.png",properties:{description:"The default action of a Card gives +2 instead of +1. +3 if you didn't use any Ambient Mana this turn."}},skill_celestial_empowerment:{id:"skill_celestial_empowerment",name:"Celestial Empowerment",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a5/Skill_celestial_empowerment.png",properties:{description:"Gain a Blue Mana and Draw 2 Cards (Outside Combat)"}},skill_arcane_well:{id:"skill_arcane_well",name:"Arcane Well",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/25/Skill_arcane_source.png",properties:{description:"Generate a Mana of any color except Gold."}},skill_spirited_march:{id:"skill_spirited_march",name:"Spirited March",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/3e/Skill_spirited_march.png",properties:{description:"Move 1 for each Non-Exhausted and Non-Wounded Follower (max. 3 points)."}},skill_eagle_vision:{id:"skill_eagle_vision",name:"Eagle Vision",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/80/Skill_eagle_vision.png",properties:{description:"Range Attack 2 (Day) OR Range Attack 1 (Night)."}},skill_soothing_winds:{id:"skill_soothing_winds",name:"Soothing Winds",image:"https://static.wikia.nocookie.net/paladinsoath/images/0/09/Skill_soothing_winds.png",properties:{description:"Refresh or Heal a Follower's Wound."}},skill_divine_aura:{id:"skill_divine_aura",name:"Divine Aura",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/19/Skill_divine_aura.png",properties:{description:"Leadership 3 (Day) or Leadership 2 (Night)."}},skill_gift_of_nature:{id:"skill_gift_of_nature",name:"Gift of Nature",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/5b/Skill_gift_of_nature.png",properties:{description:"Gain a Green Crystal and a White Mana."}},skill_call_of_nature:{id:"skill_call_of_nature",name:"Call of Nature",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c7/Skill_call_of_nature.png",properties:{description:"Gain a White Crystal and a Green Mana."}},skill_lightning_strength:{id:"skill_lightning_strength",name:"Lightning Strength",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/6e/Skill_lightning_strength.png",properties:{description:"Add +3 to a Follower Block or +2 to their Attack, +1 if Range (not Siege)."}},skill_diplomatic_aura:{id:"skill_diplomatic_aura",name:"Diplomatic Aura",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/38/Skill_diplomatic_aura.png",properties:{description:"Leadership 1. You can manage 1 additional Follower."}},skill_lightning_empowerment:{id:"skill_lightning_empowerment",name:"Lightning Empowerment",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e3/Skill_lightning_empowerment.png",properties:{description:"Gain a White Mana. Draw 2 Cards (Outside Combat)."}},skill_lightning_steps:{id:"skill_lightning_steps",name:"Lightning Steps",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a0/Skill_lightning_steps.png",properties:{description:"Move cost of all terrain is reduced by 2 (minimum of 1)."}},skill_ice_rain:{id:"skill_ice_rain",name:"Ice Rain",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/e1/Skill_ice_rain.png",properties:{description:"Siege Attack 1 or Siege Frost Attack 1."}},skill_life_elixir:{id:"skill_life_elixir",name:"Life Elixir",image:"https://static.wikia.nocookie.net/paladinsoath/images/1/13/Skill_life_elixir.png",properties:{description:"Heal 2 (Before or After Battle)."}},skill_air_crafting:{id:"skill_air_crafting",name:"Air Crafting",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a1/Skill_air_crafting.png",properties:{description:"Gain a Blue Crystal and a White Mana Essence."}},skill_earth_crafting:{id:"skill_earth_crafting",name:"Earth Crafting",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/dd/Skill_earth_crafting.png",properties:{description:"Gain a Blue Crystal and a Green Mana Essence."}},skill_fire_crafting:{id:"skill_fire_crafting",name:"Fire Crafting",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/46/Skill_fire_crafting.png",properties:{description:"Gain a Blue Crystal and a Red Mana Essence."}},skill_crystallic_hypnosis:{id:"skill_crystallic_hypnosis",name:"Crystallic Hypnosis",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/fe/Skill_crystallic_hypnosis.png",properties:{description:"During Interactions, Leadership 1 for each distinct Crystal Colors in your Inventory."}},skill_wind_portal:{id:"skill_wind_portal",name:"Wind Portal",image:"https://static.wikia.nocookie.net/paladinsoath/images/f/fc/Skill_wind_portal.png",properties:{description:"Teleport 1 Space away for Free or 2 Spaces away for 2 Movement points."}},skill_mana_infusion:{id:"skill_mana_infusion",name:"Mana Infusion",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/38/Skill_mana_infusion.png",properties:{description:"Pay a Mana and a non-wound Card to get Move 3, Leadership 3, Attack 3 or Block 3. Get +4 if the Card and Mana color match."}},skill_monastic_empowerment:{id:"skill_monastic_empowerment",name:"Monastic Empowerment",image:"https://static.wikia.nocookie.net/paladinsoath/images/b/ba/Skill_monastic_empowerment.png",properties:{description:"Gain a Green Mana. Draw 2 Cards (Outside Combat)."}},skill_ambient_crystallization:{id:"skill_ambient_crystallization",name:"Ambient Crystallization",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/73/Skill_ambient_crystallization.png",properties:{description:"Generate a Crystal of the same color as an Ambient Mana."}},skill_dark_vision:{id:"skill_dark_vision",name:"Dark Vision",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/7c/Skill_dark_vision.png",properties:{description:"Move 1 (Day) or Move 2 (Night)."}},skill_chaos_rift:{id:"skill_chaos_rift",name:"Chaos Rift",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/a2/Skill_chaos_rift.png",properties:{description:"Siege Attack 1 or Siege Fire Attack 1."}},skill_nether_sword:{id:"skill_nether_sword",name:"Nether Sword",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/db/Skill_nether_sword.png",properties:{description:"Attack 2 or Fire Attack 2."}},skill_mind_control:{id:"skill_mind_control",name:"Mind Control",image:"https://static.wikia.nocookie.net/paladinsoath/images/5/58/Skill_mind_control.png",properties:{description:"Leadership 2 (Day) or Leadership 3 (Night)."}},skill_defiled_source:{id:"skill_defiled_source",name:"Defiled Source",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/d4/Skill_defiled_source.png",properties:{description:"Generate a Red Mana Crystal and a Red or Black Mana Essence."}},skill_blood_infusion:{id:"skill_blood_infusion",name:"Blood Infusion",image:"https://static.wikia.nocookie.net/paladinsoath/images/a/ad/Skill_blood_infusion.png",properties:{description:"Discard a Wound to get Move 2, Leadership 2, Attack 2 or Block 2."}},skill_nether_conjuration:{id:"skill_nether_conjuration",name:"Nether Conjuration",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/93/Skill_nether_conjuration.png",properties:{description:"Discard a Wound to Gain a Red or Black Mana Essence or any non-Wound Card for a White or Green Mana Essence."}},skill_nether_manipulation:{id:"skill_nether_manipulation",name:"Nether Manipulation",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/43/Skill_nether_manipulation.png",properties:{description:"Convert a Gold Mana into Black, or Red into Blue, or White into Green, or vice-versa, regardless of Day/Night restriction."}},skill_underdark_empowerment:{id:"skill_underdark_empowerment",name:"Underdark Empowerment",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/47/Skill_underdark_empowerment.png",properties:{description:"Gain a Red Mana. Draw 2 Cards (Outside Combat)."}},skill_death_ward:{id:"skill_death_ward",name:"Death Ward",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/88/Skill_death_ward.png",properties:{description:"Heal up to 2 Wounds from your Hand (Before or After Battle)."}},skill_cleansing_waters:{id:"skill_cleansing_waters",name:"Cleansing Waters",image:"https://static.wikia.nocookie.net/paladinsoath/images/7/75/Skill_cleansing_waters.png",properties:{description:"Heal 1. Gain a Blue Crystal."}},skill_cleansing_winds:{id:"skill_cleansing_winds",name:"Cleansing Winds",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/6a/Skill_cleansing_winds.png",properties:{description:"Heal 1. Gain a White Crystal."}},skill_pathfinder:{id:"skill_pathfinder",name:"Pathfinder",image:"https://static.wikia.nocookie.net/paladinsoath/images/6/69/Skill_pathfinder.png",properties:{description:"Move 1. Exploration distance +2 (Day) or Exploration cost -2 (Night)"}},skill_eremite_influence:{id:"skill_eremite_influence",name:"Eremite Influence",image:"https://static.wikia.nocookie.net/paladinsoath/images/c/c5/Skill_eremite_influence.png",properties:{description:"Leadership 1, +2 per empty Follower Slot."}},skill_imbued_strength:{id:"skill_imbued_strength",name:"Imbued Strength",image:"https://static.wikia.nocookie.net/paladinsoath/images/9/91/Skill_imbued_strength.png",properties:{description:"Increase a card's Attack by 1 in the Range phase or by 2 in the Attack phase."}},skill_decaying_smite:{id:"skill_decaying_smite",name:"Decaying Smite",image:"https://static.wikia.nocookie.net/paladinsoath/images/e/eb/Skill_decaying_smite.png",properties:{description:"Remove one Resistance or Fortification from an Enemy or one Element or Modifier from their Attacks. Ineffective against Arcane Immunity."}},skill_tormenting_thoughts:{id:"skill_tormenting_thoughts",name:"Tormenting Thoughts",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/32/Skill_tormenting_thoughts.png",properties:{description:"During the Block phase, reduce an Enemy's Attack by 1, or increase it by 2 but reduce its Armor by 2."}},skill_eerie_riposte:{id:"skill_eerie_riposte",name:"Eerie Riposte",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/40/Skill_eerie_riposte.png",properties:{description:"Block 1, then reduce that Enemy's Armor by 1."}},skill_self_empowerment:{id:"skill_self_empowerment",name:"Self Empowerment",image:"https://static.wikia.nocookie.net/paladinsoath/images/8/86/Skill_self_empowerment.png",properties:{description:"Gain 1 XP. Draw 2 Cards (Outside Combat)."}},skill_beast_unleashed:{id:"skill_beast_unleashed",name:"Beast Unleashed",image:"https://static.wikia.nocookie.net/paladinsoath/images/3/36/Skill_beast_unleashed.png",properties:{description:"Discard a Card to get Move 4, Leadership 4, Attack 4 or Block 4. +1 per empty Follower Slot."}},skill_mithril_scimitars:{id:"skill_mithril_scimitars",name:"Mithril Scimitars",image:"https://static.wikia.nocookie.net/paladinsoath/images/4/4f/Skill_mithril_scimitars.png",properties:{description:"Double Chaos Attack 2."}},skill_mithril_armor:{id:"skill_mithril_armor",name:"Mithril Armor",image:"https://static.wikia.nocookie.net/paladinsoath/images/d/dd/Skill_mithril_armor.png",properties:{description:"Chaos Block 2."}},skill_wukong_staff:{id:"skill_wukong_staff",name:"Wukong Staff",image:"https://static.wikia.nocookie.net/paladinsoath/images/2/23/Skill_wukong_staff.png",properties:{description:"Siege Attack 3 or Teleport 2."}}},[ae.Rewards]:{character_level_up_reward_card_and_skill:{id:"character_level_up_reward_card_and_skill",name:"Pick a card from the Market and Draw a Blessing",image:Ee,properties:{}},character_level_up_reward_unitslot_and_armor:{id:"character_level_up_reward_unitslot_and_armor",name:"+1 Follower Slot and +1 Armor",image:Ee,properties:{}},character_level_up_reward_unitslot_and_hand_size:{id:"character_level_up_reward_unitslot_and_hand_size",name:"+1 Follower Slot and +1 Hand Size",image:Ee,properties:{}}},[ae.Oath]:{},[ae.Character]:{},[ae.Scenario]:{},[ae.ScenarioExtension]:{},[ae.Language]:{}},Ri=(a,e)=>{const t=it[a];if(t===void 0)return null;const n=Object.values(t).find(r=>r.id===e);return n!==void 0?n:null};function Mi(a){const e=a.data,t=a.renderConfig,n=i=>{i=i.trim(),e.onValueChanged(i.length==0?null:i)};let r;return t.isText?r=T("textarea",{className:e.error?"error":"",defaultValue:e.value||"",placeholder:e.defaultValue||"",onKeyDown:i=>n(i.target.value),onInput:i=>n(i.target.value)}):r=T("input",{type:"text",className:e.error?"error":"",defaultValue:e.value||"",placeholder:e.defaultValue||"",onKeyDown:i=>n(i.target.value),onInput:i=>n(i.target.value)}),T("div",{className:"string_editor",children:r})}function Bi(a){const e=a.data,t=a.info,n=Tt(),r=()=>{n.current.click()},i=()=>{e.onValueChanged(null)};return T("div",{className:"image_editor",children:[T("input",{type:"file",ref:n,style:{display:"none"},onChange:async()=>{const c=n.current.files[0],h=new FileReader;h.readAsDataURL(c),h.onload=function(g){var p=new Image;p.src=g.target.result,p.onload=function(){if(this.width!=t.width||this.height!=t.height)return alert("File dimensions do not match the requirements: "+this.width+"x"+this.height+" != "+t.width+"x"+t.height),!1;let _=g.target.result;const d=_.indexOf(";base64,");return d>0&&(_=_.substring(d+8)),e.onValueChanged(_),!0}}},onCancel:()=>{},accept:"."+t.ext}),e.value?T("img",{src:"data:image/"+t.ext+";base64,"+e.value}):null,T("div",{className:"actions",children:[e.value?T("button",{onClick:i,children:"Delete"}):null,T("button",{onClick:r,children:"Change"})]})]})}const oe={Element:{element_physical:{value:"element_physical",name:"Physical"},element_fire:{value:"element_fire",name:"Fire"},element_frost:{value:"element_frost",name:"Frost/Ice"},element_chaos:{value:"element_chaos",name:"Chaos"}},AttackType:{Basic:{value:0,name:"Basic"},Range:{value:1,name:"Range"},Siege:{value:2,name:"Siege"}},AttackModifier:{None:{value:0,name:"None"},Poison:{value:1,name:"Poison"},Paralyze:{value:2,name:"Paralyze"},Assassin:{value:3,name:"Assassin"},Brutal:{value:4,name:"Brutal"},Swift:{value:5,name:"Swift"},Cumbersome:{value:6,name:"Cumbersome"}},TurnPhase:{Initializing:{value:-1,name:"Initializing"},TurnStart:{value:0,name:"Turn Start"},Movement:{value:1,name:"Movement"},InteractionLocation:{value:20,name:"Interaction> Location"},InteractionBattle:{value:21,name:"Interaction> Battle"},TurnEnd:{value:3,name:"Turn End"}},BattlePhase:{None:{value:0,name:"None"},BeforeBattle:{value:1,name:"Before Battle"},Range:{value:2,name:"Range"},Block:{value:3,name:"Block"},Attack:{value:4,name:"Attack"},AfterBattle:{value:5,name:"After Battle"}},CardType:{Wound:{value:1,name:"Wound"},Action:{value:2,name:"Action"},Relic:{value:3,name:"Relic"},Spell:{value:4,name:"Spell"}},PlayerCardLocation:{Hand:{value:0,name:"Hand"},DiscardPile:{value:1,name:"Discard Pile"},DrawPile:{value:2,name:"Draw Pile"}},CardEffectSlot:{None:{value:0,name:"None"},Basic:{value:1,name:"Basic"},Advanced:{value:2,name:"Advanced"}},ManaForm:{Token:{value:0,name:"Token"},Source:{value:1,name:"Source"},Crystal:{value:2,name:"Crystal"}},ManaColorType:{Basic:{value:0,name:"Basic"},Special:{value:1,name:"Special"}},FollowerType:{Basic:{value:0,name:"Basic"},Elite:{value:1,name:"Elite"}},Immunity:{Arcane:{value:1,name:"Arcane"}},Fortification:{NeverFortified:{value:1,name:"Never Fortified"},NotFortified:{value:2,name:"Not Fortified"},Fortified:{value:3,name:"Fortified"},DoubleFortified:{value:4,name:"Double Fortified"}},FortificationModification:{NeverFortified:{value:-3,name:"Never Fortified"},LoseAllFortification:{value:-2,name:"Lose All Fortification"},LoseFortification:{value:-1,name:"Lose Fortification"},GainFortification:{value:0,name:"Gain Fortification"},AlwaysFortified:{value:1,name:"Always Fortified"}},CardCostType:{Discard:{value:0,name:"Discard"},Throw:{value:1,name:"Throw"}},BlessingRefreshCondition:{Always:{value:0,name:"Always"},EndOfRound:{value:1,name:"End Of Round"}},ScenarioDifficulty:{Easy:{value:0,name:"Easy"},Medium:{value:1,name:"Medium"},Hard:{value:2,name:"Hard"},Expert:{value:3,name:"Expert"}},ScenarioDuration:{Short:{value:0,name:"Short"},Medium:{value:1,name:"Medium"},Long:{value:2,name:"Long"},VeryLong:{value:3,name:"Very Long"}},MapSectionType:{Starter:{value:0,name:"Starter"},Regular:{value:1,name:"Regular"},Core:{value:2,name:"Core"}},MapShape:{map_shape_circular:{value:"map_shape_circular",name:"Circular"},map_shape_cone:{value:"map_shape_cone",name:"Conical"},map_shape_corridor_tight:{value:"map_shape_corridor_tight",name:"Corridor (Tight)"},map_shape_corridor:{value:"map_shape_corridor",name:"Corridor"}},ManaColor:{mana_black:{value:"mana_black",name:"Black"},mana_gold:{value:"mana_gold",name:"Gold"},mana_red:{value:"mana_red",name:"Red"},mana_blue:{value:"mana_blue",name:"Blue"},mana_white:{value:"mana_white",name:"White"},mana_green:{value:"mana_green",name:"Green"}},TimeOfDay:{timeofday_day:{value:"timeofday_day",name:"Day"},timeofday_night:{value:"timeofday_night",name:"Night"}},Reward:{reward_xp_1:{value:"reward_xp_1",name:"+1 XP"},reward_draw_card_1:{value:"reward_draw_card_1",name:"Draw 1 Card"},reward_draw_card_2:{value:"reward_draw_card_2",name:"Draw 2 Cards"},reward_artifact_into_deck:{value:"reward_artifact_into_deck",name:"Draw 2 Keep 1 Relic into Deck"},reward_artifact_into_hand:{value:"reward_artifact_into_hand",name:"Draw 2 keep 1 Relic into Hand"},reward_offer_advanced_action:{value:"reward_offer_advanced_action",name:"Select 1 Action card form Market into Deck"},reward_offer_advanced_action_2:{value:"reward_offer_advanced_action_2",name:"Select 2 Action cards form Market into Deck"},reward_offer_advanced_action_3:{value:"reward_offer_advanced_action_3",name:"Select 3 Action cards form Market into Deck"},reward_offer_spell:{value:"reward_offer_spell",name:"Select 1 Spell from Market into Deck"},reward_offer_spell_2:{value:"reward_offer_spell_2",name:"Select 2 Spells from Market into Deck"},reward_offer_spell_3:{value:"reward_offer_spell_3",name:"Select 3 Spells from Market into Deck"},reward_offer_unit:{value:"reward_offer_unit",name:"Select 1 Follower from the Market"},reward_offer_unit_2:{value:"reward_offer_unit_2",name:"Select 2 Followers from the Market"},reward_offer_unit_3:{value:"reward_offer_unit_3",name:"Select 3 Followers from the Market"},reward_unit_slot:{value:"reward_unit_slot",name:"+1 Follower Slot"},reward_unit_slot_2:{value:"reward_unit_slot_2",name:"+2 Follower Slots"},reward_unit_slot_3:{value:"reward_unit_slot_3",name:"+3 Follower Slots"},reward_mana_crystal_pick:{value:"reward_mana_crystal_pick",name:"Gain a Mana Crystal of their choice"},reward_mana_crystal_random:{value:"reward_mana_crystal_random",name:"Roll Mana: RGBW=gain crystal; Black=1XP; Gold=pick color"},reward_mana_crystal_blue:{value:"reward_mana_crystal_blue",name:"Gain Blue Mana Crystal"},reward_mana_crystal_green:{value:"reward_mana_crystal_green",name:"Gain Green Mana Crystal"},reward_mana_crystal_red:{value:"reward_mana_crystal_red",name:"Gain Red Mana Crystal"},reward_mana_crystal_white:{value:"reward_mana_crystal_white",name:"Gain White Mana Crystal"},reward_mana_token_pick:{value:"reward_mana_token_pick",name:"Gain Mana essence of their choice"},reward_mana_token_black:{value:"reward_mana_token_black",name:"Gain Black Mana Essence"},reward_mana_token_gold:{value:"reward_mana_token_gold",name:"Gain Gold Mana Essence"},reward_recover_used_crystals:{value:"reward_recover_used_crystals",name:"Recover all crystals used this turn"},reward_player_armor_1:{value:"reward_player_armor_1",name:"+1 Armor"},reward_player_armor_2:{value:"reward_player_armor_2",name:"+2 Armor"},reward_player_armor_3:{value:"reward_player_armor_3",name:"+3 Armor"},reward_player_hand_size_1:{value:"reward_player_hand_size_1",name:"+1 Hand Size"},reward_player_hand_size_2:{value:"reward_player_hand_size_2",name:"+2 Hand Size"},reward_player_hand_size_3:{value:"reward_player_hand_size_3",name:"+3 Hand Size"},reward_reputation_inc_1:{value:"reward_reputation_inc_1",name:"+1 Reputation"},reward_reputation_inc_2:{value:"reward_reputation_inc_2",name:"+2 Reputation"},reward_reputation_inc_3:{value:"reward_reputation_inc_3",name:"+3 Reputation"},reward_reputation_dec_1:{value:"reward_reputation_dec_1",name:"-1 Reputation"},reward_reputation_dec_2:{value:"reward_reputation_dec_2",name:"-2 Reputation"},reward_reputation_dec_3:{value:"reward_reputation_dec_3",name:"-3 Reputation"},reward_skill:{value:"reward_skill",name:"Draw 2 Keep 1 Blessing"},reward_skill_2:{value:"reward_skill_2",name:"Draw 3 Keep 2 Blessings"},reward_skill_3:{value:"reward_skill_3",name:"Draw 4 Keep 3 Blessings"},reward_skill_offer:{value:"reward_skill_offer",name:"Select 1 Blessing"},reward_wound_throw_all_received_this_turn:{value:"reward_wound_throw_all_received_this_turn",name:"Throw all Wounds received this turn"},reward_wound_throw_discard:{value:"reward_wound_throw_discard",name:"Throw 1 wound from Discard pile"},reward_wound_throw_hand:{value:"reward_wound_throw_hand",name:"Throw 1 Wound from Hand"},reward_wound_throw:{value:"reward_wound_throw",name:"Throw 1 Wound from Hand or Discard Pile"},reward_wound_throw_2:{value:"reward_wound_throw_2",name:"Throw 2 Wounds from Hand or Discard Pile"},reward_wound_throw_3:{value:"reward_wound_throw_3",name:"Throw 3 Wounds from Hand or Discard Pile"}},RewardComboType:{combo_and:{value:0,name:"AND"},combo_or:{value:1,name:"OR"}},EnemyType:{enemy_type_vermling:{value:"enemy_type_vermling",name:"Vermling"},enemy_type_guardian:{value:"enemy_type_guardian",name:"Guardian"},enemy_type_arcanum:{value:"enemy_type_arcanum",name:"Arcanum"},enemy_type_abomination:{value:"enemy_type_abomination",name:"Abomination"},enemy_type_abyssal:{value:"enemy_type_abyssal",name:"Abyssal"},enemy_type_ancient:{value:"enemy_type_ancient",name:"Ancient"}},Oath:{oath_vengeance:{value:"oath_vengeance",name:"Vengeance"},oath_devotion:{value:"oath_devotion",name:"Devotion"},oath_conquest:{value:"oath_conquest",name:"Conquest"},oath_guidance:{value:"oath_guidance",name:"Guidance"},oath_abundance:{value:"oath_abundance",name:"Abundance"},oath_piety:{value:"oath_piety",name:"Piety"},oath_way_of_the_drow:{value:"oath_way_of_the_drow",name:"Way of the Drow"},oath_way_of_the_sun:{value:"oath_way_of_the_sun",name:"Way of the Sun"}}},Re=(a,e)=>{const t=Object.values(a).find(n=>n.value===e);return t===void 0?null:t},Dt={cardMods:ae.Card,mapSectionMods:ae.MapSection,terrainMods:ae.Terrain,enemyMods:ae.Enemy,rewardsMods:ae.Rewards,oathMods:ae.Oath,characterMods:ae.Character,scenarioMods:ae.Scenario,scenarioExtensionMods:ae.ScenarioExtension,languageMods:ae.Language};function Ni(a){const e=a.data,t=r=>{e.onValueChanged(r==null?r:Number(r))},n=Number.isInteger(e.value)?e.value:null;return T("div",{className:"int_editor",children:[T("input",{type:"number",className:e.error?"error":"",value:n,placeholder:Number.isInteger(e.defaultValue)?e.defaultValue:0,onKeyDown:r=>t(Number(r.target.value)),onInput:r=>t(Number(r.target.value))}),T("button",{onClick:()=>t(null),children:"Reset"})]})}function Oi(a){const e=a.data,t=r=>{e.onValueChanged(r===null?null:!!r)},n=e.value===null?!!e.defaultValue:!!e.value;return T("div",{className:"bool_editor",children:T("input",{type:"checkbox",className:e.error?"error":"",checked:n,onChange:r=>t(!n)})})}function Fi(a){const e=a.data,t=i=>{if(i!==null){const s=Object.values(a.values)[0].value;Number.isInteger(s)&&(i=Number(i))}e.onValueChanged(i)},n=[];for(const i of Object.values(a.values))n.push(T("option",{value:i.value,children:i.name},i.value));let r="";return e.value!==void 0?r=e.value:e.defaultValue!==void 0&&(r=e.defaultValue),T("div",{className:"value_editor",children:T("div",{className:"item",children:[T("select",{onChange:i=>t(i.target.value),className:e.error?"error":"",value:r,children:n}),T("button",{onClick:()=>t(null),children:"Reset"})]})})}function zi(a){const e=a.data,t=r=>{if(r!==null){const i=Object.values(a.values)[0];Number.isInteger(i)&&(r=Number(r))}e.onValueChanged(r)},n=[];for(const r of a.values)n.push(T("option",{value:r,children:r},r));return T("div",{className:"value_editor",children:T("div",{className:"item",children:[T("select",{onChange:r=>t(r.target.value),className:e.error?"error":"",value:""+(e.value||e.defaultValue||""),children:n}),T("button",{onClick:()=>t(null),children:"Reset"})]})})}function ct(a){return T("div",{className:"popup_container",onClick:()=>{},children:T("div",{className:"popup_content",children:[T("div",{className:"popup_header",children:[T("div",{className:"popup_title",children:a.title}),T("button",{onClick:()=>a.onClose(),children:"Close"})]}),T("div",{className:"popup_main",children:a.children})]})})}function Pi(a){const[e,t]=ye(!1),n=a.data,r=a.specs,i=n.value!==void 0&&n.value!==null;let s=null,o=null;if(!i&&n.property.optional)o=T("button",{onClick:()=>{n.onValueChanged({}),t(!0)},children:"New"}),e&&t(!1);else{const c=()=>{n.onValueChanged(null),t(!1)},h=[];n.property.optional&&h.push(T("button",{onClick:c,children:"Delete"})),h.push(T("button",{onClick:()=>t(!0),children:"Edit"}));const g=r.summary(n.value);o=T("div",{className:"item",children:[h,g?T("div",{className:"summary",children:g}):null,T("div",{})]})}if(e){const c=n.property.label||r.title,h=n.property.description||r.description,g={specs:r,data:n.value,titleOverride:"",descriptionOverride:"",error:null,disableActions:!0,saveData:async p=>{n.onValueChanged(p)},validateData:p=>{n.onValueChanged(p)}};s=T(ct,{title:c,onClose:()=>t(!1),children:[T("div",{children:h}),T(We,{data:g},"custom_spec")]})}return[T("div",{class:"custom_editor",children:o}),s]}class xe{constructor(e,t,n={}){if(ge[e]===void 0)throw new Error("Invalid Mod type '"+e+"'");this.modType=e,this.modData={},this.modSpecs=ge[e].specs(t);for(let r of this.modSpecs.properties)this.modData[r.id]={data:null,prop:r};for(let r of this.modSpecs.properties){const i=n[r.id];if(i!=null)try{this.setProperty(r.id,i)}catch(s){console.error("Invalid preloaded data for prop '"+r.id+"' : "+JSON.stringify(i),s)}}}isValid(){try{return this.validate(),!0}catch{return!1}}validate(){for(let t in this.modData)this.validateData(t,this.modData[t].data);const e=this.modSpecs.validator;if(e!==void 0)try{e(this.getData())}catch(t){const n=new Error(this.getGUID()+"> "+t.message);throw n.stack=t.stack,n}}validateData(e,t){const n=this.modData[e];if(n===void 0)throw new Error("Invalid propId: '"+e+"'");if(t==null){if(n.prop.default!==void 0)return;if(!n.prop.optional)throw new Error("Required value is null for property "+e);return}try{n.prop.specs.validator(t),n.prop.validator!==void 0&&n.prop.validator(t)}catch(r){const i=new Error(this.getGUID()+":"+e+"> "+r.message);throw i.stack=r.stack,i}}validateAll(e){for(const t of Object.keys(e))this.validateData(t,e[t]);this.modSpecs.validator&&this.modSpecs.validator(e)}getModSpecs(){return this.modSpecs}getModType(){return this.modType}getGUID(){return this.modData.guid.data}getName(){return this.modData.name.data}getData(e={}){const t=!!(e||{}).returnDefaultValues,n=i=>{const s={};for(const o of i){const c=o.id,h=o.data;if(h==null){if(h!==void 0&&(s[c]=h),!t)continue;o.specs.isList?s[c]=[]:o.default!==void 0&&(s[c]=o.default);continue}if(o.specs.isCustomSpec===!0){if(o.specs.isList){const p=[];for(const _ of h){const d=[];for(const y of o.specs.customSpec.properties)d.push({id:y.id,data:_[y.id],default:y.default,specs:y.specs});p.push(n(d))}s[c]=p}else{const p=[];for(const _ of o.specs.customSpec.properties)p.push({id:_.id,data:h[_.id],default:_.default,specs:_.specs});s[c]=n(p)}continue}if(!o.specs.isFile){s[c]=h;continue}const g=o.specs.fileExt;if(Array.isArray(h)){const p=[];for(const _ in h)p.push(c+"_"+_+"."+g);s[c]=p}else s[c]=c+"."+g}return s},r=[];for(const i of Object.keys(this.modData))r.push({id:i,data:this.modData[i].data,default:this.modData[i].prop.default,specs:this.modData[i].prop.specs});return n(r)}getFileData(e={}){const t=!!(e||{}).createImgBase64Url,n=i=>{const s={};for(const o of i){const c=o.id,h=o.data,g=o.specs;if(h!=null){if(g.isFile===!0){if(t&&g.imgInfo)if(g.isList===!0){const p=[];for(const _ of h)p.push(je(_,g.fileExt));s[c]=p}else s[c]=je(h,g.fileExt);else s[c]=h;continue}if(g.isCustomSpec===!0)if(g.isList===!0){const p=[];for(const _ of h){const d=[];for(const u of o.specs.customSpec.properties)d.push({id:u.id,data:_[u.id]||null,specs:u.specs});const y=n(d);Object.keys(y).length>0&&p.push(y)}p.length>0&&(s[c]=p)}else{const p=[];for(const d of g.customSpec.properties)p.push({id:d.id,data:(h||{})[d.id]||null,specs:d.specs});const _=n(p);Object.keys(_).length>0&&(s[c]=_)}}}return s},r=[];for(let i of Object.keys(this.modData))r.push({id:i,data:this.modData[i].data,specs:this.modData[i].prop.specs});return n(r)}getDataWithFileData(e={}){const t=this.getData(e),n=this.getFileData(e);return xe.mergeDataAndFileData(t,n)}getProperty(e){if(this.modData[e]===void 0)throw new Error('Invalid propId "'+e+'"');return this.modData[e].data}getPropertySpecs(e){if(this.modData[e]===void 0)throw new Error('Invalid propId "'+e+'"');return this.modData[e].prop.specs}getImageUrlProperty(e){const t=this.getProperty(e),n=this.modData[e].prop.specs;if(!n.imgInfo)throw new Error('Prop is not an image "'+e+"'");if(!Array.isArray(t))return je(t,n.imgInfo.ext);const r=[];for(const i of t)r.push(je(i,n.imgInfo.ext));return r}setProperty(e,t,n=!0){n&&this.validateData(e,t),this.modData[e].data=t}setProperties(e,t=!0){for(const n of Object.keys(e))this.setProperty(n,e[n],t)}addPropertyValue(e,t,n=!0){const r=this.modData[e];if(r===void 0)throw new Error("Invalid propId: '"+e+"'");let i;if(r.data==null)i=[t];else if(Array.isArray(r.data))i=r.data.slice(),i.push(t);else throw new Error("Prop is not an array: '"+e+"'");n&&this.validateData(e,i),this.modData[e].data=i}async saveToStore(e){const t={modType:this.getModType(),data:this.getData(),fileData:this.getFileData()};await e.putData(this.getGUID(),t)}static async deleteFromStore(e,t){await e.deleteData(t)}static async loadFromStore(e,t,n){const r=await e.getData(t);if(!r)return null;const i=this.mergeDataAndFileData(r.data,r.fileData);return new xe(r.modType,n,i)}static mergeDataAndFileData(e,t){const n={...e};for(const r of Object.keys(t)){const i=t[r];if(i!=null){if(Array.isArray(i)){n[r]=i;continue}if(typeof i=="object"){n[r]=this.mergeDataAndFileData(e[r],i);continue}n[r]=i}}return n}}const dt={FetchMods:async function(a,e,t){if(e===null||t===null||ge[a]===void 0)return[];const n=[];for(const r of t.getModIds(a)){const i=await xe.loadFromStore(e,r,{getModDescriptor:()=>t});i!==null&&n.push(i)}return n},FetchModsResources:async function(a,e,t){const n=ge[a],r=[],i=await dt.FetchMods(a,e,t);for(const s of i){const o=s.getDataWithFileData({createImgBase64Url:!0});r.push(n.convertResourceFromData(o))}return r},FetchAllResourcesByType:async function(a,e,t){if(ae[a]===void 0)throw new Error("Invalid Resource Type '"+a+"'");let n=[];if(t!=null){for(const r of Object.values(ge))if(Dt[r.id]===a){n=n.concat(await this.FetchModsResources(r.id,e,t));break}}return it[a]!==void 0&&(n=n.concat(Object.values(it[a]))),n}},Ge="All";function Ki(a){const{appState:e,_:t}=ze(lt),n=ze(ot),[r,i]=ye(null),[s,o]=ye({}),c=a.data,h=a.gameResType,g=a.isValidResFn,p=u=>r==u?T("div",{className:"tab selected",children:T("b",{children:u})}):T("div",{className:"tab",onClick:()=>i(u),children:T("b",{children:u})});Et(()=>{(async()=>{const u=await dt.FetchAllResourcesByType(h,n,e.getActiveMod()),w={};w[Ge]=[];for(const f of u){if(g&&!g(f))continue;const k=(f.properties||{}).groupingKey;k&&(Array.isArray(w[k])||(w[k]=[]),w[k].push(f)),w[Ge].push(f)}o(w)})()},[h]);const _=u=>{c.onValueChanged(u),i(null)};let d=null,y=null;for(const u of Object.values(s)){for(const w of u)if(w.id===c.value){y=w;break}if(y!=null)break}if(r!==null){const u=[],w=[];w.push(p(Ge));for(const f of Object.keys(s))if(f!=Ge&&w.push(p(f)),f==r)for(const k of s[f]){const S=k.id,C=!!y&&y.id==S,E=(k.properties||{}).description||null;u.push(T("div",{onClick:()=>_(S),className:"option"+(C?" selected":""),children:[k.image!==Ee?T("img",{src:k.image}):null,T("div",{className:"name",children:k.name}),E?T("div",{className:"description",children:E}):null]}))}d=T(ct,{title:"Select "+h,onClose:()=>i(null),children:[w.length>1?T("div",{className:"tabs",children:w}):null,T("div",{className:"res_options",children:u})]})}return[T("div",{className:"res_editor",children:T("div",{className:"item"+(y?" selected":""),children:[y?T("div",{className:"content",children:[y.image!==Ee?T("img",{src:y.image}):null,T("div",{className:"name",children:y.name})]}):null,T("div",{className:"actions",children:[r?null:T("button",{onClick:()=>i(Ge),children:"Change"}),y?T("button",{onClick:()=>_(null),children:"Delete"}):null]})]})}),d]}function Li(a){const[e,t]=ye(a.data.value||[]),n=a.data,r=a.listParams,i=()=>{e.push(null),t(e),n.onValueChanged(e)},s=[];for(const c of Object.values(a.values))s.push(T("option",{value:c.value,children:c.name},c.value));let o=[];if(n.value!=null)for(const c in n.value){const h=c,g=n.value[h],p=d=>{if(d!==null){const y=Object.values(a.values)[0].value;Number.isInteger(y)&&(d=Number(d))}e[h]=d,t(e),n.onValueChanged(e)},_=()=>{e.splice(h,1),t(e),n.onValueChanged(e)};o.push(T("div",{className:"item",children:[T("select",{onChange:d=>p(d.target.value),value:g,children:s}),T("button",{onClick:_,children:"Delete"})]}))}return T("div",{className:"value_editor",children:[o,r.maxCount<=0||o.length<r.maxCount?T("div",{className:"add_action",children:T("button",{onClick:i,children:"Add"})}):null]})}const Be="All";function Gi(a){const{appState:e,_:t}=ze(lt),n=ze(ot),[r,i]=ye(null),[s,o]=ye({}),[c,h]=ye(a.data.value||[]),g=a.data,p=a.listParams,_=a.gameResType,d=a.isValidResFn,y=C=>{if(r.tab==C)return T("div",{className:"tab selected",children:T("b",{children:C})});const E={...r};return E.tab=C,T("div",{className:"tab",onClick:()=>i(E),children:T("b",{children:C})})};Et(()=>{(async()=>{const C=await dt.FetchAllResourcesByType(_,n,e.getActiveMod()),E={};E[Be]=[];for(const F of C){if(d&&!d(F))continue;const B=(F.properties||{}).groupingKey;B&&(Array.isArray(E[B])||(E[B]=[]),E[B].push(F)),E[Be].push(F)}o(E)})()},[_]);const u=(C,E)=>{c[C]=E,h(c),g.onValueChanged(c),i(null)},w=C=>{c.splice(C,1),h(c),g.onValueChanged(c)},f=()=>{c.push(null),h(c),g.onValueChanged(c),i({idx:c.length-1,tab:Be})};let k=null;if(r!==null){const C=[],E=[];let F=null;for(const B of Object.values(s)){for(const L of B)if(L.id===g.value){F=L;break}if(F!=null)break}E.push(y(Be));for(const B of Object.keys(s))if(B!=Be&&E.push(y(B)),B==r.tab)for(const L of s[B]){const N=L.id,j=!!F&&F.id==N,$=(L.properties||{}).description||null;C.push(T("div",{onClick:()=>u(r.idx,N),className:"option"+(j?" selected":""),children:[L.image!==Ee?T("img",{src:L.image}):null,T("div",{className:"name",children:L.name}),$?T("div",{className:"description",children:$}):null]}))}k=T(ct,{title:"Select "+_,onClose:()=>i(null),children:[E.length>1?T("div",{className:"tabs",children:E}):null,T("div",{className:"res_options",children:C})]})}let S=[];if(g.value!=null)for(const C in g.value){const E=C;let F=null;for(const L of Object.values(s)){for(const N of L)if(N.id===g.value[E]){F=N;break}if(F!=null)break}const B={idx:E,tab:Be};S.push(T("div",{className:"item",children:[F?T("div",{className:"content",children:[F.image!==Ee?T("img",{width:"100%",src:F.image}):null,T("div",{className:"name",children:F.name})]}):null,T("div",{className:"actions",children:[!r||r.idx<0?T("button",{onClick:()=>i(B),children:"Change"}):T("div",{}),T("div",{}),F?T("button",{onClick:()=>w(E),children:"Delete"}):null]})]}))}return[T("div",{className:"res_editor",children:[S,p.maxCount<=0||S.length<p.maxCount?T("div",{className:"add_action",children:T("button",{onClick:f,children:"Add"})}):null]}),k]}function Ui(a){const[e,t]=ye(-1),[n,r]=ye(a.data.value||[]),i=a.data,s=a.listParams,o=a.info,c=Tt(),h=y=>{t(y),c.current.click()},g=y=>{n.splice(y,1),t(-1),r(n),i.onValueChanged(n)},p=()=>{t(-1)},_=async()=>{const y=c.current.files[0],u=new FileReader;u.readAsDataURL(y),u.onload=function(w){var f=new Image;f.src=w.target.result,f.onload=function(){if(this.width!=o.width||this.height!=o.height)return alert("File dimensions do not match the requirements: "+this.width+"x"+this.height+" != "+o.width+"x"+o.height),t(-1),!1;let k=w.target.result;const S=k.indexOf(";base64,");return S>0&&(k=k.substring(S+8)),e>0&&e>=n.length?n.push(k):n[e]=k,t(-1),r(n),i.onValueChanged(n),!0}}};let d=[];if(i.value!=null)for(const y in i.value){const u=y,w=i.value[u];d.push(T("div",{className:"item",children:[T("div",{className:"actions",children:[e<0?T("button",{onClick:()=>h(u),children:"Change"}):null,T("div",{}),w?T("button",{onClick:()=>g(u),children:"Delete"}):null]}),w?T("img",{src:"data:image/"+o.ext+";base64,"+w}):null]}))}return T("div",{className:"image_editor",children:[T("div",{className:"items",children:[d,s.maxCount<=0||d.length<s.maxCount?T("div",{className:"add_action",children:T("button",{onClick:()=>h(n.length),children:"Add"})}):null]}),T("input",{type:"file",ref:c,style:{display:"none"},onChange:_,onCancel:p,accept:"."+o.ext})]})}function ji(a){const[e,t]=ye(-1),[n,r]=ye(a.data.value||[]),i=a.data,s=a.listParams,o=a.specs;let c=null,h=[];const g=()=>{n.push({}),r(n),t(n.length-1),i.onValueChanged(n)};if(i.value!=null){const p=_=>{n.splice(_,1),r(n),t(-1),i.onValueChanged(n)};for(const _ in i.value){const d=Number(_),y=i.value[d],u=o.summary(y);h.push(T("div",{className:"item value_"+d,children:[T("button",{onClick:()=>p(d),children:"Delete"}),T("button",{onClick:()=>t(d),children:"Edit"}),T("div",{class:"summary",children:u||"#"+d}),T("div",{})]}))}}if(e>=0){const p=i.property.label||o.title,_=i.property.description||o.description,d={specs:o,data:n[e],titleOverride:"",descriptionOverride:"",error:null,disableActions:!0,saveData:async y=>{n[e]=y,i.onValueChanged(n)},validateData:y=>{n[e]=y,i.onValueChanged(n)}};c=T(ct,{title:p,onClose:()=>t(-1),children:[T("div",{children:T("h3",{children:_})}),T(We,{data:d},"custom_spec")]})}return[T("div",{className:"custom_editor",children:T("div",{children:[T("div",{className:"items",children:h}),s.maxCount<=0||h.length<s.maxCount?T("button",{className:"add_action",onClick:g,children:"Add"}):null]})}),c]}const I={Int:{render:a=>T(Ni,{data:a}),toJson:a=>a,parseJson:a=>{if(Number.isInteger(a))return a;const e=Number.parseInt(a,10);if(!Number.isNaN(e))return e;throw new Error("Invalid Value: "+JSON.stringify(a))},validator:a=>{I.Int.parseJson(a)},validators:{gt:function(a,e=null){const t=e?e.allowEquals===!0:!1;return function(n){if(!(n>a)&&!(t&&n===a))throw t?new Error("Value should be greater or equal to "+a):new Error("Value should be greater than "+a)}},gte:a=>I.Int.validators.gt(a,{allowEquals:!0})}},Bool:{render:a=>T(Oi,{data:a}),toJson:a=>a,parseJson:a=>{if(Number.isInteger(a))return a===1;if(typeof a=="boolean")return a;if(a==="true"||a==="false")return a==="true";throw new Error("Invalid Value: "+JSON.stringify(a))},validator:a=>{I.Bool.parseJson(a)}},String:(a,e,t={})=>(t=t||{},{render:n=>T(Mi,{data:n,renderConfig:t}),toJson:n=>n,parseJson:n=>{if(typeof n=="string"){if(n=="")throw new Error("Empty Value");if(!a.test(n))throw new Error('Value does not match the requirements "'+e+`" : '`+n+"'");return n}if(typeof n!="object"&&!Array.isArray(n))return n.toString();throw new Error("Invalid Value: "+JSON.stringify(n))},validator:n=>{I.String(a,e).parseJson(n)}}),GUID:()=>I.String(/^[a-zA-Z]{3,}([_]*[\.]?[a-zA-Z\d]+)*$/,"GUID format: [a-Z]x3 + repeat ('_'/'.' + [a-Z0-9]+)"),Words:()=>I.String(/^[a-zA-Z_\-\d\s\(\)'"]+$/,"Alpha-Numerical with spaces and underscores"),Sentences:()=>I.String(/^[a-zA-Z\d_\s\.\-;,'"]+$/,"No special characters. Only alpha-num, space/underscore/dash/punctuation",{isText:!0}),Image:function(a){if(a={width:a&&a.width||0,height:a&&a.height||0,ext:a&&a.ext||"png"},a.width<=0||a.height<=0)throw new Error("Invalid Image info, expecting {width,height,ext} got "+JSON.stringify(a));return{isFile:!0,fileExt:a.ext,imgInfo:a,render:e=>T(Bi,{data:e,info:a}),toJson:(e,t)=>t+"."+a.ext,parseJson:e=>{if(e===null||typeof e!="string")throw new Error("Invalid value: "+JSON.stringify(e));if(e=="")throw new Error("Empty Value");return e},validator:e=>{I.Image(a).parseJson(e)}}},ImageList:function(a,e=null){const t=e&&e.minCount||0,n=e&&e.maxCount||-1;return e={minCount:t,maxCount:n},a={width:a&&a.width||0,height:a&&a.height||0,ext:a&&a.ext||"png"},{isList:!0,isFile:!0,fileExt:a.ext,imgInfo:a,render:r=>T(Ui,{data:r,info:a,listParams:e}),toJson:(r,i)=>{const s=I.Image(a),o=[];for(let c in r){const h=i+"_"+c,g=r[c];o.push(s.toJson(g,h))}return o},parseJson:r=>{if(r===null||!Array.isArray(r))throw new Error("Value should be a list: "+JSON.stringify(r));const i=I.Image(a);let s=[];for(let o of r){if(n>0&&s.length>=n)break;s.push(i.parseJson(o))}return s},validator:r=>{if(r===null)throw new Error("Values missing");if(I.ImageList(a,e).parseJson(r),t>0&&r.length<t)throw new Error("Not enough values, need "+t+" values");if(n>0&&r.length>n)throw new Error("Too many values, max "+n+" values")}}},GameValue:function(a){return{render:e=>T(Fi,{data:e,values:a}),toJson:e=>e,parseJson:e=>{const t=Re(a,e);if(t!==null)return t.value;throw new Error("Invalid Value: "+JSON.stringify(e))},validator:e=>{I.GameValue(a).parseJson(e)}}},GameRes:function(a,e,t=null){return e=e&&e.getModDescriptor?e:{getModDescriptor:()=>null},{isGameResource:!0,render:n=>T(Ki,{data:n,gameResType:a,isValidResFn:t}),toJson:n=>n,parseJson:n=>{const r=e.getModDescriptor();if(r!==null){const s=r.findModType(n);if(s!==null){if(Dt[s]===a)return n;throw new Error("Resource Id '"+n+"' belongs to another mod '"+s+"'")}}const i=Ri(a,n);if(i!==null){if(t&&!t(i))throw new Error("Resource Id '"+n+"' is not valid for this property");return i.id}throw new Error("Invalid Value: "+JSON.stringify(n))},validator:n=>{I.GameRes(a,e,t).parseJson(n)}}},OneOf:function(a){return{render:e=>T(zi,{data:e,values:a}),toJson:e=>e,parseJson:e=>{for(const t of a)if(t===e)return t;throw new Error("Invalid Value: "+JSON.stringify(e))},validator:e=>{I.OneOf(a).parseJson(e)}}},CustomSpec:function(a){return{isCustomSpec:!0,customSpec:a,render:e=>T(Pi,{data:e,specs:a}),toJson:e=>{const t={};for(let n of a.properties){const r=e[n.id];if(r===void 0){n.default!==void 0&&(t[n.id]=n.default);continue}t[n.id]=n.specs.toJson(r,n.id)}return t},parseJson:e=>{if(e===null||typeof e!="object")throw new Error("Value should be an object: "+JSON.stringify(e));let t={};for(let n of a.properties){let r;if(e[n.id]===void 0||e[n.id]===null)if(n.default!==void 0)r=n.default;else{if(n.optional!==!0)throw new Error("Missing property '"+n.id+"'");continue}else r=n.specs.parseJson(e[n.id]),n.validator!==void 0&&n.validator(r);t[n.id]=r}return a.validator!==void 0&&a.validator(t),t},validator:e=>{I.CustomSpec(a).parseJson(e)}}},GameValueList:function(a,e=null){const t=e&&e.minCount||0,n=e&&e.maxCount||-1,r=e?!!e.allowDuplicates:!1;return e={minCount:t,maxCount:n,allowDuplicates:r},{isList:!0,render:i=>T(Li,{data:i,values:a,listParams:e}),toJson:i=>{const s=I.GameValue(a),o=[];for(let c of i)o.push(s.toJson(c));return o},parseJson:i=>{if(i===null||!Array.isArray(i))throw new Error("Value should be a list: "+JSON.stringify(i));let s=[];for(let o of i){if(n>0&&s.length>=n)break;const c=Re(a,o);if(c!==null){(r||!s.includes(c.value))&&s.push(c.value);continue}throw new Error("Invalid Value: "+JSON.stringify(o))}return s},validator:i=>{if(i===null)throw new Error("Values missing");const s=I.GameValueList(a,e).parseJson(i);if(t>0&&i.length<t)throw new Error("Not enough values, need "+t+" values");if(n>0&&i.length>n)throw new Error("Too many values, max "+n+" values");if(!r&&s.length!==i.length)throw new Error("Duplicate values found")}}},GameResList:function(a,e,t=null,n=null){const r=t&&t.minCount||0,i=t&&t.maxCount||-1,s=t?!!t.allowDuplicates:!1;return t={minCount:r,maxCount:i,allowDuplicates:s},{isList:!0,isGameResource:!0,render:o=>T(Gi,{data:o,gameResType:a,listParams:t,isValidResFn:n}),toJson:o=>{const c=I.GameRes(a,e,n),h=[];for(let g of o)h.push(c.toJson(g));return h},parseJson:o=>{if(!Array.isArray(o))throw new Error("Value should be a list: "+JSON.stringify(o));const c=I.GameRes(a,e,n);let h=[];for(let g of o){if(i>0&&h.length>=i)break;const p=c.parseJson(g);if(p!==null){(s||!h.includes(p))&&h.push(p);continue}throw new Error("Invalid Value: "+JSON.stringify(g))}return h},validator:o=>{if(o===null)throw new Error("Values missing");const c=I.GameResList(a,e,t,n).parseJson(o);if(r>0&&c.length<r)throw new Error("Not enough values, need "+r+" values");if(i>0&&c.length>i)throw new Error("Too many values, max "+i+" values");if(!s&&c.length!==o.length)throw new Error("Duplicate values found")}}},CustomSpecList:function(a,e={}){const t=e&&e.minCount||0,n=e&&e.maxCount||-1;return e={minCount:t,maxCount:n},{isList:!0,isCustomSpec:!0,customSpec:a,render:r=>T(ji,{data:r,specs:a,listParams:e}),toJson:r=>{const i=I.CustomSpec(a),s=[];for(let o of r)s.push(i.toJson(o));return s},parseJson:r=>{if(!Array.isArray(r))throw new Error("Value should be a list: "+r);const i=I.CustomSpec(a);let s=[];for(let o of r){if(n>0&&s.length>=n)break;const c=i.parseJson(o);s.push(c)}return s},validator:r=>{if(r===null)throw new Error("Values missing");const i=I.CustomSpecList(a,e).parseJson(r);if(t>0&&i.length<t)throw new Error("Not enough values, need "+t+" values");if(n>0&&i.length>n)throw new Error("Too many values, max "+n+" values")}}}},Wi="CharacterLevelSpec",Hi=a=>({id:Wi,title:"Character Level Information",description:"Rewards and XP thresholds for levelling",summary:e=>(e=e||{},""+e.requiredXp+" XP --> "+(e.rewardsLevelUp?e.rewardsLevelUp:"No rewards")),properties:[{id:"requiredXp",label:"Required XP",description:"At which XP this level up will be given.",specs:I.Int,default:0,validator:I.Int.validators.gte(0)},{id:"rewardsLevelUp",label:"Level-Up Rewards",description:"ID of the rewards information to be given when leveling up. Don't specify if you don't want to give a reward at that level.",optional:!0,specs:I.GameRes(ae.Rewards,a)}]}),Vi="ManaSpec",Zi=a=>({id:Vi,title:"Mana",summary:e=>(e=e||{},""+(e.color?Re(oe.ManaColor,e.color).name:"Missing Color")+" "+(Number.isInteger(e.form)?Re(oe.ManaForm,e.form).name:"Missing Form")),properties:[{id:"color",label:"Color",specs:I.GameValue(oe.ManaColor)},{id:"form",label:"Form",specs:I.GameValue(oe.ManaForm),default:oe.ManaForm.Crystal.value}]}),Ji="CrusadeRoundBoonsSpec",li=a=>({id:Ji,title:"Crusade Round Boons",description:"Boons that the character will receive every round",summary:e=>null,properties:[{id:"mana",label:"Mana",description:"List of mana that the character will receive every round.",optional:!0,specs:I.CustomSpecList(Zi(),{allowDuplicates:!0})},{id:"reputationBonus",label:"Reputation Bonus",description:"Can be negative. Increase/Reduce character reputation every round.",optional:!0,specs:I.Int,default:0},{id:"movementPoints",label:"Movement Points",description:"Gain movement points every round.",optional:!0,specs:I.Int,default:0,validator:I.Int.validators.gte(0)},{id:"healingPoints",label:"Healing Points",description:"Gain healing points every round.",optional:!0,specs:I.Int,default:0,validator:I.Int.validators.gte(0)},{id:"leadershipPoints",label:"Leadership Points",description:"Gain leadership points every round.",optional:!0,specs:I.Int,default:0,validator:I.Int.validators.gte(0)}]}),qi="CrusadeStartingBoonsSpec",wt=a=>({id:qi,title:"Crusade Starting Boons",description:"Boons that the character will start the crusade with",summary:e=>null,properties:[{id:"cards",label:"Cards",description:"List of cards the character will start with.",specs:I.GameResList(ae.Card,a,{allowDuplicates:!0}),optional:!0,default:[]},{id:"followers",label:"Followers",description:"List of followers the character will start with.",specs:I.GameResList(ae.Follower,a,{allowDuplicates:!0}),optional:!0,default:[]},{id:"blessings",label:"Blessings",description:"List of blessings the character will start with.",specs:I.GameResList(ae.Blessing,a,{allowDuplicates:!0}),optional:!0,default:[]},{id:"crystalsInInventory",label:"Crystals in Inventory",description:"List of mana crystals the character will start with.",specs:I.GameValueList(oe.ManaColor,{allowDuplicates:!0}),optional:!0,default:[]},{id:"armorBonus",label:"Armor Bonus",description:"Can be negative. Increase/Reduce character armor.",specs:I.Int,optional:!0,default:0},{id:"handSizeBonus",label:"Hand Size Bonus",description:"Can be negative. Increase/Reduce character hand size.",specs:I.Int,optional:!0,default:0},{id:"reputationBonus",label:"Reputation Bonus",description:"Can be negative. Increase/Reduce character reputation.",specs:I.Int,optional:!0,default:0},{id:"followerSlotsBonus",label:"Follower Slots Bonus",description:"Increase starting number of unit slots (will add the 'units' to it too)",specs:I.Int,optional:!0,default:0,validator:I.Int.validators.gte(0)}]}),Xi="CharacterModSpec",$i=a=>({id:Xi,title:"Character Information",summary:e=>(e=e||{},""+e.name),properties:[{id:"guid",label:"GUID",description:"guid, unique only within the mod. Will be turned into guid 'mod:'+$yourModId+':'+$guid",specs:I.GUID()},{id:"name",label:"Name",description:"Character name (not localized)",specs:I.Words()},{id:"description",label:"Description",description:"Backstory of the paladin.",specs:I.Sentences()},{id:"playstyleInfo",label:"PlaystyleInfo",description:"flavor text describing what is good/bad at.",specs:I.Sentences()},{id:"portraitSprite",label:"Portrait Sprite",description:"name of local file (local to the mod character folder). PNG, 256x256.",specs:I.Image({width:256,height:256}),links:[{label:"Sample",url:"samples/character/portraitSprite.png"}]},{id:"medallionSprite",label:"Medallion Sprite",description:"name of local file (local to the mod character folder). PNG, 192x192.",specs:I.Image({width:192,height:192}),links:[{label:"Sample",url:"samples/character/medallionSprite.png"},{label:"Medallion Background",url:"samples/medallionSprite_base.png"},{label:"Medallion Ring Mask",url:"samples/medallionSprite_ring_mask.png"}]},{id:"figurineSprite",label:"Figurine Sprite",description:"string. name of local file (local to the mod character  folder). PNG, 512x768, Outline (10,243;0,0,0).",specs:I.Image({width:512,height:768}),links:[{label:"Sample",url:"samples/character/figurineSprite.png"},{label:"Figurine Base",url:"samples/figurineSprite_base.png"}]},{id:"fullbodySprite",label:"Fullbody Sprite",description:"name of local file (local to the mod character  folder). PNG, 1024x1024, Outline (10,243;0,0,0).",specs:I.Image({width:1024,height:1024}),links:[{label:"Sample",url:"samples/character/fullbodySprite.png"}]},{id:"tileDefaultSprite",label:"Tile Sprite (default)",description:"name of local file (local to the mod character  folder). PNG, 256x384, Outline (10,243;0,0,0).",specs:I.Image({width:256,height:384}),links:[{label:"Sample",url:"samples/character/tileDefaultSprite.png"}]},{id:"tileOccupiedSprite",label:"Tile Sprite (occupied)",description:"When player figurine is sharing tile with locations. Name of local file (local to the mod character  folder). PNG, 256x384, Outline (10,243;0,0,0).",specs:I.Image({width:256,height:384}),links:[{label:"Sample",url:"samples/character/tileOccupiedSprite.png"}]},{id:"ownershipTokenMapPropSprite",label:"Ownership Map Token Sprite",description:"Shown when conquering locations. Name of local file (local to the mod character  folder). PNG, 256x384, Outline (10,243;0,0,0).",specs:I.Image({width:256,height:256}),links:[{label:"Sample",url:"samples/character/ownershipTokenMapPropSprite.png"}]},{id:"levels",label:"Levels",description:"Describes XP requirements and rewards for each level.",specs:I.CustomSpecList(Hi(a)),validator:e=>{if(e.length==0)throw new Error("Missing level information");if(e[0].requiredXp!=0)throw new Error("First level should require no XP");let t=e[0].requiredXp;for(let n=1;n<e.length;n++){const r=e[n].requiredXp;if(r<=t)throw new Error("Each level should require more XP than the previous one");t=r}}},{id:"inaneBlessings",label:"Inate Blessings",description:"List of blessings the character is born with. Will be added to the list of available blessings.",specs:I.GameResList(ae.Blessing,a,{minCount:1,allowDuplicates:!0})},{id:"inaneCards",label:"Inate Cards",description:"List of cards the character is born with, will be added to the deck.",specs:I.GameResList(ae.Card,a,{minCount:5,allowDuplicates:!0})},{id:"uniqueInaneCardsInfo",label:"Unique Cards Information",description:"Display purpose only, shows which cards are unique to this character (compared to other characters). Those cards should appear in the list of Inate Cards too.",specs:I.GameResList(ae.Card,a),optional:!0,renderConfig:{renderConditions:[["disableIf",e=>!0]]}},{id:"personalOaths",label:"Personal Oaths",description:"List of Oaths that are unique to this character (Oaths that are marked as 'character specific').",specs:I.GameResList(ae.Oath,a,{allowDuplicates:!1},e=>!!(e.properties||{}).isCharacterSpecific),optional:!0},{id:"defaultAllowedAmbientDie",label:"Default Allowed Ambient Die",description:"How many Ambient mana can the character use.",specs:I.Int,optional:!0,default:1,validator:I.Int.validators.gt(0)},{id:"numPointsRequiredPerWound",label:"Num Points Required per Wound",description:"How many Healing points are required to heal 1 wound on this character.",specs:I.Int,optional:!0,default:1,validator:I.Int.validators.gt(0)},{id:"defaultExplorationDistance",label:"Default Exploration Distance",description:"How many hexes away from exploration spot can the character explore.",specs:I.Int,optional:!0,default:1,validator:I.Int.validators.gt(0)},{id:"defaultExplorationMovementCost",label:"Default Exploration Movement Cost",description:"How many movement points does it cost to explore (by default).",specs:I.Int,optional:!0,default:2,validator:I.Int.validators.gte(0)},{id:"starterArmor",label:"Starter Armor",description:"How much armor does the character start with.",specs:I.Int,optional:!0,default:2,validator:I.Int.validators.gt(0)},{id:"starterHandSize",label:"Starter Hand Size",description:"How many cards can the character hold in hand by default.",specs:I.Int,optional:!0,default:5,validator:I.Int.validators.gt(0)},{id:"starterFollowerSlotCount",label:"Starter Follower Slot Count",description:"How many followers can the character manage from the start.",specs:I.Int,optional:!0,default:1,validator:I.Int.validators.gte(0)},{id:"starterReputation",label:"Starter Reputation",description:"[-7,+7]. Starting character reputation (0=neutral).",specs:I.Int,optional:!0,default:0,validator:e=>{if(e<-7||e>7)throw new Error("Invalid reputation value [-7,7]: "+e)}},{id:"dummyPlayerStartingBoons",label:"Dummy Player Starting Boons",description:"Boons the dummy player starts with (typically should be N=3 crystals)",specs:I.CustomSpec(wt(a))},{id:"startingBoons",label:"Player Starting Boons",description:"Additional boons the character starts with (ex: crystals, followers, blessings ...)",specs:I.CustomSpec(wt(a)),optional:!0},{id:"roundBoons",label:"Player Round Boons",description:"Boons the character receives every round  (ex: crystals, followers, blessings, reputation, movement)",specs:I.CustomSpec(li()),optional:!0}]}),Yi="EnemyElusiveSpec",Qi=a=>({id:Yi,title:"Elusive Information",summary:e=>(e=e||{},"Armor "+e.armorIfBlocked),properties:[{id:"armorIfBlocked",label:"Armor if Blocked",description:"Enemy armor will be set to this after the enemy is blocked",specs:I.Int,validator:I.Int.validators.gt(0)}]}),ea="EnemyAttackSpec",ta=a=>({id:ea,title:"Enemy Attack",summary:e=>(e=e||{},""+(e.element?Re(oe.Element,e.element).name:"Missing Element")+" "+e.value+" "+(e.attackModifiers?"("+e.attackModifiers.map(t=>Re(oe.AttackModifier,t).name).join(",")+")":"")),properties:[{id:"element",label:"Attack Element",specs:I.GameValue(oe.Element),default:oe.Element.element_physical.value},{id:"attackType",label:"Attack Type",specs:I.GameValue(oe.AttackType),default:oe.AttackType.Basic.value,optional:!0,renderConfig:{renderConditions:[["disableIf",e=>!0]]}},{id:"value",label:"Attack Value",specs:I.Int,validator:I.Int.validators.gt(0)},{id:"attackModifiers",label:"Attack Modifiers",specs:I.GameValueList(oe.AttackModifier),validator:e=>{const t=I.Int.validators.gt(0);for(const n of e)t(n)},optional:!0}]}),ia="EnemyTileSpec",aa=a=>({id:ia,title:"Enemy Tile",description:"Controls how the enemy is displayed on the map",summary:e=>null,properties:[{id:"tileNormalSprite",label:"Tile Sprite (normal)",description:"local file path in mod enemy folder. PNG, 256x384, Outline (10px; 0,0,0), Using the map token base.",specs:I.Image({width:256,height:384}),links:[{label:"Sample",url:"samples/enemy/tileNormalSprite.png"},{label:"Figurine Base",url:"samples/figurineSprite_base.png"}]},{id:"tileOutlinedSprite",label:"Tile Sprite (outlined)",description:"local file path in mod enemy folder. PNG, 256x384, Outline (5px; 0,255,33), outlined version of Normal.",specs:I.Image({width:256,height:384}),links:[{label:"Sample",url:"samples/enemy/tileOutlinedSprite.png"}]}]}),na="EnemyModSpec",ra=a=>({id:na,title:"Enemy Information",summary:e=>(e=e||{},""+e.name),properties:[{id:"guid",label:"GUID",description:"guid, unique only within the mod. Will be turned into guid 'mod:'+$yourModId+':'+$guid",specs:I.GUID()},{id:"name",label:"Name",description:"Enemy name (not localized)",specs:I.Words()},{id:"numInstancesInDeck",label:"Num Instances in Deck",description:"If > 0, the enemy will be added to draw piles.",specs:I.Int,validator:I.Int.validators.gte(0),default:1,optional:!0},{id:"enemyType",label:"Enemy Type",specs:I.GameValue(oe.EnemyType)},{id:"armor",label:"Armor",specs:I.Int,validator:I.Int.validators.gt(0),optional:!0,default:1},{id:"isElusive",label:"Is Elusive",specs:I.Bool,optional:!0,default:!1},{id:"elusiveData",label:"Elusive Data",specs:I.CustomSpec(Qi()),optional:!0,renderConfig:{renderConditions:[["disableIf",e=>!e||e.isElusive===null||e.isElusive===void 0||e.isElusive===!1]]}},{id:"fortification",label:"Fortification",specs:I.GameValue(oe.Fortification),optional:!0,default:oe.Fortification.NotFortified.value},{id:"xpGain",label:"XP Gain",description:"How much XP gained when defeating the enemy in battle.",specs:I.Int,validator:I.Int.validators.gte(0),optional:!0,default:0},{id:"reputationGain",label:"Reputation Gain",description:"How much reputation gained when defeating the enemy in battle.",specs:I.Int,validator:I.Int.validators.gte(0),optional:!0,default:0},{id:"reputationGainBonusWhenRampaging",label:"Reputation Gain Bonus when Rampaging",description:"How much additional reputation gained when defeating the enemy in battle when it is rampaging.",specs:I.Int,validator:I.Int.validators.gte(0),optional:!0,default:1},{id:"challengeRating",label:"Challenge Rating",description:"How difficult is the enemy. Used for balancing when drawing randomly and for generating Battle Tale. Check the Wiki for example ratings.",specs:I.OneOf([1,2,3,4,5,6,7,8,9,10]),optional:!0,default:1},{id:"attacks",label:"Attacks",description:"Can be empty if 'summoningAttacks' as at least one value.",specs:I.CustomSpecList(ta(),{minCount:1}),optional:!0},{id:"summoningAttacks",label:"Summoning Attacks",description:"Type of enemy summoned by this attack. Can be empty if 'attacks' has at least one value.",specs:I.GameValueList(oe.EnemyType,{allowDuplicates:!0}),optional:!0},{id:"immunities",label:"Immunities",description:"List of immunity values.",specs:I.GameValueList(oe.Immunity),optional:!0},{id:"resistances",label:"Resistances",description:"List of elements the enemy is resistant to.",specs:I.GameValueList(oe.Element),optional:!0},{id:"portraitSprite",label:"Portrait Sprite",description:"name of local file (local to the mod enemy folder). PNG, 256x256. Shown in battle and location enemy lists.",specs:I.Image({width:256,height:256}),links:[{label:"Sample",url:"samples/enemy/portraitSprite.png"}]},{id:"fullBodySprite",label:"Full Body Sprite",description:"name of local file (local to the mod enemy folder). PNG, 512x512, Outline (10px; 0,0,0). Shown in battle.",specs:I.Image({width:512,height:512}),links:[{label:"Sample",url:"samples/enemy/fullBodySprite.png"}]},{id:"fullBodyOutlineSprite",label:"Full Body Outline Sprite",description:"name of local file (local to the mod enemy folder). PNG, White, 512x512. Shown in battle.",specs:I.Image({width:512,height:512}),links:[{label:"Sample",url:"samples/enemy/fullBodyOutlineSprite.png"}]},{id:"tileData",label:"Tile Data",description:"Info to represent the enemy on the map.",specs:I.CustomSpec(aa())}],validator:e=>{if(e.isElusive&&!e.elusiveData)throw new Error("Elusive data should be provided");if((e.attacks||[]).length===0&&(e.summoningAttacks||[]).length===0)throw new Error("Missing attack or summoning attack data");if((e.attacks||[]).length!==0&&(e.summoningAttacks||[]).length!==0)throw new Error("Choose attack OR summoning attack, not both")}}),oa="MapHexSpec",sa=a=>({id:oa,title:"Map Hex",summary:e=>(e=e||{},""+(e.terrain?e.terrain:"No Terrain")+(e.location?" "+e.location:"")+(e.rampagingEnemyType?" "+Re(oe.EnemyType,e.rampagingEnemyType).name:"")+(e.rampagingEnemy?" "+e.rampagingEnemy:"")),properties:[{id:"terrain",label:"Terrain",specs:I.GameRes(ae.Terrain,a),default:it.Terrain.terrain__plains.id},{id:"location",label:"Location",optional:!0,specs:I.GameRes(ae.Location,a)},{id:"rampagingEnemyType",label:"Rampaging Enemy Type",description:'Enemy will be drawn from the list of enemies of this type. Either specify this or "Rampaging Enemy" but not both',optional:!0,specs:I.GameValue(oe.EnemyType),renderConfig:{renderConditions:[["disableIf",e=>!!e&&!!e.rampagingEnemy]]}},{id:"rampagingEnemy",label:"Rampaging Enemy",description:'Enemy showing up on this hex. Either specify this or "Rampaging Enemy Type" but not both',optional:!0,specs:I.GameRes(ae.Enemy,a),renderConfig:{renderConditions:[["disableIf",e=>!!e&&!!e.rampagingEnemyType]]}}],validator:e=>{if(e.rampagingEnemy&&e.rampagingEnemyType)throw new Error("Use 'Rampaging Enemy' or 'Rampaging Enemy Type', but not both.")}}),ht=7,la="MapSectionModSpec",ca=a=>({id:la,title:"Map Section",description:"Collection of "+ht+" hexes",summary:e=>(e=e||{},e.guid),properties:[{id:"guid",label:"GUID",description:"guid, unique only within the mod. Will be turned into GUID 'mod:'+$yourModId+':'+$guid",specs:I.GUID()},{id:"numInstancesInDeck",label:"Num Instances in Deck. Set 0 to disable drawing this tile (typically for scripted mods.",specs:I.Int,default:1,validator:I.Int.validators.gt(-1)},{id:"hexes",label:"Hexes",specs:I.CustomSpecList(sa(a),{minCount:ht,maxCount:ht}),illustration:"samples/map/hexes.jpg"}]}),da="OathModSpec",pa=a=>({id:da,title:"Oath Information",summary:e=>(e=e||{},e.name),properties:[{id:"guid",label:"GUID",description:"guid, unique only within the mod. Will be turned into guid 'mod:'+$yourModId+':'+$guid",specs:I.GUID()},{id:"name",label:"Name",description:"name displayed to the players",specs:I.Words()},{id:"description",label:"Description",description:"Flavor text describing the oath (stick to 2-3 lines max).",specs:I.Sentences()},{id:"startingBoons",label:"Starting Boons",description:"What the player starts with.",specs:I.CustomSpec(wt(a)),optional:!0},{id:"roundBoons",label:"Round Boons",description:"What the player gets every round.",specs:I.CustomSpec(li()),optional:!0},{id:"isCharacterSpecific",label:"Is Character Specific",description:"Set to true if the oath can only be used by a specific character (that character data should include it).",specs:I.Bool,optional:!0,default:!1}]}),ua="RewardModSpec",ha=a=>({id:ua,title:"Reward Information",summary:e=>(e=e||{},e.name),properties:[{id:"guid",label:"GUID",description:'Unique within the mod, will be turned into "mod:$modId:$GUID"',specs:I.GUID()},{id:"name",label:"Name",description:"Reward name (not localized) to be displayed when the rewards are distributed.",specs:I.Words()},{id:"comboType",label:"Combo Type",description:"Determines how the reward options are given to the player.",specs:I.GameValue(oe.RewardComboType),default:oe.RewardComboType.combo_and.value},{id:"rewardOptions",label:"Reward Options",description:"List of rewards to give to the player. Cannot be empty.",specs:I.GameValueList(oe.Reward,{minCount:1,allowDuplicates:!0})}]}),ma="TerrainMovementCostSpec",_a=a=>({id:ma,title:"Terrain Movement Cost",summary:e=>(e=e||{},(e.timeOfDay?Re(oe.TimeOfDay,e.timeOfDay).name:" Missing TimeOfDay")+" "+(e.allowMovement?e.cost:"X")),properties:[{id:"timeOfDay",label:"Time of Day",description:"Time of Day the cost applies to",specs:I.GameValue(oe.TimeOfDay),default:oe.TimeOfDay.timeofday_day.value},{id:"allowMovement",label:"Allow Movement",description:"Set to false to permanently disable movement onto this terrain type (ex: mountain)",specs:I.Bool,optional:!0,default:!0},{id:"cost",label:"Movement Cost",description:"Movement Cost to enter this terrain. Ignored when 'allowMovement' is false.",specs:I.Int,default:0,validator:I.Int.validators.gte(0),renderConfig:{renderConditions:[["disableIf",e=>!e||e.allowMovement!==!0]]}}]}),fa="TerrainModSpec",ga=a=>({id:fa,title:"Terrain Information",summary:e=>(e=e||{},e.name),properties:[{id:"guid",label:"GUID",description:"guid, unique only within the mod. Will be turned into GUID 'mod:'+$yourModId+':'+$guid",specs:I.GUID()},{id:"name",label:"Name",description:"Name for the terrain, will be shown to the user (non localized)",specs:I.Words()},{id:"tileSprites",label:"Tile Sprites",description:"List of image file names (PNG 512x768), local to the mod folder. One file per tile variation. Need at least one.",specs:I.ImageList({width:512,height:768},{minCount:1}),links:[{label:"Sample",url:"samples/map/tile_template/tile_sample.png"},{label:"Base",url:"samples/map/tile_template/tile_template_base.png"},{label:"Border Mask",url:"samples/map/tile_template/tile_template_border.png"},{label:"PaintDotNet Sample",url:"samples/map/tile_template/tile_template.pdn"},{label:"PaintDotNet Download",url:"https://www.getpaint.net/"}]},{id:"movementCost",label:"Movement Cost (Day | Night)",specs:I.CustomSpecList(_a(),{minCount:2,maxCount:2}),validator:e=>{const t=e[0].timeOfDay===oe.TimeOfDay.timeofday_day.value||e[1].timeOfDay===oe.TimeOfDay.timeofday_day.value,n=e[0].timeOfDay===oe.TimeOfDay.timeofday_night.value||e[1].timeOfDay===oe.TimeOfDay.timeofday_night.value;if(!(t&&n))throw new Error("Invalid TimeOfDay for Movement Cost. Need 1 day and 1 night.")}}]}),Ne="Mod",ge={rewardsMods:{id:"rewardsMods",label:"Rewards",specs:a=>ha(),convertResourceFromData:a=>{const e={...a};return e.groupingKey=Ne,{id:a.guid,name:a.name,image:Ee,properties:e}}},oathMods:{id:"oathMods",label:"Oath",specs:a=>pa(a),convertResourceFromData:a=>{const e={...a};return e.groupingKey=Ne,{id:a.guid,name:a.name,image:Ee,properties:e}}},characterMods:{id:"characterMods",label:"Character",specs:a=>$i(a),convertResourceFromData:a=>{const e={...a};return e.groupingKey=Ne,{id:a.guid,name:a.name,image:a.portraitSprite,properties:e}}},enemyMods:{id:"enemyMods",label:"Enemy",specs:a=>ra(),convertResourceFromData:a=>{const e={...a};return e.groupingKey=Ne,{id:a.guid,name:a.name,image:a.portraitSprite,properties:e}}},terrainMods:{id:"terrainMods",label:"Terrain",specs:a=>ga(),convertResourceFromData:a=>{const e={...a};return e.groupingKey=Ne,{id:a.guid,name:a.name,image:a.tileSprites[0],properties:e}}},mapSectionMods:{id:"mapSectionMods",label:"Map Section",specs:a=>ca(a),convertResourceFromData:a=>{const e={...a};return e.groupingKey=Ne,{id:a.guid,name:a.guid,image:Ee,properties:e}}}},ya=[ge.rewardsMods.id,ge.oathMods.id,ge.characterMods.id,ge.enemyMods.id,ge.terrainMods.id,ge.mapSectionMods.id];function Xe(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ci={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(a,e){(function(t){a.exports=t()})(function(){return function t(n,r,i){function s(h,g){if(!r[h]){if(!n[h]){var p=typeof Xe=="function"&&Xe;if(!g&&p)return p(h,!0);if(o)return o(h,!0);var _=new Error("Cannot find module '"+h+"'");throw _.code="MODULE_NOT_FOUND",_}var d=r[h]={exports:{}};n[h][0].call(d.exports,function(y){var u=n[h][1][y];return s(u||y)},d,d.exports,t,n,r,i)}return r[h].exports}for(var o=typeof Xe=="function"&&Xe,c=0;c<i.length;c++)s(i[c]);return s}({1:[function(t,n,r){var i=t("./utils"),s=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(c){for(var h,g,p,_,d,y,u,w=[],f=0,k=c.length,S=k,C=i.getTypeOf(c)!=="string";f<c.length;)S=k-f,p=C?(h=c[f++],g=f<k?c[f++]:0,f<k?c[f++]:0):(h=c.charCodeAt(f++),g=f<k?c.charCodeAt(f++):0,f<k?c.charCodeAt(f++):0),_=h>>2,d=(3&h)<<4|g>>4,y=1<S?(15&g)<<2|p>>6:64,u=2<S?63&p:64,w.push(o.charAt(_)+o.charAt(d)+o.charAt(y)+o.charAt(u));return w.join("")},r.decode=function(c){var h,g,p,_,d,y,u=0,w=0,f="data:";if(c.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var k,S=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&S--,c.charAt(c.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=s.uint8array?new Uint8Array(0|S):new Array(0|S);u<c.length;)h=o.indexOf(c.charAt(u++))<<2|(_=o.indexOf(c.charAt(u++)))>>4,g=(15&_)<<4|(d=o.indexOf(c.charAt(u++)))>>2,p=(3&d)<<6|(y=o.indexOf(c.charAt(u++))),k[w++]=h,d!==64&&(k[w++]=g),y!==64&&(k[w++]=p);return k}},{"./support":30,"./utils":32}],2:[function(t,n,r){var i=t("./external"),s=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function h(g,p,_,d,y){this.compressedSize=g,this.uncompressedSize=p,this.crc32=_,this.compression=d,this.compressedContent=y}h.prototype={getContentWorker:function(){var g=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),p=this;return g.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),g},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(g,p,_){return g.pipe(new o).pipe(new c("uncompressedSize")).pipe(p.compressWorker(_)).pipe(new c("compressedSize")).withStreamInfo("compression",p)},n.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,r){var i=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,r){var i=t("./utils"),s=function(){for(var o,c=[],h=0;h<256;h++){o=h;for(var g=0;g<8;g++)o=1&o?3988292384^o>>>1:o>>>1;c[h]=o}return c}();n.exports=function(o,c){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(h,g,p,_){var d=s,y=_+p;h^=-1;for(var u=_;u<y;u++)h=h>>>8^d[255&(h^g[u])];return-1^h}(0|c,o,o.length,0):function(h,g,p,_){var d=s,y=_+p;h^=-1;for(var u=_;u<y;u++)h=h>>>8^d[255&(h^g.charCodeAt(u))];return-1^h}(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(t,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,n,r){var i=null;i=typeof Promise<"u"?Promise:t("lie"),n.exports={Promise:i}},{lie:37}],7:[function(t,n,r){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),o=t("./utils"),c=t("./stream/GenericWorker"),h=i?"uint8array":"array";function g(p,_){c.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=_,this.meta={}}r.magic="\b\0",o.inherits(g,c),g.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(h,p.data),!1)},g.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},g.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},g.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(_){p.push({data:_,meta:p.meta})}},r.compressWorker=function(p){return new g("Deflate",p)},r.uncompressWorker=function(){return new g("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,r){function i(d,y){var u,w="";for(u=0;u<y;u++)w+=String.fromCharCode(255&d),d>>>=8;return w}function s(d,y,u,w,f,k){var S,C,E=d.file,F=d.compression,B=k!==h.utf8encode,L=o.transformTo("string",k(E.name)),N=o.transformTo("string",h.utf8encode(E.name)),j=E.comment,$=o.transformTo("string",k(j)),A=o.transformTo("string",h.utf8encode(j)),z=N.length!==E.name.length,m=A.length!==j.length,K="",te="",W="",ie=E.dir,H=E.date,ee={crc32:0,compressedSize:0,uncompressedSize:0};y&&!u||(ee.crc32=d.crc32,ee.compressedSize=d.compressedSize,ee.uncompressedSize=d.uncompressedSize);var M=0;y&&(M|=8),B||!z&&!m||(M|=2048);var R=0,Q=0;ie&&(R|=16),f==="UNIX"?(Q=798,R|=function(J,pe){var fe=J;return J||(fe=pe?16893:33204),(65535&fe)<<16}(E.unixPermissions,ie)):(Q=20,R|=function(J){return 63&(J||0)}(E.dosPermissions)),S=H.getUTCHours(),S<<=6,S|=H.getUTCMinutes(),S<<=5,S|=H.getUTCSeconds()/2,C=H.getUTCFullYear()-1980,C<<=4,C|=H.getUTCMonth()+1,C<<=5,C|=H.getUTCDate(),z&&(te=i(1,1)+i(g(L),4)+N,K+="up"+i(te.length,2)+te),m&&(W=i(1,1)+i(g($),4)+A,K+="uc"+i(W.length,2)+W);var q="";return q+=`
\0`,q+=i(M,2),q+=F.magic,q+=i(S,2),q+=i(C,2),q+=i(ee.crc32,4),q+=i(ee.compressedSize,4),q+=i(ee.uncompressedSize,4),q+=i(L.length,2),q+=i(K.length,2),{fileRecord:p.LOCAL_FILE_HEADER+q+L+K,dirRecord:p.CENTRAL_FILE_HEADER+i(Q,2)+q+i($.length,2)+"\0\0\0\0"+i(R,4)+i(w,4)+L+K+$}}var o=t("../utils"),c=t("../stream/GenericWorker"),h=t("../utf8"),g=t("../crc32"),p=t("../signature");function _(d,y,u,w){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=u,this.encodeFileName=w,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(_,c),_.prototype.push=function(d){var y=d.meta.percent||0,u=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,c.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:u?(y+100*(u-w-1))/u:100}}))},_.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var y=this.streamFiles&&!d.file.dir;if(y){var u=s(d,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:u.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(d){this.accumulate=!1;var y=this.streamFiles&&!d.file.dir,u=s(d,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(u.dirRecord),y)this.push({data:function(w){return p.DATA_DESCRIPTOR+i(w.crc32,4)+i(w.compressedSize,4)+i(w.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:u.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var d=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var u=this.bytesWritten-d,w=function(f,k,S,C,E){var F=o.transformTo("string",E(C));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(f,2)+i(f,2)+i(k,4)+i(S,4)+i(F.length,2)+F}(this.dirRecords.length,u,d,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(d){this._sources.push(d);var y=this;return d.on("data",function(u){y.processChunk(u)}),d.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),d.on("error",function(u){y.error(u)}),this},_.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(d){var y=this._sources;if(!c.prototype.error.call(this,d))return!1;for(var u=0;u<y.length;u++)try{y[u].error(d)}catch{}return!0},_.prototype.lock=function(){c.prototype.lock.call(this);for(var d=this._sources,y=0;y<d.length;y++)d[y].lock()},n.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,r){var i=t("../compressions"),s=t("./ZipFileWorker");r.generateWorker=function(o,c,h){var g=new s(c.streamFiles,h,c.platform,c.encodeFileName),p=0;try{o.forEach(function(_,d){p++;var y=function(k,S){var C=k||S,E=i[C];if(!E)throw new Error(C+" is not a valid compression method !");return E}(d.options.compression,c.compression),u=d.options.compressionOptions||c.compressionOptions||{},w=d.dir,f=d.date;d._compressWorker(y,u).withStreamInfo("file",{name:_,dir:w,date:f,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(g)}),g.entriesCount=p}catch(_){g.error(_)}return g}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,r){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.10.1",i.loadAsync=function(s,o){return new i().loadAsync(s,o)},i.external=t("./external"),n.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,r){var i=t("./utils"),s=t("./external"),o=t("./utf8"),c=t("./zipEntries"),h=t("./stream/Crc32Probe"),g=t("./nodejsUtils");function p(_){return new s.Promise(function(d,y){var u=_.decompressed.getContentWorker().pipe(new h);u.on("error",function(w){y(w)}).on("end",function(){u.streamInfo.crc32!==_.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(_,d){var y=this;return d=i.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),g.isNode&&g.isStream(_)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",_,!0,d.optimizedBinaryString,d.base64).then(function(u){var w=new c(d);return w.load(u),w}).then(function(u){var w=[s.Promise.resolve(u)],f=u.files;if(d.checkCRC32)for(var k=0;k<f.length;k++)w.push(p(f[k]));return s.Promise.all(w)}).then(function(u){for(var w=u.shift(),f=w.files,k=0;k<f.length;k++){var S=f[k],C=S.fileNameStr,E=i.resolve(S.fileNameStr);y.file(E,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:d.createFolders}),S.dir||(y.file(E).unsafeOriginalName=C)}return w.zipComment.length&&(y.comment=w.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,r){var i=t("../utils"),s=t("../stream/GenericWorker");function o(c,h){s.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(h)}i.inherits(o,s),o.prototype._bindStream=function(c){var h=this;(this._stream=c).pause(),c.on("data",function(g){h.push({data:g,meta:{percent:0}})}).on("error",function(g){h.isPaused?this.generatedError=g:h.error(g)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,r){var i=t("readable-stream").Readable;function s(o,c,h){i.call(this,c),this._helper=o;var g=this;o.on("data",function(p,_){g.push(p)||g._helper.pause(),h&&h(_)}).on("error",function(p){g.emit("error",p)}).on("end",function(){g.push(null)})}t("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,s)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var s=new Buffer(i);return s.fill(0),s},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(t,n,r){function i(E,F,B){var L,N=o.getTypeOf(F),j=o.extend(B||{},g);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(E=f(E)),j.createFolders&&(L=w(E))&&k.call(this,L,!0);var $=N==="string"&&j.binary===!1&&j.base64===!1;B&&B.binary!==void 0||(j.binary=!$),(F instanceof p&&F.uncompressedSize===0||j.dir||!F||F.length===0)&&(j.base64=!1,j.binary=!0,F="",j.compression="STORE",N="string");var A=null;A=F instanceof p||F instanceof c?F:y.isNode&&y.isStream(F)?new u(E,F):o.prepareContent(E,F,j.binary,j.optimizedBinaryString,j.base64);var z=new _(E,A,j);this.files[E]=z}var s=t("./utf8"),o=t("./utils"),c=t("./stream/GenericWorker"),h=t("./stream/StreamHelper"),g=t("./defaults"),p=t("./compressedObject"),_=t("./zipObject"),d=t("./generate"),y=t("./nodejsUtils"),u=t("./nodejs/NodejsStreamInputAdapter"),w=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var F=E.lastIndexOf("/");return 0<F?E.substring(0,F):""},f=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},k=function(E,F){return F=F!==void 0?F:g.createFolders,E=f(E),this.files[E]||i.call(this,E,null,{dir:!0,createFolders:F}),this.files[E]};function S(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var F,B,L;for(F in this.files)L=this.files[F],(B=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&E(B,L)},filter:function(E){var F=[];return this.forEach(function(B,L){E(B,L)&&F.push(L)}),F},file:function(E,F,B){if(arguments.length!==1)return E=this.root+E,i.call(this,E,F,B),this;if(S(E)){var L=E;return this.filter(function(j,$){return!$.dir&&L.test(j)})}var N=this.files[this.root+E];return N&&!N.dir?N:null},folder:function(E){if(!E)return this;if(S(E))return this.filter(function(N,j){return j.dir&&E.test(N)});var F=this.root+E,B=k.call(this,F),L=this.clone();return L.root=B.name,L},remove:function(E){E=this.root+E;var F=this.files[E];if(F||(E.slice(-1)!=="/"&&(E+="/"),F=this.files[E]),F&&!F.dir)delete this.files[E];else for(var B=this.filter(function(N,j){return j.name.slice(0,E.length)===E}),L=0;L<B.length;L++)delete this.files[B[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var F,B={};try{if((B=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");o.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var L=B.comment||this.comment||"";F=d.generateWorker(this,B,L)}catch(N){(F=new c("error")).error(N)}return new h(F,B.type||"string",B.mimeType)},generateAsync:function(E,F){return this.generateInternalStream(E).accumulate(F)},generateNodeStream:function(E,F){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(F)}};n.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,r){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,r){var i=t("./DataReader");function s(o){i.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}t("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),h=o.charCodeAt(1),g=o.charCodeAt(2),p=o.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===c&&this.data[_+1]===h&&this.data[_+2]===g&&this.data[_+3]===p)return _-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),h=o.charCodeAt(1),g=o.charCodeAt(2),p=o.charCodeAt(3),_=this.readData(4);return c===_[0]&&h===_[1]&&g===_[2]&&p===_[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,n,r){var i=t("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,h=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)h=(h<<8)+this.byteAt(c);return this.index+=o,h},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=s},{"../utils":32}],19:[function(t,n,r){var i=t("./Uint8ArrayReader");function s(o){i.call(this,o)}t("../utils").inherits(s,i),s.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,r){var i=t("./DataReader");function s(o){i.call(this,o)}t("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,n,r){var i=t("./ArrayReader");function s(o){i.call(this,o)}t("../utils").inherits(s,i),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,r){var i=t("../utils"),s=t("../support"),o=t("./ArrayReader"),c=t("./StringReader"),h=t("./NodeBufferReader"),g=t("./Uint8ArrayReader");n.exports=function(p){var _=i.getTypeOf(p);return i.checkSupport(_),_!=="string"||s.uint8array?_==="nodebuffer"?new h(p):s.uint8array?new g(i.transformTo("uint8array",p)):new o(i.transformTo("array",p)):new c(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,r){var i=t("./GenericWorker"),s=t("../utils");function o(c){i.call(this,"ConvertWorker to "+c),this.destType=c}s.inherits(o,i),o.prototype.processChunk=function(c){this.push({data:s.transformTo(this.destType,c.data),meta:c.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,r){var i=t("./GenericWorker"),s=t("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,i),o.prototype.processChunk=function(c){this.streamInfo.crc32=s(c.data,this.streamInfo.crc32||0),this.push(c)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,r){var i=t("../utils"),s=t("./GenericWorker");function o(c){s.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(o,s),o.prototype.processChunk=function(c){if(c){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+c.data.length}s.prototype.processChunk.call(this,c)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,r){var i=t("../utils"),s=t("./GenericWorker");function o(c){s.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(g){h.dataIsReady=!0,h.data=g,h.max=g&&g.length||0,h.type=i.getTypeOf(g),h.isPaused||h._tickAndRepeat()},function(g){h.error(g)})}i.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,h);break;case"uint8array":c=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":c=this.data.slice(this.index,h)}return this.index=h,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,r){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var c=0;c<this._listeners[s].length;c++)this._listeners[s][c].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(c){o.processChunk(c)}),s.on("end",function(){o.end()}),s.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=i},{}],29:[function(t,n,r){var i=t("../utils"),s=t("./ConvertWorker"),o=t("./GenericWorker"),c=t("../base64"),h=t("../support"),g=t("../external"),p=null;if(h.nodestream)try{p=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(y,u){return new g.Promise(function(w,f){var k=[],S=y._internalType,C=y._outputType,E=y._mimeType;y.on("data",function(F,B){k.push(F),u&&u(B)}).on("error",function(F){k=[],f(F)}).on("end",function(){try{var F=function(B,L,N){switch(B){case"blob":return i.newBlob(i.transformTo("arraybuffer",L),N);case"base64":return c.encode(L);default:return i.transformTo(B,L)}}(C,function(B,L){var N,j=0,$=null,A=0;for(N=0;N<L.length;N++)A+=L[N].length;switch(B){case"string":return L.join("");case"array":return Array.prototype.concat.apply([],L);case"uint8array":for($=new Uint8Array(A),N=0;N<L.length;N++)$.set(L[N],j),j+=L[N].length;return $;case"nodebuffer":return Buffer.concat(L);default:throw new Error("concat : unsupported type '"+B+"'")}}(S,k),E);w(F)}catch(B){f(B)}k=[]}).resume()})}function d(y,u,w){var f=u;switch(u){case"blob":case"arraybuffer":f="uint8array";break;case"base64":f="string"}try{this._internalType=f,this._outputType=u,this._mimeType=w,i.checkSupport(f),this._worker=y.pipe(new s(f)),y.lock()}catch(k){this._worker=new o("error"),this._worker.error(k)}}d.prototype={accumulate:function(y){return _(this,y)},on:function(y,u){var w=this;return y==="data"?this._worker.on(y,function(f){u.call(w,f.data,f.meta)}):this._worker.on(y,function(){i.delay(u,arguments,w)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},y)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),r.blob=s.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,r){for(var i=t("./utils"),s=t("./support"),o=t("./nodejsUtils"),c=t("./stream/GenericWorker"),h=new Array(256),g=0;g<256;g++)h[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;h[254]=h[254]=1;function p(){c.call(this,"utf-8 decode"),this.leftOver=null}function _(){c.call(this,"utf-8 encode")}r.utf8encode=function(d){return s.nodebuffer?o.newBufferFrom(d,"utf-8"):function(y){var u,w,f,k,S,C=y.length,E=0;for(k=0;k<C;k++)(64512&(w=y.charCodeAt(k)))==55296&&k+1<C&&(64512&(f=y.charCodeAt(k+1)))==56320&&(w=65536+(w-55296<<10)+(f-56320),k++),E+=w<128?1:w<2048?2:w<65536?3:4;for(u=s.uint8array?new Uint8Array(E):new Array(E),k=S=0;S<E;k++)(64512&(w=y.charCodeAt(k)))==55296&&k+1<C&&(64512&(f=y.charCodeAt(k+1)))==56320&&(w=65536+(w-55296<<10)+(f-56320),k++),w<128?u[S++]=w:(w<2048?u[S++]=192|w>>>6:(w<65536?u[S++]=224|w>>>12:(u[S++]=240|w>>>18,u[S++]=128|w>>>12&63),u[S++]=128|w>>>6&63),u[S++]=128|63&w);return u}(d)},r.utf8decode=function(d){return s.nodebuffer?i.transformTo("nodebuffer",d).toString("utf-8"):function(y){var u,w,f,k,S=y.length,C=new Array(2*S);for(u=w=0;u<S;)if((f=y[u++])<128)C[w++]=f;else if(4<(k=h[f]))C[w++]=65533,u+=k-1;else{for(f&=k===2?31:k===3?15:7;1<k&&u<S;)f=f<<6|63&y[u++],k--;1<k?C[w++]=65533:f<65536?C[w++]=f:(f-=65536,C[w++]=55296|f>>10&1023,C[w++]=56320|1023&f)}return C.length!==w&&(C.subarray?C=C.subarray(0,w):C.length=w),i.applyFromCharCode(C)}(d=i.transformTo(s.uint8array?"uint8array":"array",d))},i.inherits(p,c),p.prototype.processChunk=function(d){var y=i.transformTo(s.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var u=y;(y=new Uint8Array(u.length+this.leftOver.length)).set(this.leftOver,0),y.set(u,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var w=function(k,S){var C;for((S=S||k.length)>k.length&&(S=k.length),C=S-1;0<=C&&(192&k[C])==128;)C--;return C<0||C===0?S:C+h[k[C]]>S?C:S}(y),f=y;w!==y.length&&(s.uint8array?(f=y.subarray(0,w),this.leftOver=y.subarray(w,y.length)):(f=y.slice(0,w),this.leftOver=y.slice(w,y.length))),this.push({data:r.utf8decode(f),meta:d.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=p,i.inherits(_,c),_.prototype.processChunk=function(d){this.push({data:r.utf8encode(d.data),meta:d.meta})},r.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,r){var i=t("./support"),s=t("./base64"),o=t("./nodejsUtils"),c=t("./external");function h(u){return u}function g(u,w){for(var f=0;f<u.length;++f)w[f]=255&u.charCodeAt(f);return w}t("setimmediate"),r.newBlob=function(u,w){r.checkSupport("blob");try{return new Blob([u],{type:w})}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return f.append(u),f.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(u,w,f){var k=[],S=0,C=u.length;if(C<=f)return String.fromCharCode.apply(null,u);for(;S<C;)w==="array"||w==="nodebuffer"?k.push(String.fromCharCode.apply(null,u.slice(S,Math.min(S+f,C)))):k.push(String.fromCharCode.apply(null,u.subarray(S,Math.min(S+f,C)))),S+=f;return k.join("")},stringifyByChar:function(u){for(var w="",f=0;f<u.length;f++)w+=String.fromCharCode(u[f]);return w},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function _(u){var w=65536,f=r.getTypeOf(u),k=!0;if(f==="uint8array"?k=p.applyCanBeUsed.uint8array:f==="nodebuffer"&&(k=p.applyCanBeUsed.nodebuffer),k)for(;1<w;)try{return p.stringifyByChunk(u,f,w)}catch{w=Math.floor(w/2)}return p.stringifyByChar(u)}function d(u,w){for(var f=0;f<u.length;f++)w[f]=u[f];return w}r.applyFromCharCode=_;var y={};y.string={string:h,array:function(u){return g(u,new Array(u.length))},arraybuffer:function(u){return y.string.uint8array(u).buffer},uint8array:function(u){return g(u,new Uint8Array(u.length))},nodebuffer:function(u){return g(u,o.allocBuffer(u.length))}},y.array={string:_,array:h,arraybuffer:function(u){return new Uint8Array(u).buffer},uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return o.newBufferFrom(u)}},y.arraybuffer={string:function(u){return _(new Uint8Array(u))},array:function(u){return d(new Uint8Array(u),new Array(u.byteLength))},arraybuffer:h,uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return o.newBufferFrom(new Uint8Array(u))}},y.uint8array={string:_,array:function(u){return d(u,new Array(u.length))},arraybuffer:function(u){return u.buffer},uint8array:h,nodebuffer:function(u){return o.newBufferFrom(u)}},y.nodebuffer={string:_,array:function(u){return d(u,new Array(u.length))},arraybuffer:function(u){return y.nodebuffer.uint8array(u).buffer},uint8array:function(u){return d(u,new Uint8Array(u.length))},nodebuffer:h},r.transformTo=function(u,w){if(w=w||"",!u)return w;r.checkSupport(u);var f=r.getTypeOf(w);return y[f][u](w)},r.resolve=function(u){for(var w=u.split("/"),f=[],k=0;k<w.length;k++){var S=w[k];S==="."||S===""&&k!==0&&k!==w.length-1||(S===".."?f.pop():f.push(S))}return f.join("/")},r.getTypeOf=function(u){return typeof u=="string"?"string":Object.prototype.toString.call(u)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(u)?"nodebuffer":i.uint8array&&u instanceof Uint8Array?"uint8array":i.arraybuffer&&u instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(u){if(!i[u.toLowerCase()])throw new Error(u+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(u){var w,f,k="";for(f=0;f<(u||"").length;f++)k+="\\x"+((w=u.charCodeAt(f))<16?"0":"")+w.toString(16).toUpperCase();return k},r.delay=function(u,w,f){setImmediate(function(){u.apply(f||null,w||[])})},r.inherits=function(u,w){function f(){}f.prototype=w.prototype,u.prototype=new f},r.extend=function(){var u,w,f={};for(u=0;u<arguments.length;u++)for(w in arguments[u])Object.prototype.hasOwnProperty.call(arguments[u],w)&&f[w]===void 0&&(f[w]=arguments[u][w]);return f},r.prepareContent=function(u,w,f,k,S){return c.Promise.resolve(w).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new c.Promise(function(E,F){var B=new FileReader;B.onload=function(L){E(L.target.result)},B.onerror=function(L){F(L.target.error)},B.readAsArrayBuffer(C)}):C}).then(function(C){var E=r.getTypeOf(C);return E?(E==="arraybuffer"?C=r.transformTo("uint8array",C):E==="string"&&(S?C=s.decode(C):f&&k!==!0&&(C=function(F){return g(F,i.uint8array?new Uint8Array(F.length):new Array(F.length))}(C))),C):c.Promise.reject(new Error("Can't read the data of '"+u+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,r){var i=t("./reader/readerFor"),s=t("./utils"),o=t("./signature"),c=t("./zipEntry"),h=t("./support");function g(p){this.files=[],this.loadOptions=p}g.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(_)+", expected "+s.pretty(p)+")")}},isSignature:function(p,_){var d=this.reader.index;this.reader.setIndex(p);var y=this.reader.readString(4)===_;return this.reader.setIndex(d),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),_=h.uint8array?"uint8array":"array",d=s.transformTo(_,p);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,_,d,y=this.zip64EndOfCentralSize-44;0<y;)p=this.reader.readInt(2),_=this.reader.readInt(4),d=this.reader.readData(_),this.zip64ExtensibleData[p]={id:p,length:_,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,_;for(p=0;p<this.files.length;p++)_=this.files[p],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(p=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var _=p;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var y=_-d;if(0<y)this.isSignature(_,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(p){this.reader=i(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=g},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,r){var i=t("./reader/readerFor"),s=t("./utils"),o=t("./compressedObject"),c=t("./crc32"),h=t("./utf8"),g=t("./compressions"),p=t("./support");function _(d,y){this.options=d,this.loadOptions=y}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var y,u;if(d.skip(22),this.fileNameLength=d.readInt(2),u=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(u),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(w){for(var f in g)if(Object.prototype.hasOwnProperty.call(g,f)&&g[f].magic===w)return g[f];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var y=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(y),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var y,u,w,f=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<f;)y=d.readInt(2),u=d.readInt(2),w=d.readData(u),this.extraFields[y]={id:y,length:u,value:w};d.setIndex(f)},handleUTF8:function(){var d=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var u=s.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(u)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var f=s.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(f)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var y=i(d.value);return y.readInt(1)!==1||c(this.fileName)!==y.readInt(4)?null:h.utf8decode(y.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var y=i(d.value);return y.readInt(1)!==1||c(this.fileComment)!==y.readInt(4)?null:h.utf8decode(y.readData(d.length-5))}return null}},n.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,r){function i(y,u,w){this.name=y,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=u,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var s=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),c=t("./utf8"),h=t("./compressedObject"),g=t("./stream/GenericWorker");i.prototype={internalStream:function(y){var u=null,w="string";try{if(!y)throw new Error("No output type specified.");var f=(w=y.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),u=this._decompressWorker();var k=!this._dataBinary;k&&!f&&(u=u.pipe(new c.Utf8EncodeWorker)),!k&&f&&(u=u.pipe(new c.Utf8DecodeWorker))}catch(S){(u=new g("error")).error(S)}return new s(u,w,"")},async:function(y,u){return this.internalStream(y).accumulate(u)},nodeStream:function(y,u){return this.internalStream(y||"nodebuffer").toNodejsStream(u)},_compressWorker:function(y,u){if(this._data instanceof h&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new c.Utf8EncodeWorker)),h.createWorkerFrom(w,y,u)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof g?this._data:new o(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<p.length;d++)i.prototype[p[d]]=_;n.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,r){(function(i){var s,o,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var h=0,g=new c(y),p=i.document.createTextNode("");g.observe(p,{characterData:!0}),s=function(){p.data=h=++h%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var u=i.document.createElement("script");u.onreadystatechange=function(){y(),u.onreadystatechange=null,u.parentNode.removeChild(u),u=null},i.document.documentElement.appendChild(u)}:function(){setTimeout(y,0)};else{var _=new i.MessageChannel;_.port1.onmessage=y,s=function(){_.port2.postMessage(0)}}var d=[];function y(){var u,w;o=!0;for(var f=d.length;f;){for(w=d,d=[],u=-1;++u<f;)w[u]();f=d.length}o=!1}n.exports=function(u){d.push(u)!==1||o||s()}}).call(this,typeof De<"u"?De:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,r){var i=t("immediate");function s(){}var o={},c=["REJECTED"],h=["FULFILLED"],g=["PENDING"];function p(f){if(typeof f!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,f!==s&&u(this,f)}function _(f,k,S){this.promise=f,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function d(f,k,S){i(function(){var C;try{C=k(S)}catch(E){return o.reject(f,E)}C===f?o.reject(f,new TypeError("Cannot resolve promise with itself")):o.resolve(f,C)})}function y(f){var k=f&&f.then;if(f&&(typeof f=="object"||typeof f=="function")&&typeof k=="function")return function(){k.apply(f,arguments)}}function u(f,k){var S=!1;function C(B){S||(S=!0,o.reject(f,B))}function E(B){S||(S=!0,o.resolve(f,B))}var F=w(function(){k(E,C)});F.status==="error"&&C(F.value)}function w(f,k){var S={};try{S.value=f(k),S.status="success"}catch(C){S.status="error",S.value=C}return S}(n.exports=p).prototype.finally=function(f){if(typeof f!="function")return this;var k=this.constructor;return this.then(function(S){return k.resolve(f()).then(function(){return S})},function(S){return k.resolve(f()).then(function(){throw S})})},p.prototype.catch=function(f){return this.then(null,f)},p.prototype.then=function(f,k){if(typeof f!="function"&&this.state===h||typeof k!="function"&&this.state===c)return this;var S=new this.constructor(s);return this.state!==g?d(S,this.state===h?f:k,this.outcome):this.queue.push(new _(S,f,k)),S},_.prototype.callFulfilled=function(f){o.resolve(this.promise,f)},_.prototype.otherCallFulfilled=function(f){d(this.promise,this.onFulfilled,f)},_.prototype.callRejected=function(f){o.reject(this.promise,f)},_.prototype.otherCallRejected=function(f){d(this.promise,this.onRejected,f)},o.resolve=function(f,k){var S=w(y,k);if(S.status==="error")return o.reject(f,S.value);var C=S.value;if(C)u(f,C);else{f.state=h,f.outcome=k;for(var E=-1,F=f.queue.length;++E<F;)f.queue[E].callFulfilled(k)}return f},o.reject=function(f,k){f.state=c,f.outcome=k;for(var S=-1,C=f.queue.length;++S<C;)f.queue[S].callRejected(k);return f},p.resolve=function(f){return f instanceof this?f:o.resolve(new this(s),f)},p.reject=function(f){var k=new this(s);return o.reject(k,f)},p.all=function(f){var k=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=f.length,C=!1;if(!S)return this.resolve([]);for(var E=new Array(S),F=0,B=-1,L=new this(s);++B<S;)N(f[B],B);return L;function N(j,$){k.resolve(j).then(function(A){E[$]=A,++F!==S||C||(C=!0,o.resolve(L,E))},function(A){C||(C=!0,o.reject(L,A))})}},p.race=function(f){var k=this;if(Object.prototype.toString.call(f)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=f.length,C=!1;if(!S)return this.resolve([]);for(var E=-1,F=new this(s);++E<S;)B=f[E],k.resolve(B).then(function(L){C||(C=!0,o.resolve(F,L))},function(L){C||(C=!0,o.reject(F,L))});var B;return F}},{immediate:36}],38:[function(t,n,r){var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),n.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,r){var i=t("./zlib/deflate"),s=t("./utils/common"),o=t("./utils/strings"),c=t("./zlib/messages"),h=t("./zlib/zstream"),g=Object.prototype.toString,p=0,_=-1,d=0,y=8;function u(f){if(!(this instanceof u))return new u(f);this.options=s.assign({level:_,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},f||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var S=i.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(S!==p)throw new Error(c[S]);if(k.header&&i.deflateSetHeader(this.strm,k.header),k.dictionary){var C;if(C=typeof k.dictionary=="string"?o.string2buf(k.dictionary):g.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(S=i.deflateSetDictionary(this.strm,C))!==p)throw new Error(c[S]);this._dict_set=!0}}function w(f,k){var S=new u(k);if(S.push(f,!0),S.err)throw S.msg||c[S.err];return S.result}u.prototype.push=function(f,k){var S,C,E=this.strm,F=this.options.chunkSize;if(this.ended)return!1;C=k===~~k?k:k===!0?4:0,typeof f=="string"?E.input=o.string2buf(f):g.call(f)==="[object ArrayBuffer]"?E.input=new Uint8Array(f):E.input=f,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new s.Buf8(F),E.next_out=0,E.avail_out=F),(S=i.deflate(E,C))!==1&&S!==p)return this.onEnd(S),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(E.output,E.next_out))):this.onData(s.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&S!==1);return C===4?(S=i.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===p):C!==2||(this.onEnd(p),!(E.avail_out=0))},u.prototype.onData=function(f){this.chunks.push(f)},u.prototype.onEnd=function(f){f===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},r.Deflate=u,r.deflate=w,r.deflateRaw=function(f,k){return(k=k||{}).raw=!0,w(f,k)},r.gzip=function(f,k){return(k=k||{}).gzip=!0,w(f,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,r){var i=t("./zlib/inflate"),s=t("./utils/common"),o=t("./utils/strings"),c=t("./zlib/constants"),h=t("./zlib/messages"),g=t("./zlib/zstream"),p=t("./zlib/gzheader"),_=Object.prototype.toString;function d(u){if(!(this instanceof d))return new d(u);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},u||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||u&&u.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&!(15&w.windowBits)&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var f=i.inflateInit2(this.strm,w.windowBits);if(f!==c.Z_OK)throw new Error(h[f]);this.header=new p,i.inflateGetHeader(this.strm,this.header)}function y(u,w){var f=new d(w);if(f.push(u,!0),f.err)throw f.msg||h[f.err];return f.result}d.prototype.push=function(u,w){var f,k,S,C,E,F,B=this.strm,L=this.options.chunkSize,N=this.options.dictionary,j=!1;if(this.ended)return!1;k=w===~~w?w:w===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof u=="string"?B.input=o.binstring2buf(u):_.call(u)==="[object ArrayBuffer]"?B.input=new Uint8Array(u):B.input=u,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new s.Buf8(L),B.next_out=0,B.avail_out=L),(f=i.inflate(B,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&N&&(F=typeof N=="string"?o.string2buf(N):_.call(N)==="[object ArrayBuffer]"?new Uint8Array(N):N,f=i.inflateSetDictionary(this.strm,F)),f===c.Z_BUF_ERROR&&j===!0&&(f=c.Z_OK,j=!1),f!==c.Z_STREAM_END&&f!==c.Z_OK)return this.onEnd(f),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&f!==c.Z_STREAM_END&&(B.avail_in!==0||k!==c.Z_FINISH&&k!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(B.output,B.next_out),C=B.next_out-S,E=o.buf2string(B.output,S),B.next_out=C,B.avail_out=L-C,C&&s.arraySet(B.output,B.output,S,C,0),this.onData(E)):this.onData(s.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(j=!0)}while((0<B.avail_in||B.avail_out===0)&&f!==c.Z_STREAM_END);return f===c.Z_STREAM_END&&(k=c.Z_FINISH),k===c.Z_FINISH?(f=i.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===c.Z_OK):k!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(B.avail_out=0))},d.prototype.onData=function(u){this.chunks.push(u)},d.prototype.onEnd=function(u){u===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},r.Inflate=d,r.inflate=y,r.inflateRaw=function(u,w){return(w=w||{}).raw=!0,y(u,w)},r.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,r){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(c){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var g=h.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(var p in g)g.hasOwnProperty(p)&&(c[p]=g[p])}}return c},r.shrinkBuf=function(c,h){return c.length===h?c:c.subarray?c.subarray(0,h):(c.length=h,c)};var s={arraySet:function(c,h,g,p,_){if(h.subarray&&c.subarray)c.set(h.subarray(g,g+p),_);else for(var d=0;d<p;d++)c[_+d]=h[g+d]},flattenChunks:function(c){var h,g,p,_,d,y;for(h=p=0,g=c.length;h<g;h++)p+=c[h].length;for(y=new Uint8Array(p),h=_=0,g=c.length;h<g;h++)d=c[h],y.set(d,_),_+=d.length;return y}},o={arraySet:function(c,h,g,p,_){for(var d=0;d<p;d++)c[_+d]=h[g+d]},flattenChunks:function(c){return[].concat.apply([],c)}};r.setTyped=function(c){c?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,s)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(i)},{}],42:[function(t,n,r){var i=t("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new i.Buf8(256),h=0;h<256;h++)c[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function g(p,_){if(_<65537&&(p.subarray&&o||!p.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(p,_));for(var d="",y=0;y<_;y++)d+=String.fromCharCode(p[y]);return d}c[254]=c[254]=1,r.string2buf=function(p){var _,d,y,u,w,f=p.length,k=0;for(u=0;u<f;u++)(64512&(d=p.charCodeAt(u)))==55296&&u+1<f&&(64512&(y=p.charCodeAt(u+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),u++),k+=d<128?1:d<2048?2:d<65536?3:4;for(_=new i.Buf8(k),u=w=0;w<k;u++)(64512&(d=p.charCodeAt(u)))==55296&&u+1<f&&(64512&(y=p.charCodeAt(u+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),u++),d<128?_[w++]=d:(d<2048?_[w++]=192|d>>>6:(d<65536?_[w++]=224|d>>>12:(_[w++]=240|d>>>18,_[w++]=128|d>>>12&63),_[w++]=128|d>>>6&63),_[w++]=128|63&d);return _},r.buf2binstring=function(p){return g(p,p.length)},r.binstring2buf=function(p){for(var _=new i.Buf8(p.length),d=0,y=_.length;d<y;d++)_[d]=p.charCodeAt(d);return _},r.buf2string=function(p,_){var d,y,u,w,f=_||p.length,k=new Array(2*f);for(d=y=0;d<f;)if((u=p[d++])<128)k[y++]=u;else if(4<(w=c[u]))k[y++]=65533,d+=w-1;else{for(u&=w===2?31:w===3?15:7;1<w&&d<f;)u=u<<6|63&p[d++],w--;1<w?k[y++]=65533:u<65536?k[y++]=u:(u-=65536,k[y++]=55296|u>>10&1023,k[y++]=56320|1023&u)}return g(k,y)},r.utf8border=function(p,_){var d;for((_=_||p.length)>p.length&&(_=p.length),d=_-1;0<=d&&(192&p[d])==128;)d--;return d<0||d===0?_:d+c[p[d]]>_?d:_}},{"./common":41}],43:[function(t,n,r){n.exports=function(i,s,o,c){for(var h=65535&i|0,g=i>>>16&65535|0,p=0;o!==0;){for(o-=p=2e3<o?2e3:o;g=g+(h=h+s[c++]|0)|0,--p;);h%=65521,g%=65521}return h|g<<16|0}},{}],44:[function(t,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,r){var i=function(){for(var s,o=[],c=0;c<256;c++){s=c;for(var h=0;h<8;h++)s=1&s?3988292384^s>>>1:s>>>1;o[c]=s}return o}();n.exports=function(s,o,c,h){var g=i,p=h+c;s^=-1;for(var _=h;_<p;_++)s=s>>>8^g[255&(s^o[_])];return-1^s}},{}],46:[function(t,n,r){var i,s=t("../utils/common"),o=t("./trees"),c=t("./adler32"),h=t("./crc32"),g=t("./messages"),p=0,_=4,d=0,y=-2,u=-1,w=4,f=2,k=8,S=9,C=286,E=30,F=19,B=2*C+1,L=15,N=3,j=258,$=j+N+1,A=42,z=113,m=1,K=2,te=3,W=4;function ie(l,P){return l.msg=g[P],P}function H(l){return(l<<1)-(4<l?9:0)}function ee(l){for(var P=l.length;0<=--P;)l[P]=0}function M(l){var P=l.state,O=P.pending;O>l.avail_out&&(O=l.avail_out),O!==0&&(s.arraySet(l.output,P.pending_buf,P.pending_out,O,l.next_out),l.next_out+=O,P.pending_out+=O,l.total_out+=O,l.avail_out-=O,P.pending-=O,P.pending===0&&(P.pending_out=0))}function R(l,P){o._tr_flush_block(l,0<=l.block_start?l.block_start:-1,l.strstart-l.block_start,P),l.block_start=l.strstart,M(l.strm)}function Q(l,P){l.pending_buf[l.pending++]=P}function q(l,P){l.pending_buf[l.pending++]=P>>>8&255,l.pending_buf[l.pending++]=255&P}function J(l,P){var O,b,v=l.max_chain_length,D=l.strstart,G=l.prev_length,U=l.nice_match,x=l.strstart>l.w_size-$?l.strstart-(l.w_size-$):0,V=l.window,X=l.w_mask,Z=l.prev,Y=l.strstart+j,ce=V[D+G-1],re=V[D+G];l.prev_length>=l.good_match&&(v>>=2),U>l.lookahead&&(U=l.lookahead);do if(V[(O=P)+G]===re&&V[O+G-1]===ce&&V[O]===V[D]&&V[++O]===V[D+1]){D+=2,O++;do;while(V[++D]===V[++O]&&V[++D]===V[++O]&&V[++D]===V[++O]&&V[++D]===V[++O]&&V[++D]===V[++O]&&V[++D]===V[++O]&&V[++D]===V[++O]&&V[++D]===V[++O]&&D<Y);if(b=j-(Y-D),D=Y-j,G<b){if(l.match_start=P,U<=(G=b))break;ce=V[D+G-1],re=V[D+G]}}while((P=Z[P&X])>x&&--v!=0);return G<=l.lookahead?G:l.lookahead}function pe(l){var P,O,b,v,D,G,U,x,V,X,Z=l.w_size;do{if(v=l.window_size-l.lookahead-l.strstart,l.strstart>=Z+(Z-$)){for(s.arraySet(l.window,l.window,Z,Z,0),l.match_start-=Z,l.strstart-=Z,l.block_start-=Z,P=O=l.hash_size;b=l.head[--P],l.head[P]=Z<=b?b-Z:0,--O;);for(P=O=Z;b=l.prev[--P],l.prev[P]=Z<=b?b-Z:0,--O;);v+=Z}if(l.strm.avail_in===0)break;if(G=l.strm,U=l.window,x=l.strstart+l.lookahead,V=v,X=void 0,X=G.avail_in,V<X&&(X=V),O=X===0?0:(G.avail_in-=X,s.arraySet(U,G.input,G.next_in,X,x),G.state.wrap===1?G.adler=c(G.adler,U,X,x):G.state.wrap===2&&(G.adler=h(G.adler,U,X,x)),G.next_in+=X,G.total_in+=X,X),l.lookahead+=O,l.lookahead+l.insert>=N)for(D=l.strstart-l.insert,l.ins_h=l.window[D],l.ins_h=(l.ins_h<<l.hash_shift^l.window[D+1])&l.hash_mask;l.insert&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[D+N-1])&l.hash_mask,l.prev[D&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=D,D++,l.insert--,!(l.lookahead+l.insert<N)););}while(l.lookahead<$&&l.strm.avail_in!==0)}function fe(l,P){for(var O,b;;){if(l.lookahead<$){if(pe(l),l.lookahead<$&&P===p)return m;if(l.lookahead===0)break}if(O=0,l.lookahead>=N&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+N-1])&l.hash_mask,O=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),O!==0&&l.strstart-O<=l.w_size-$&&(l.match_length=J(l,O)),l.match_length>=N)if(b=o._tr_tally(l,l.strstart-l.match_start,l.match_length-N),l.lookahead-=l.match_length,l.match_length<=l.max_lazy_match&&l.lookahead>=N){for(l.match_length--;l.strstart++,l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+N-1])&l.hash_mask,O=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart,--l.match_length!=0;);l.strstart++}else l.strstart+=l.match_length,l.match_length=0,l.ins_h=l.window[l.strstart],l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+1])&l.hash_mask;else b=o._tr_tally(l,0,l.window[l.strstart]),l.lookahead--,l.strstart++;if(b&&(R(l,!1),l.strm.avail_out===0))return m}return l.insert=l.strstart<N-1?l.strstart:N-1,P===_?(R(l,!0),l.strm.avail_out===0?te:W):l.last_lit&&(R(l,!1),l.strm.avail_out===0)?m:K}function ne(l,P){for(var O,b,v;;){if(l.lookahead<$){if(pe(l),l.lookahead<$&&P===p)return m;if(l.lookahead===0)break}if(O=0,l.lookahead>=N&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+N-1])&l.hash_mask,O=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),l.prev_length=l.match_length,l.prev_match=l.match_start,l.match_length=N-1,O!==0&&l.prev_length<l.max_lazy_match&&l.strstart-O<=l.w_size-$&&(l.match_length=J(l,O),l.match_length<=5&&(l.strategy===1||l.match_length===N&&4096<l.strstart-l.match_start)&&(l.match_length=N-1)),l.prev_length>=N&&l.match_length<=l.prev_length){for(v=l.strstart+l.lookahead-N,b=o._tr_tally(l,l.strstart-1-l.prev_match,l.prev_length-N),l.lookahead-=l.prev_length-1,l.prev_length-=2;++l.strstart<=v&&(l.ins_h=(l.ins_h<<l.hash_shift^l.window[l.strstart+N-1])&l.hash_mask,O=l.prev[l.strstart&l.w_mask]=l.head[l.ins_h],l.head[l.ins_h]=l.strstart),--l.prev_length!=0;);if(l.match_available=0,l.match_length=N-1,l.strstart++,b&&(R(l,!1),l.strm.avail_out===0))return m}else if(l.match_available){if((b=o._tr_tally(l,0,l.window[l.strstart-1]))&&R(l,!1),l.strstart++,l.lookahead--,l.strm.avail_out===0)return m}else l.match_available=1,l.strstart++,l.lookahead--}return l.match_available&&(b=o._tr_tally(l,0,l.window[l.strstart-1]),l.match_available=0),l.insert=l.strstart<N-1?l.strstart:N-1,P===_?(R(l,!0),l.strm.avail_out===0?te:W):l.last_lit&&(R(l,!1),l.strm.avail_out===0)?m:K}function se(l,P,O,b,v){this.good_length=l,this.max_lazy=P,this.nice_length=O,this.max_chain=b,this.func=v}function _e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*B),this.dyn_dtree=new s.Buf16(2*(2*E+1)),this.bl_tree=new s.Buf16(2*(2*F+1)),ee(this.dyn_ltree),ee(this.dyn_dtree),ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(L+1),this.heap=new s.Buf16(2*C+1),ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*C+1),ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ue(l){var P;return l&&l.state?(l.total_in=l.total_out=0,l.data_type=f,(P=l.state).pending=0,P.pending_out=0,P.wrap<0&&(P.wrap=-P.wrap),P.status=P.wrap?A:z,l.adler=P.wrap===2?0:1,P.last_flush=p,o._tr_init(P),d):ie(l,y)}function Se(l){var P=ue(l);return P===d&&function(O){O.window_size=2*O.w_size,ee(O.head),O.max_lazy_match=i[O.level].max_lazy,O.good_match=i[O.level].good_length,O.nice_match=i[O.level].nice_length,O.max_chain_length=i[O.level].max_chain,O.strstart=0,O.block_start=0,O.lookahead=0,O.insert=0,O.match_length=O.prev_length=N-1,O.match_available=0,O.ins_h=0}(l.state),P}function ve(l,P,O,b,v,D){if(!l)return y;var G=1;if(P===u&&(P=6),b<0?(G=0,b=-b):15<b&&(G=2,b-=16),v<1||S<v||O!==k||b<8||15<b||P<0||9<P||D<0||w<D)return ie(l,y);b===8&&(b=9);var U=new _e;return(l.state=U).strm=l,U.wrap=G,U.gzhead=null,U.w_bits=b,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=v+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+N-1)/N),U.window=new s.Buf8(2*U.w_size),U.head=new s.Buf16(U.hash_size),U.prev=new s.Buf16(U.w_size),U.lit_bufsize=1<<v+6,U.pending_buf_size=4*U.lit_bufsize,U.pending_buf=new s.Buf8(U.pending_buf_size),U.d_buf=1*U.lit_bufsize,U.l_buf=3*U.lit_bufsize,U.level=P,U.strategy=D,U.method=O,Se(l)}i=[new se(0,0,0,0,function(l,P){var O=65535;for(O>l.pending_buf_size-5&&(O=l.pending_buf_size-5);;){if(l.lookahead<=1){if(pe(l),l.lookahead===0&&P===p)return m;if(l.lookahead===0)break}l.strstart+=l.lookahead,l.lookahead=0;var b=l.block_start+O;if((l.strstart===0||l.strstart>=b)&&(l.lookahead=l.strstart-b,l.strstart=b,R(l,!1),l.strm.avail_out===0)||l.strstart-l.block_start>=l.w_size-$&&(R(l,!1),l.strm.avail_out===0))return m}return l.insert=0,P===_?(R(l,!0),l.strm.avail_out===0?te:W):(l.strstart>l.block_start&&(R(l,!1),l.strm.avail_out),m)}),new se(4,4,8,4,fe),new se(4,5,16,8,fe),new se(4,6,32,32,fe),new se(4,4,16,16,ne),new se(8,16,32,32,ne),new se(8,16,128,128,ne),new se(8,32,128,256,ne),new se(32,128,258,1024,ne),new se(32,258,258,4096,ne)],r.deflateInit=function(l,P){return ve(l,P,k,15,8,0)},r.deflateInit2=ve,r.deflateReset=Se,r.deflateResetKeep=ue,r.deflateSetHeader=function(l,P){return l&&l.state?l.state.wrap!==2?y:(l.state.gzhead=P,d):y},r.deflate=function(l,P){var O,b,v,D;if(!l||!l.state||5<P||P<0)return l?ie(l,y):y;if(b=l.state,!l.output||!l.input&&l.avail_in!==0||b.status===666&&P!==_)return ie(l,l.avail_out===0?-5:y);if(b.strm=l,O=b.last_flush,b.last_flush=P,b.status===A)if(b.wrap===2)l.adler=0,Q(b,31),Q(b,139),Q(b,8),b.gzhead?(Q(b,(b.gzhead.text?1:0)+(b.gzhead.hcrc?2:0)+(b.gzhead.extra?4:0)+(b.gzhead.name?8:0)+(b.gzhead.comment?16:0)),Q(b,255&b.gzhead.time),Q(b,b.gzhead.time>>8&255),Q(b,b.gzhead.time>>16&255),Q(b,b.gzhead.time>>24&255),Q(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),Q(b,255&b.gzhead.os),b.gzhead.extra&&b.gzhead.extra.length&&(Q(b,255&b.gzhead.extra.length),Q(b,b.gzhead.extra.length>>8&255)),b.gzhead.hcrc&&(l.adler=h(l.adler,b.pending_buf,b.pending,0)),b.gzindex=0,b.status=69):(Q(b,0),Q(b,0),Q(b,0),Q(b,0),Q(b,0),Q(b,b.level===9?2:2<=b.strategy||b.level<2?4:0),Q(b,3),b.status=z);else{var G=k+(b.w_bits-8<<4)<<8;G|=(2<=b.strategy||b.level<2?0:b.level<6?1:b.level===6?2:3)<<6,b.strstart!==0&&(G|=32),G+=31-G%31,b.status=z,q(b,G),b.strstart!==0&&(q(b,l.adler>>>16),q(b,65535&l.adler)),l.adler=1}if(b.status===69)if(b.gzhead.extra){for(v=b.pending;b.gzindex<(65535&b.gzhead.extra.length)&&(b.pending!==b.pending_buf_size||(b.gzhead.hcrc&&b.pending>v&&(l.adler=h(l.adler,b.pending_buf,b.pending-v,v)),M(l),v=b.pending,b.pending!==b.pending_buf_size));)Q(b,255&b.gzhead.extra[b.gzindex]),b.gzindex++;b.gzhead.hcrc&&b.pending>v&&(l.adler=h(l.adler,b.pending_buf,b.pending-v,v)),b.gzindex===b.gzhead.extra.length&&(b.gzindex=0,b.status=73)}else b.status=73;if(b.status===73)if(b.gzhead.name){v=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>v&&(l.adler=h(l.adler,b.pending_buf,b.pending-v,v)),M(l),v=b.pending,b.pending===b.pending_buf_size)){D=1;break}D=b.gzindex<b.gzhead.name.length?255&b.gzhead.name.charCodeAt(b.gzindex++):0,Q(b,D)}while(D!==0);b.gzhead.hcrc&&b.pending>v&&(l.adler=h(l.adler,b.pending_buf,b.pending-v,v)),D===0&&(b.gzindex=0,b.status=91)}else b.status=91;if(b.status===91)if(b.gzhead.comment){v=b.pending;do{if(b.pending===b.pending_buf_size&&(b.gzhead.hcrc&&b.pending>v&&(l.adler=h(l.adler,b.pending_buf,b.pending-v,v)),M(l),v=b.pending,b.pending===b.pending_buf_size)){D=1;break}D=b.gzindex<b.gzhead.comment.length?255&b.gzhead.comment.charCodeAt(b.gzindex++):0,Q(b,D)}while(D!==0);b.gzhead.hcrc&&b.pending>v&&(l.adler=h(l.adler,b.pending_buf,b.pending-v,v)),D===0&&(b.status=103)}else b.status=103;if(b.status===103&&(b.gzhead.hcrc?(b.pending+2>b.pending_buf_size&&M(l),b.pending+2<=b.pending_buf_size&&(Q(b,255&l.adler),Q(b,l.adler>>8&255),l.adler=0,b.status=z)):b.status=z),b.pending!==0){if(M(l),l.avail_out===0)return b.last_flush=-1,d}else if(l.avail_in===0&&H(P)<=H(O)&&P!==_)return ie(l,-5);if(b.status===666&&l.avail_in!==0)return ie(l,-5);if(l.avail_in!==0||b.lookahead!==0||P!==p&&b.status!==666){var U=b.strategy===2?function(x,V){for(var X;;){if(x.lookahead===0&&(pe(x),x.lookahead===0)){if(V===p)return m;break}if(x.match_length=0,X=o._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++,X&&(R(x,!1),x.strm.avail_out===0))return m}return x.insert=0,V===_?(R(x,!0),x.strm.avail_out===0?te:W):x.last_lit&&(R(x,!1),x.strm.avail_out===0)?m:K}(b,P):b.strategy===3?function(x,V){for(var X,Z,Y,ce,re=x.window;;){if(x.lookahead<=j){if(pe(x),x.lookahead<=j&&V===p)return m;if(x.lookahead===0)break}if(x.match_length=0,x.lookahead>=N&&0<x.strstart&&(Z=re[Y=x.strstart-1])===re[++Y]&&Z===re[++Y]&&Z===re[++Y]){ce=x.strstart+j;do;while(Z===re[++Y]&&Z===re[++Y]&&Z===re[++Y]&&Z===re[++Y]&&Z===re[++Y]&&Z===re[++Y]&&Z===re[++Y]&&Z===re[++Y]&&Y<ce);x.match_length=j-(ce-Y),x.match_length>x.lookahead&&(x.match_length=x.lookahead)}if(x.match_length>=N?(X=o._tr_tally(x,1,x.match_length-N),x.lookahead-=x.match_length,x.strstart+=x.match_length,x.match_length=0):(X=o._tr_tally(x,0,x.window[x.strstart]),x.lookahead--,x.strstart++),X&&(R(x,!1),x.strm.avail_out===0))return m}return x.insert=0,V===_?(R(x,!0),x.strm.avail_out===0?te:W):x.last_lit&&(R(x,!1),x.strm.avail_out===0)?m:K}(b,P):i[b.level].func(b,P);if(U!==te&&U!==W||(b.status=666),U===m||U===te)return l.avail_out===0&&(b.last_flush=-1),d;if(U===K&&(P===1?o._tr_align(b):P!==5&&(o._tr_stored_block(b,0,0,!1),P===3&&(ee(b.head),b.lookahead===0&&(b.strstart=0,b.block_start=0,b.insert=0))),M(l),l.avail_out===0))return b.last_flush=-1,d}return P!==_?d:b.wrap<=0?1:(b.wrap===2?(Q(b,255&l.adler),Q(b,l.adler>>8&255),Q(b,l.adler>>16&255),Q(b,l.adler>>24&255),Q(b,255&l.total_in),Q(b,l.total_in>>8&255),Q(b,l.total_in>>16&255),Q(b,l.total_in>>24&255)):(q(b,l.adler>>>16),q(b,65535&l.adler)),M(l),0<b.wrap&&(b.wrap=-b.wrap),b.pending!==0?d:1)},r.deflateEnd=function(l){var P;return l&&l.state?(P=l.state.status)!==A&&P!==69&&P!==73&&P!==91&&P!==103&&P!==z&&P!==666?ie(l,y):(l.state=null,P===z?ie(l,-3):d):y},r.deflateSetDictionary=function(l,P){var O,b,v,D,G,U,x,V,X=P.length;if(!l||!l.state||(D=(O=l.state).wrap)===2||D===1&&O.status!==A||O.lookahead)return y;for(D===1&&(l.adler=c(l.adler,P,X,0)),O.wrap=0,X>=O.w_size&&(D===0&&(ee(O.head),O.strstart=0,O.block_start=0,O.insert=0),V=new s.Buf8(O.w_size),s.arraySet(V,P,X-O.w_size,O.w_size,0),P=V,X=O.w_size),G=l.avail_in,U=l.next_in,x=l.input,l.avail_in=X,l.next_in=0,l.input=P,pe(O);O.lookahead>=N;){for(b=O.strstart,v=O.lookahead-(N-1);O.ins_h=(O.ins_h<<O.hash_shift^O.window[b+N-1])&O.hash_mask,O.prev[b&O.w_mask]=O.head[O.ins_h],O.head[O.ins_h]=b,b++,--v;);O.strstart=b,O.lookahead=N-1,pe(O)}return O.strstart+=O.lookahead,O.block_start=O.strstart,O.insert=O.lookahead,O.lookahead=0,O.match_length=O.prev_length=N-1,O.match_available=0,l.next_in=U,l.input=x,l.avail_in=G,O.wrap=D,d},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,r){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,n,r){n.exports=function(i,s){var o,c,h,g,p,_,d,y,u,w,f,k,S,C,E,F,B,L,N,j,$,A,z,m,K;o=i.state,c=i.next_in,m=i.input,h=c+(i.avail_in-5),g=i.next_out,K=i.output,p=g-(s-i.avail_out),_=g+(i.avail_out-257),d=o.dmax,y=o.wsize,u=o.whave,w=o.wnext,f=o.window,k=o.hold,S=o.bits,C=o.lencode,E=o.distcode,F=(1<<o.lenbits)-1,B=(1<<o.distbits)-1;e:do{S<15&&(k+=m[c++]<<S,S+=8,k+=m[c++]<<S,S+=8),L=C[k&F];t:for(;;){if(k>>>=N=L>>>24,S-=N,(N=L>>>16&255)===0)K[g++]=65535&L;else{if(!(16&N)){if(!(64&N)){L=C[(65535&L)+(k&(1<<N)-1)];continue t}if(32&N){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}j=65535&L,(N&=15)&&(S<N&&(k+=m[c++]<<S,S+=8),j+=k&(1<<N)-1,k>>>=N,S-=N),S<15&&(k+=m[c++]<<S,S+=8,k+=m[c++]<<S,S+=8),L=E[k&B];i:for(;;){if(k>>>=N=L>>>24,S-=N,!(16&(N=L>>>16&255))){if(!(64&N)){L=E[(65535&L)+(k&(1<<N)-1)];continue i}i.msg="invalid distance code",o.mode=30;break e}if($=65535&L,S<(N&=15)&&(k+=m[c++]<<S,(S+=8)<N&&(k+=m[c++]<<S,S+=8)),d<($+=k&(1<<N)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(k>>>=N,S-=N,(N=g-p)<$){if(u<(N=$-N)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(z=f,(A=0)===w){if(A+=y-N,N<j){for(j-=N;K[g++]=f[A++],--N;);A=g-$,z=K}}else if(w<N){if(A+=y+w-N,(N-=w)<j){for(j-=N;K[g++]=f[A++],--N;);if(A=0,w<j){for(j-=N=w;K[g++]=f[A++],--N;);A=g-$,z=K}}}else if(A+=w-N,N<j){for(j-=N;K[g++]=f[A++],--N;);A=g-$,z=K}for(;2<j;)K[g++]=z[A++],K[g++]=z[A++],K[g++]=z[A++],j-=3;j&&(K[g++]=z[A++],1<j&&(K[g++]=z[A++]))}else{for(A=g-$;K[g++]=K[A++],K[g++]=K[A++],K[g++]=K[A++],2<(j-=3););j&&(K[g++]=K[A++],1<j&&(K[g++]=K[A++]))}break}}break}}while(c<h&&g<_);c-=j=S>>3,k&=(1<<(S-=j<<3))-1,i.next_in=c,i.next_out=g,i.avail_in=c<h?h-c+5:5-(c-h),i.avail_out=g<_?_-g+257:257-(g-_),o.hold=k,o.bits=S}},{}],49:[function(t,n,r){var i=t("../utils/common"),s=t("./adler32"),o=t("./crc32"),c=t("./inffast"),h=t("./inftrees"),g=1,p=2,_=0,d=-2,y=1,u=852,w=592;function f(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(A){var z;return A&&A.state?(z=A.state,A.total_in=A.total_out=z.total=0,A.msg="",z.wrap&&(A.adler=1&z.wrap),z.mode=y,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new i.Buf32(u),z.distcode=z.distdyn=new i.Buf32(w),z.sane=1,z.back=-1,_):d}function C(A){var z;return A&&A.state?((z=A.state).wsize=0,z.whave=0,z.wnext=0,S(A)):d}function E(A,z){var m,K;return A&&A.state?(K=A.state,z<0?(m=0,z=-z):(m=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?d:(K.window!==null&&K.wbits!==z&&(K.window=null),K.wrap=m,K.wbits=z,C(A))):d}function F(A,z){var m,K;return A?(K=new k,(A.state=K).window=null,(m=E(A,z))!==_&&(A.state=null),m):d}var B,L,N=!0;function j(A){if(N){var z;for(B=new i.Buf32(512),L=new i.Buf32(32),z=0;z<144;)A.lens[z++]=8;for(;z<256;)A.lens[z++]=9;for(;z<280;)A.lens[z++]=7;for(;z<288;)A.lens[z++]=8;for(h(g,A.lens,0,288,B,0,A.work,{bits:9}),z=0;z<32;)A.lens[z++]=5;h(p,A.lens,0,32,L,0,A.work,{bits:5}),N=!1}A.lencode=B,A.lenbits=9,A.distcode=L,A.distbits=5}function $(A,z,m,K){var te,W=A.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new i.Buf8(W.wsize)),K>=W.wsize?(i.arraySet(W.window,z,m-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(K<(te=W.wsize-W.wnext)&&(te=K),i.arraySet(W.window,z,m-K,te,W.wnext),(K-=te)?(i.arraySet(W.window,z,m-K,K,0),W.wnext=K,W.whave=W.wsize):(W.wnext+=te,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=te))),0}r.inflateReset=C,r.inflateReset2=E,r.inflateResetKeep=S,r.inflateInit=function(A){return F(A,15)},r.inflateInit2=F,r.inflate=function(A,z){var m,K,te,W,ie,H,ee,M,R,Q,q,J,pe,fe,ne,se,_e,ue,Se,ve,l,P,O,b,v=0,D=new i.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return d;(m=A.state).mode===12&&(m.mode=13),ie=A.next_out,te=A.output,ee=A.avail_out,W=A.next_in,K=A.input,H=A.avail_in,M=m.hold,R=m.bits,Q=H,q=ee,P=_;e:for(;;)switch(m.mode){case y:if(m.wrap===0){m.mode=13;break}for(;R<16;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}if(2&m.wrap&&M===35615){D[m.check=0]=255&M,D[1]=M>>>8&255,m.check=o(m.check,D,2,0),R=M=0,m.mode=2;break}if(m.flags=0,m.head&&(m.head.done=!1),!(1&m.wrap)||(((255&M)<<8)+(M>>8))%31){A.msg="incorrect header check",m.mode=30;break}if((15&M)!=8){A.msg="unknown compression method",m.mode=30;break}if(R-=4,l=8+(15&(M>>>=4)),m.wbits===0)m.wbits=l;else if(l>m.wbits){A.msg="invalid window size",m.mode=30;break}m.dmax=1<<l,A.adler=m.check=1,m.mode=512&M?10:12,R=M=0;break;case 2:for(;R<16;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}if(m.flags=M,(255&m.flags)!=8){A.msg="unknown compression method",m.mode=30;break}if(57344&m.flags){A.msg="unknown header flags set",m.mode=30;break}m.head&&(m.head.text=M>>8&1),512&m.flags&&(D[0]=255&M,D[1]=M>>>8&255,m.check=o(m.check,D,2,0)),R=M=0,m.mode=3;case 3:for(;R<32;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}m.head&&(m.head.time=M),512&m.flags&&(D[0]=255&M,D[1]=M>>>8&255,D[2]=M>>>16&255,D[3]=M>>>24&255,m.check=o(m.check,D,4,0)),R=M=0,m.mode=4;case 4:for(;R<16;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}m.head&&(m.head.xflags=255&M,m.head.os=M>>8),512&m.flags&&(D[0]=255&M,D[1]=M>>>8&255,m.check=o(m.check,D,2,0)),R=M=0,m.mode=5;case 5:if(1024&m.flags){for(;R<16;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}m.length=M,m.head&&(m.head.extra_len=M),512&m.flags&&(D[0]=255&M,D[1]=M>>>8&255,m.check=o(m.check,D,2,0)),R=M=0}else m.head&&(m.head.extra=null);m.mode=6;case 6:if(1024&m.flags&&(H<(J=m.length)&&(J=H),J&&(m.head&&(l=m.head.extra_len-m.length,m.head.extra||(m.head.extra=new Array(m.head.extra_len)),i.arraySet(m.head.extra,K,W,J,l)),512&m.flags&&(m.check=o(m.check,K,J,W)),H-=J,W+=J,m.length-=J),m.length))break e;m.length=0,m.mode=7;case 7:if(2048&m.flags){if(H===0)break e;for(J=0;l=K[W+J++],m.head&&l&&m.length<65536&&(m.head.name+=String.fromCharCode(l)),l&&J<H;);if(512&m.flags&&(m.check=o(m.check,K,J,W)),H-=J,W+=J,l)break e}else m.head&&(m.head.name=null);m.length=0,m.mode=8;case 8:if(4096&m.flags){if(H===0)break e;for(J=0;l=K[W+J++],m.head&&l&&m.length<65536&&(m.head.comment+=String.fromCharCode(l)),l&&J<H;);if(512&m.flags&&(m.check=o(m.check,K,J,W)),H-=J,W+=J,l)break e}else m.head&&(m.head.comment=null);m.mode=9;case 9:if(512&m.flags){for(;R<16;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}if(M!==(65535&m.check)){A.msg="header crc mismatch",m.mode=30;break}R=M=0}m.head&&(m.head.hcrc=m.flags>>9&1,m.head.done=!0),A.adler=m.check=0,m.mode=12;break;case 10:for(;R<32;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}A.adler=m.check=f(M),R=M=0,m.mode=11;case 11:if(m.havedict===0)return A.next_out=ie,A.avail_out=ee,A.next_in=W,A.avail_in=H,m.hold=M,m.bits=R,2;A.adler=m.check=1,m.mode=12;case 12:if(z===5||z===6)break e;case 13:if(m.last){M>>>=7&R,R-=7&R,m.mode=27;break}for(;R<3;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}switch(m.last=1&M,R-=1,3&(M>>>=1)){case 0:m.mode=14;break;case 1:if(j(m),m.mode=20,z!==6)break;M>>>=2,R-=2;break e;case 2:m.mode=17;break;case 3:A.msg="invalid block type",m.mode=30}M>>>=2,R-=2;break;case 14:for(M>>>=7&R,R-=7&R;R<32;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}if((65535&M)!=(M>>>16^65535)){A.msg="invalid stored block lengths",m.mode=30;break}if(m.length=65535&M,R=M=0,m.mode=15,z===6)break e;case 15:m.mode=16;case 16:if(J=m.length){if(H<J&&(J=H),ee<J&&(J=ee),J===0)break e;i.arraySet(te,K,W,J,ie),H-=J,W+=J,ee-=J,ie+=J,m.length-=J;break}m.mode=12;break;case 17:for(;R<14;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}if(m.nlen=257+(31&M),M>>>=5,R-=5,m.ndist=1+(31&M),M>>>=5,R-=5,m.ncode=4+(15&M),M>>>=4,R-=4,286<m.nlen||30<m.ndist){A.msg="too many length or distance symbols",m.mode=30;break}m.have=0,m.mode=18;case 18:for(;m.have<m.ncode;){for(;R<3;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}m.lens[G[m.have++]]=7&M,M>>>=3,R-=3}for(;m.have<19;)m.lens[G[m.have++]]=0;if(m.lencode=m.lendyn,m.lenbits=7,O={bits:m.lenbits},P=h(0,m.lens,0,19,m.lencode,0,m.work,O),m.lenbits=O.bits,P){A.msg="invalid code lengths set",m.mode=30;break}m.have=0,m.mode=19;case 19:for(;m.have<m.nlen+m.ndist;){for(;se=(v=m.lencode[M&(1<<m.lenbits)-1])>>>16&255,_e=65535&v,!((ne=v>>>24)<=R);){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}if(_e<16)M>>>=ne,R-=ne,m.lens[m.have++]=_e;else{if(_e===16){for(b=ne+2;R<b;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}if(M>>>=ne,R-=ne,m.have===0){A.msg="invalid bit length repeat",m.mode=30;break}l=m.lens[m.have-1],J=3+(3&M),M>>>=2,R-=2}else if(_e===17){for(b=ne+3;R<b;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}R-=ne,l=0,J=3+(7&(M>>>=ne)),M>>>=3,R-=3}else{for(b=ne+7;R<b;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}R-=ne,l=0,J=11+(127&(M>>>=ne)),M>>>=7,R-=7}if(m.have+J>m.nlen+m.ndist){A.msg="invalid bit length repeat",m.mode=30;break}for(;J--;)m.lens[m.have++]=l}}if(m.mode===30)break;if(m.lens[256]===0){A.msg="invalid code -- missing end-of-block",m.mode=30;break}if(m.lenbits=9,O={bits:m.lenbits},P=h(g,m.lens,0,m.nlen,m.lencode,0,m.work,O),m.lenbits=O.bits,P){A.msg="invalid literal/lengths set",m.mode=30;break}if(m.distbits=6,m.distcode=m.distdyn,O={bits:m.distbits},P=h(p,m.lens,m.nlen,m.ndist,m.distcode,0,m.work,O),m.distbits=O.bits,P){A.msg="invalid distances set",m.mode=30;break}if(m.mode=20,z===6)break e;case 20:m.mode=21;case 21:if(6<=H&&258<=ee){A.next_out=ie,A.avail_out=ee,A.next_in=W,A.avail_in=H,m.hold=M,m.bits=R,c(A,q),ie=A.next_out,te=A.output,ee=A.avail_out,W=A.next_in,K=A.input,H=A.avail_in,M=m.hold,R=m.bits,m.mode===12&&(m.back=-1);break}for(m.back=0;se=(v=m.lencode[M&(1<<m.lenbits)-1])>>>16&255,_e=65535&v,!((ne=v>>>24)<=R);){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}if(se&&!(240&se)){for(ue=ne,Se=se,ve=_e;se=(v=m.lencode[ve+((M&(1<<ue+Se)-1)>>ue)])>>>16&255,_e=65535&v,!(ue+(ne=v>>>24)<=R);){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}M>>>=ue,R-=ue,m.back+=ue}if(M>>>=ne,R-=ne,m.back+=ne,m.length=_e,se===0){m.mode=26;break}if(32&se){m.back=-1,m.mode=12;break}if(64&se){A.msg="invalid literal/length code",m.mode=30;break}m.extra=15&se,m.mode=22;case 22:if(m.extra){for(b=m.extra;R<b;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}m.length+=M&(1<<m.extra)-1,M>>>=m.extra,R-=m.extra,m.back+=m.extra}m.was=m.length,m.mode=23;case 23:for(;se=(v=m.distcode[M&(1<<m.distbits)-1])>>>16&255,_e=65535&v,!((ne=v>>>24)<=R);){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}if(!(240&se)){for(ue=ne,Se=se,ve=_e;se=(v=m.distcode[ve+((M&(1<<ue+Se)-1)>>ue)])>>>16&255,_e=65535&v,!(ue+(ne=v>>>24)<=R);){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}M>>>=ue,R-=ue,m.back+=ue}if(M>>>=ne,R-=ne,m.back+=ne,64&se){A.msg="invalid distance code",m.mode=30;break}m.offset=_e,m.extra=15&se,m.mode=24;case 24:if(m.extra){for(b=m.extra;R<b;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}m.offset+=M&(1<<m.extra)-1,M>>>=m.extra,R-=m.extra,m.back+=m.extra}if(m.offset>m.dmax){A.msg="invalid distance too far back",m.mode=30;break}m.mode=25;case 25:if(ee===0)break e;if(J=q-ee,m.offset>J){if((J=m.offset-J)>m.whave&&m.sane){A.msg="invalid distance too far back",m.mode=30;break}pe=J>m.wnext?(J-=m.wnext,m.wsize-J):m.wnext-J,J>m.length&&(J=m.length),fe=m.window}else fe=te,pe=ie-m.offset,J=m.length;for(ee<J&&(J=ee),ee-=J,m.length-=J;te[ie++]=fe[pe++],--J;);m.length===0&&(m.mode=21);break;case 26:if(ee===0)break e;te[ie++]=m.length,ee--,m.mode=21;break;case 27:if(m.wrap){for(;R<32;){if(H===0)break e;H--,M|=K[W++]<<R,R+=8}if(q-=ee,A.total_out+=q,m.total+=q,q&&(A.adler=m.check=m.flags?o(m.check,te,q,ie-q):s(m.check,te,q,ie-q)),q=ee,(m.flags?M:f(M))!==m.check){A.msg="incorrect data check",m.mode=30;break}R=M=0}m.mode=28;case 28:if(m.wrap&&m.flags){for(;R<32;){if(H===0)break e;H--,M+=K[W++]<<R,R+=8}if(M!==(4294967295&m.total)){A.msg="incorrect length check",m.mode=30;break}R=M=0}m.mode=29;case 29:P=1;break e;case 30:P=-3;break e;case 31:return-4;case 32:default:return d}return A.next_out=ie,A.avail_out=ee,A.next_in=W,A.avail_in=H,m.hold=M,m.bits=R,(m.wsize||q!==A.avail_out&&m.mode<30&&(m.mode<27||z!==4))&&$(A,A.output,A.next_out,q-A.avail_out)?(m.mode=31,-4):(Q-=A.avail_in,q-=A.avail_out,A.total_in+=Q,A.total_out+=q,m.total+=q,m.wrap&&q&&(A.adler=m.check=m.flags?o(m.check,te,q,A.next_out-q):s(m.check,te,q,A.next_out-q)),A.data_type=m.bits+(m.last?64:0)+(m.mode===12?128:0)+(m.mode===20||m.mode===15?256:0),(Q==0&&q===0||z===4)&&P===_&&(P=-5),P)},r.inflateEnd=function(A){if(!A||!A.state)return d;var z=A.state;return z.window&&(z.window=null),A.state=null,_},r.inflateGetHeader=function(A,z){var m;return A&&A.state&&2&(m=A.state).wrap?((m.head=z).done=!1,_):d},r.inflateSetDictionary=function(A,z){var m,K=z.length;return A&&A.state?(m=A.state).wrap!==0&&m.mode!==11?d:m.mode===11&&s(1,z,K,0)!==m.check?-3:$(A,z,K,K)?(m.mode=31,-4):(m.havedict=1,_):d},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,r){var i=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(g,p,_,d,y,u,w,f){var k,S,C,E,F,B,L,N,j,$=f.bits,A=0,z=0,m=0,K=0,te=0,W=0,ie=0,H=0,ee=0,M=0,R=null,Q=0,q=new i.Buf16(16),J=new i.Buf16(16),pe=null,fe=0;for(A=0;A<=15;A++)q[A]=0;for(z=0;z<d;z++)q[p[_+z]]++;for(te=$,K=15;1<=K&&q[K]===0;K--);if(K<te&&(te=K),K===0)return y[u++]=20971520,y[u++]=20971520,f.bits=1,0;for(m=1;m<K&&q[m]===0;m++);for(te<m&&(te=m),A=H=1;A<=15;A++)if(H<<=1,(H-=q[A])<0)return-1;if(0<H&&(g===0||K!==1))return-1;for(J[1]=0,A=1;A<15;A++)J[A+1]=J[A]+q[A];for(z=0;z<d;z++)p[_+z]!==0&&(w[J[p[_+z]]++]=z);if(B=g===0?(R=pe=w,19):g===1?(R=s,Q-=257,pe=o,fe-=257,256):(R=c,pe=h,-1),A=m,F=u,ie=z=M=0,C=-1,E=(ee=1<<(W=te))-1,g===1&&852<ee||g===2&&592<ee)return 1;for(;;){for(L=A-ie,j=w[z]<B?(N=0,w[z]):w[z]>B?(N=pe[fe+w[z]],R[Q+w[z]]):(N=96,0),k=1<<A-ie,m=S=1<<W;y[F+(M>>ie)+(S-=k)]=L<<24|N<<16|j|0,S!==0;);for(k=1<<A-1;M&k;)k>>=1;if(k!==0?(M&=k-1,M+=k):M=0,z++,--q[A]==0){if(A===K)break;A=p[_+w[z]]}if(te<A&&(M&E)!==C){for(ie===0&&(ie=te),F+=m,H=1<<(W=A-ie);W+ie<K&&!((H-=q[W+ie])<=0);)W++,H<<=1;if(ee+=1<<W,g===1&&852<ee||g===2&&592<ee)return 1;y[C=M&E]=te<<24|W<<16|F-u|0}}return M!==0&&(y[F+M]=A-ie<<24|64<<16|0),f.bits=te,0}},{"../utils/common":41}],51:[function(t,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,r){var i=t("../utils/common"),s=0,o=1;function c(v){for(var D=v.length;0<=--D;)v[D]=0}var h=0,g=29,p=256,_=p+1+g,d=30,y=19,u=2*_+1,w=15,f=16,k=7,S=256,C=16,E=17,F=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(_+2));c($);var A=new Array(2*d);c(A);var z=new Array(512);c(z);var m=new Array(256);c(m);var K=new Array(g);c(K);var te,W,ie,H=new Array(d);function ee(v,D,G,U,x){this.static_tree=v,this.extra_bits=D,this.extra_base=G,this.elems=U,this.max_length=x,this.has_stree=v&&v.length}function M(v,D){this.dyn_tree=v,this.max_code=0,this.stat_desc=D}function R(v){return v<256?z[v]:z[256+(v>>>7)]}function Q(v,D){v.pending_buf[v.pending++]=255&D,v.pending_buf[v.pending++]=D>>>8&255}function q(v,D,G){v.bi_valid>f-G?(v.bi_buf|=D<<v.bi_valid&65535,Q(v,v.bi_buf),v.bi_buf=D>>f-v.bi_valid,v.bi_valid+=G-f):(v.bi_buf|=D<<v.bi_valid&65535,v.bi_valid+=G)}function J(v,D,G){q(v,G[2*D],G[2*D+1])}function pe(v,D){for(var G=0;G|=1&v,v>>>=1,G<<=1,0<--D;);return G>>>1}function fe(v,D,G){var U,x,V=new Array(w+1),X=0;for(U=1;U<=w;U++)V[U]=X=X+G[U-1]<<1;for(x=0;x<=D;x++){var Z=v[2*x+1];Z!==0&&(v[2*x]=pe(V[Z]++,Z))}}function ne(v){var D;for(D=0;D<_;D++)v.dyn_ltree[2*D]=0;for(D=0;D<d;D++)v.dyn_dtree[2*D]=0;for(D=0;D<y;D++)v.bl_tree[2*D]=0;v.dyn_ltree[2*S]=1,v.opt_len=v.static_len=0,v.last_lit=v.matches=0}function se(v){8<v.bi_valid?Q(v,v.bi_buf):0<v.bi_valid&&(v.pending_buf[v.pending++]=v.bi_buf),v.bi_buf=0,v.bi_valid=0}function _e(v,D,G,U){var x=2*D,V=2*G;return v[x]<v[V]||v[x]===v[V]&&U[D]<=U[G]}function ue(v,D,G){for(var U=v.heap[G],x=G<<1;x<=v.heap_len&&(x<v.heap_len&&_e(D,v.heap[x+1],v.heap[x],v.depth)&&x++,!_e(D,U,v.heap[x],v.depth));)v.heap[G]=v.heap[x],G=x,x<<=1;v.heap[G]=U}function Se(v,D,G){var U,x,V,X,Z=0;if(v.last_lit!==0)for(;U=v.pending_buf[v.d_buf+2*Z]<<8|v.pending_buf[v.d_buf+2*Z+1],x=v.pending_buf[v.l_buf+Z],Z++,U===0?J(v,x,D):(J(v,(V=m[x])+p+1,D),(X=B[V])!==0&&q(v,x-=K[V],X),J(v,V=R(--U),G),(X=L[V])!==0&&q(v,U-=H[V],X)),Z<v.last_lit;);J(v,S,D)}function ve(v,D){var G,U,x,V=D.dyn_tree,X=D.stat_desc.static_tree,Z=D.stat_desc.has_stree,Y=D.stat_desc.elems,ce=-1;for(v.heap_len=0,v.heap_max=u,G=0;G<Y;G++)V[2*G]!==0?(v.heap[++v.heap_len]=ce=G,v.depth[G]=0):V[2*G+1]=0;for(;v.heap_len<2;)V[2*(x=v.heap[++v.heap_len]=ce<2?++ce:0)]=1,v.depth[x]=0,v.opt_len--,Z&&(v.static_len-=X[2*x+1]);for(D.max_code=ce,G=v.heap_len>>1;1<=G;G--)ue(v,V,G);for(x=Y;G=v.heap[1],v.heap[1]=v.heap[v.heap_len--],ue(v,V,1),U=v.heap[1],v.heap[--v.heap_max]=G,v.heap[--v.heap_max]=U,V[2*x]=V[2*G]+V[2*U],v.depth[x]=(v.depth[G]>=v.depth[U]?v.depth[G]:v.depth[U])+1,V[2*G+1]=V[2*U+1]=x,v.heap[1]=x++,ue(v,V,1),2<=v.heap_len;);v.heap[--v.heap_max]=v.heap[1],function(re,we){var Pe,Ae,Ke,he,Ze,pt,Te=we.dyn_tree,xt=we.max_code,pi=we.stat_desc.static_tree,ui=we.stat_desc.has_stree,hi=we.stat_desc.extra_bits,It=we.stat_desc.extra_base,Le=we.stat_desc.max_length,Je=0;for(he=0;he<=w;he++)re.bl_count[he]=0;for(Te[2*re.heap[re.heap_max]+1]=0,Pe=re.heap_max+1;Pe<u;Pe++)Le<(he=Te[2*Te[2*(Ae=re.heap[Pe])+1]+1]+1)&&(he=Le,Je++),Te[2*Ae+1]=he,xt<Ae||(re.bl_count[he]++,Ze=0,It<=Ae&&(Ze=hi[Ae-It]),pt=Te[2*Ae],re.opt_len+=pt*(he+Ze),ui&&(re.static_len+=pt*(pi[2*Ae+1]+Ze)));if(Je!==0){do{for(he=Le-1;re.bl_count[he]===0;)he--;re.bl_count[he]--,re.bl_count[he+1]+=2,re.bl_count[Le]--,Je-=2}while(0<Je);for(he=Le;he!==0;he--)for(Ae=re.bl_count[he];Ae!==0;)xt<(Ke=re.heap[--Pe])||(Te[2*Ke+1]!==he&&(re.opt_len+=(he-Te[2*Ke+1])*Te[2*Ke],Te[2*Ke+1]=he),Ae--)}}(v,D),fe(V,ce,v.bl_count)}function l(v,D,G){var U,x,V=-1,X=D[1],Z=0,Y=7,ce=4;for(X===0&&(Y=138,ce=3),D[2*(G+1)+1]=65535,U=0;U<=G;U++)x=X,X=D[2*(U+1)+1],++Z<Y&&x===X||(Z<ce?v.bl_tree[2*x]+=Z:x!==0?(x!==V&&v.bl_tree[2*x]++,v.bl_tree[2*C]++):Z<=10?v.bl_tree[2*E]++:v.bl_tree[2*F]++,V=x,ce=(Z=0)===X?(Y=138,3):x===X?(Y=6,3):(Y=7,4))}function P(v,D,G){var U,x,V=-1,X=D[1],Z=0,Y=7,ce=4;for(X===0&&(Y=138,ce=3),U=0;U<=G;U++)if(x=X,X=D[2*(U+1)+1],!(++Z<Y&&x===X)){if(Z<ce)for(;J(v,x,v.bl_tree),--Z!=0;);else x!==0?(x!==V&&(J(v,x,v.bl_tree),Z--),J(v,C,v.bl_tree),q(v,Z-3,2)):Z<=10?(J(v,E,v.bl_tree),q(v,Z-3,3)):(J(v,F,v.bl_tree),q(v,Z-11,7));V=x,ce=(Z=0)===X?(Y=138,3):x===X?(Y=6,3):(Y=7,4)}}c(H);var O=!1;function b(v,D,G,U){q(v,(h<<1)+(U?1:0),3),function(x,V,X,Z){se(x),Q(x,X),Q(x,~X),i.arraySet(x.pending_buf,x.window,V,X,x.pending),x.pending+=X}(v,D,G)}r._tr_init=function(v){O||(function(){var D,G,U,x,V,X=new Array(w+1);for(x=U=0;x<g-1;x++)for(K[x]=U,D=0;D<1<<B[x];D++)m[U++]=x;for(m[U-1]=x,x=V=0;x<16;x++)for(H[x]=V,D=0;D<1<<L[x];D++)z[V++]=x;for(V>>=7;x<d;x++)for(H[x]=V<<7,D=0;D<1<<L[x]-7;D++)z[256+V++]=x;for(G=0;G<=w;G++)X[G]=0;for(D=0;D<=143;)$[2*D+1]=8,D++,X[8]++;for(;D<=255;)$[2*D+1]=9,D++,X[9]++;for(;D<=279;)$[2*D+1]=7,D++,X[7]++;for(;D<=287;)$[2*D+1]=8,D++,X[8]++;for(fe($,_+1,X),D=0;D<d;D++)A[2*D+1]=5,A[2*D]=pe(D,5);te=new ee($,B,p+1,_,w),W=new ee(A,L,0,d,w),ie=new ee(new Array(0),N,0,y,k)}(),O=!0),v.l_desc=new M(v.dyn_ltree,te),v.d_desc=new M(v.dyn_dtree,W),v.bl_desc=new M(v.bl_tree,ie),v.bi_buf=0,v.bi_valid=0,ne(v)},r._tr_stored_block=b,r._tr_flush_block=function(v,D,G,U){var x,V,X=0;0<v.level?(v.strm.data_type===2&&(v.strm.data_type=function(Z){var Y,ce=4093624447;for(Y=0;Y<=31;Y++,ce>>>=1)if(1&ce&&Z.dyn_ltree[2*Y]!==0)return s;if(Z.dyn_ltree[18]!==0||Z.dyn_ltree[20]!==0||Z.dyn_ltree[26]!==0)return o;for(Y=32;Y<p;Y++)if(Z.dyn_ltree[2*Y]!==0)return o;return s}(v)),ve(v,v.l_desc),ve(v,v.d_desc),X=function(Z){var Y;for(l(Z,Z.dyn_ltree,Z.l_desc.max_code),l(Z,Z.dyn_dtree,Z.d_desc.max_code),ve(Z,Z.bl_desc),Y=y-1;3<=Y&&Z.bl_tree[2*j[Y]+1]===0;Y--);return Z.opt_len+=3*(Y+1)+5+5+4,Y}(v),x=v.opt_len+3+7>>>3,(V=v.static_len+3+7>>>3)<=x&&(x=V)):x=V=G+5,G+4<=x&&D!==-1?b(v,D,G,U):v.strategy===4||V===x?(q(v,2+(U?1:0),3),Se(v,$,A)):(q(v,4+(U?1:0),3),function(Z,Y,ce,re){var we;for(q(Z,Y-257,5),q(Z,ce-1,5),q(Z,re-4,4),we=0;we<re;we++)q(Z,Z.bl_tree[2*j[we]+1],3);P(Z,Z.dyn_ltree,Y-1),P(Z,Z.dyn_dtree,ce-1)}(v,v.l_desc.max_code+1,v.d_desc.max_code+1,X+1),Se(v,v.dyn_ltree,v.dyn_dtree)),ne(v),U&&se(v)},r._tr_tally=function(v,D,G){return v.pending_buf[v.d_buf+2*v.last_lit]=D>>>8&255,v.pending_buf[v.d_buf+2*v.last_lit+1]=255&D,v.pending_buf[v.l_buf+v.last_lit]=255&G,v.last_lit++,D===0?v.dyn_ltree[2*G]++:(v.matches++,D--,v.dyn_ltree[2*(m[G]+p+1)]++,v.dyn_dtree[2*R(D)]++),v.last_lit===v.lit_bufsize-1},r._tr_align=function(v){q(v,2,3),J(v,S,$),function(D){D.bi_valid===16?(Q(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):8<=D.bi_valid&&(D.pending_buf[D.pending++]=255&D.bi_buf,D.bi_buf>>=8,D.bi_valid-=8)}(v)}},{"../utils/common":41}],53:[function(t,n,r){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,n,r){(function(i){(function(s,o){if(!s.setImmediate){var c,h,g,p,_=1,d={},y=!1,u=s.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(s);w=w&&w.setTimeout?w:s,c={}.toString.call(s.process)==="[object process]"?function(C){process.nextTick(function(){k(C)})}:function(){if(s.postMessage&&!s.importScripts){var C=!0,E=s.onmessage;return s.onmessage=function(){C=!1},s.postMessage("","*"),s.onmessage=E,C}}()?(p="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",S,!1):s.attachEvent("onmessage",S),function(C){s.postMessage(p+C,"*")}):s.MessageChannel?((g=new MessageChannel).port1.onmessage=function(C){k(C.data)},function(C){g.port2.postMessage(C)}):u&&"onreadystatechange"in u.createElement("script")?(h=u.documentElement,function(C){var E=u.createElement("script");E.onreadystatechange=function(){k(C),E.onreadystatechange=null,h.removeChild(E),E=null},h.appendChild(E)}):function(C){setTimeout(k,0,C)},w.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var E=new Array(arguments.length-1),F=0;F<E.length;F++)E[F]=arguments[F+1];var B={callback:C,args:E};return d[_]=B,c(_),_++},w.clearImmediate=f}function f(C){delete d[C]}function k(C){if(y)setTimeout(k,0,C);else{var E=d[C];if(E){y=!0;try{(function(F){var B=F.callback,L=F.args;switch(L.length){case 0:B();break;case 1:B(L[0]);break;case 2:B(L[0],L[1]);break;case 3:B(L[0],L[1],L[2]);break;default:B.apply(o,L)}})(E)}finally{f(C),y=!1}}}}function S(C){C.source===s&&typeof C.data=="string"&&C.data.indexOf(p)===0&&k(+C.data.slice(p.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof De<"u"?De:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ci);var wa=ci.exports;const Wt=Di(wa),ka="ModHeaderSpec",at={id:ka,title:"New Mod Information",summary:a=>null,properties:[{id:"guid",label:"GUID",description:"Must be universally unique across all mods. Use your own name or domain name like com.firebiscuit.$modName",specs:I.GUID()},{id:"name",label:"Name",description:"Name displayed in the list of Mods",specs:I.Words()},{id:"description",label:"Description",description:"Description displayed in the list of Mods",specs:I.Sentences()},{id:"author",label:"Author",description:"Author(s) displayed in the list of Mods",specs:I.Sentences()},{id:"version",label:"Version",description:"Should be changed each time a new version of the mod is published. This will help with compatibility checks.",specs:I.String(/^(\d+\.)?(\d+\.)?(\*|\d+)$/,"X or X.Y or X.Y.Z")},{id:"mod_preview",label:"Mod Image",description:"Preview image to be shown in the list of mods",specs:I.Image({width:256,height:256,ext:"jpg"}),links:[{label:"Sample",url:"samples/header/mod_preview.jpg"},{label:"PaintDotNet Sample",url:"samples/header/mod_preview.pdn"},{label:"PaintDotNet Download",url:"https://www.getpaint.net/"}]}]},be=class be{constructor(e){this.header=e,this.guidsByType={};for(const t of Object.values(ge))this.guidsByType[t.id]=[]}setHeader(e){this.header={...e}}getGUID(){return this.header.guid}getModIds(e){if(!this.guidsByType[e])throw new Error("Invalid mod type: '"+e+"'");return[...this.guidsByType[e]]}hasMod(e){return this.findModType(e)!==null}findModType(e){for(const t of Object.keys(this.guidsByType))if(this.guidsByType[t].includes(e))return t;return null}registerMod(e,t){if(this.guidsByType[e]===void 0)throw new Error("Invalid mod type: '"+e+"'");if(this.hasMod(t))throw new Error("Mod '"+t+"' is already registered for modType '"+e+"'");this.guidsByType[e].push(t)}unregisterMod(e){for(const t of Object.keys(this.guidsByType)){const n=this.guidsByType[t].indexOf(e);if(!(n<0)){this.guidsByType[t].splice(n,1);return}}}toJson(){const e=I.CustomSpec(at).toJson(this.header);for(const t of Object.keys(this.guidsByType))e[t]=[...this.guidsByType[t]];return e}static fromJson(e){const t=I.CustomSpec(at).parseJson(e),n=new be(t),r=[];for(const i of Object.keys(n.guidsByType)){const s=e[i];if(!Array.isArray(s))continue;const o=n.guidsByType[i],c=I.GUID();for(const h of s){let g;try{g=c.parseJson(h)}catch(p){throw new Error("Error parsing mod Id: "+JSON.stringify(h)+", "+p.message)}if(r.includes(g))throw new Error("Duplicate mod Id: "+g);o.push(g),r.push(g)}}return n}static getDataStoreKey(e){return be.DATASTORE_KEY_PREFIX}async saveToStore(e){const t={data:this.toJson(),fileData:{mod_preview:this.header.mod_preview}},n=be.getDataStoreKey(this.getGUID());return e.putData(n,t)}static async loadFromStore(e,t){const n=be.getDataStoreKey(t),r=await e.getData(n);if(!r||!r.data||!r.fileData)return null;let i={...r.data};return i.mod_preview=r.fileData.mod_preview,be.fromJson(i)}static async getSavedMods(e){const t=[],n=await e.getAllKeys();for(const r of n)if(r.startsWith(be.DATASTORE_KEY_PREFIX)){const i=r.substring(be.DATASTORE_KEY_PREFIX.length);try{t.push(await be.loadFromStore(e,i))}catch(s){console.error("Error loading mod "+i+": "+s.message)}}return t}};Rt(be,"DATASTORE_KEY_PREFIX","MOD");let Ve=be;const va=async(a,e)=>await a.file(e).async("text"),ba=async(a,e)=>await a.file(e).async("blob"),kt=async(a,e)=>JSON.parse(await va(a,e)),vt=async(a,e)=>await new Promise(async(t,n)=>{const r=new FileReader;r.onerror=i=>n(i),r.onloadend=()=>{let i=r.result;const s=i.indexOf(";base64,");s>0&&(i=i.substring(s+8)),t(i)};try{r.readAsDataURL(await ba(a,e))}catch(i){n(i)}}),di=(a,e,t)=>{for(const n of Object.keys(t)){const r=t[n];if(!r)continue;const i=e[n];if(Array.isArray(r))for(const s in r){if(e.length<s)break;a.file(i[s],r[s],{base64:!0})}else typeof r=="object"?di(a,e[n],r):a.file(i,r,{base64:!0})}},Sa=async a=>{try{return{data:await kt(a,"mod.json"),rootFolder:"./"}}catch{const t=[];a.forEach((n,r)=>{r.dir&&t.push(n)});for(const n of t)try{return{data:await kt(a,n+"mod.json"),rootFolder:n}}catch{}throw new Error("Invalid zip file: missing or invalid 'mod.json' file")}},Aa=async(a,e,t,n,r)=>{console.log("Loading Module "+n+">"+r);const i={getModDescriptor:()=>t},s=a.folder(e+r),o="mod:"+t.getGUID()+":",c=d=>d===null||!d.startsWith(o)?d:d.substring(o.length),h=async(d,y)=>{const u={};for(const w of y.properties){const f=w.id,k=w.specs,S=d[f];if(S!==void 0){if(S===null){u[f]=null;continue}if(f==="guid"){u[f]=S;continue}if(k.isGameResource===!0){if(Array.isArray(S)){const C=[];for(const E of S)C.push(c(E));u[f]=C}else u[f]=c(S);continue}if(k.isFile===!0){if(Array.isArray(S)){const C=[];for(const E of S)C.push(await vt(s,E));u[f]=C}else u[f]=await vt(s,S);continue}if(k.isCustomSpec===!0){if(Array.isArray(S)){const C=[];for(const E of S)C.push(await h(E,k.customSpec));u[f]=C}else u[f]=await h(S,k.customSpec);continue}u[f]=S}}return u},g=await kt(s,"mod.json"),p=ge[n].specs(i),_=await h(g,p);return new xe(n,i,_)},Ht={GenerateZip:async function(a,e){const t=i=>e.hasMod(i)?"mod:"+e.getGUID()+":"+i:i,n=(i,s)=>{const o={...i};for(const c of Object.keys(o)){const h=o[c],g=s(c);if(c==="guid"&&h&&e.hasMod(h)){o[c]=h;continue}if(g.isGameResource===!0){if(Array.isArray(h)){const p=[];for(const _ of h)p.push(t(_));o[c]=p}else o[c]=t(h);continue}if(g.isCustomSpec===!0)if(Array.isArray(h)){const p=[];for(const _ of h)p.push(n(_,d=>{for(const y of g.customSpec.properties)if(y.id===d)return y.specs;throw new Error("Could not resolve specs for property "+d)}));o[c]=p}else o[c]=n(o[c],p=>{for(const _ of g.customSpec.properties)if(_.id===p)return _.specs;throw new Error("Could not resolve specs for property "+p)})}return o};var r=new Wt;r.file("mod.json",JSON.stringify(e.toJson(),null,4)),r.file("mod_preview.jpg",e.header.mod_preview,{base64:!0});for(const i of Object.keys(Dt)){const s=await dt.FetchMods(i,a,e);for(const o of s){o.validate();const c=n(o.getData({returnDefaultValues:!0}),p=>o.getPropertySpecs(p)),h=o.getFileData(),g=r.folder(o.getGUID());g.file("mod.json",JSON.stringify(c,null,4)),di(g,c,h)}}return r.generateAsync({type:"blob"})},LoadZip:async function(a,e){const t=await Wt.loadAsync(e);let n,r;try{const s=await Sa(t);r=s.rootFolder;const o=s.data;o.mod_preview=await vt(t,r+"mod_preview.jpg"),n=Ve.fromJson(o)}catch(s){throw console.error("Error parsing mod.json",s),new Error("Error parsing 'mod.json': "+s.message)}const i=[];for(const s of ya)for(const o of n.getModIds(s)){const c=await Aa(t,r,n,s,o);i.push(c)}n.saveToStore(a);for(const s of i)s.saveToStore(a);return n}};function Ca(){const a=ze(ot),{appState:e,setAppState:t}=ze(lt),n=Tt(),r=async()=>{console.log("Reset mod"),await a.clear(),t(new Ce)},i=()=>{e.getActiveMod()&&!window.confirm("You are currently editing a mod. Changes will be lost. Click 'OK' to import a mod, 'Cancel' to continue editing this mod.")||n.current.click()},s=()=>{e.getActiveMod()&&!window.confirm("You are currently editing a mod. Changes will be lost. Click 'OK' to create a new mod, 'Cancel' to continue editing this mod.")||r()},o=()=>{t(e.withActiveModule(null))},c=async()=>{const y=e.getActiveMod();if(!y)throw Error("No mod selected");try{const u=await Ht.GenerateZip(a,y),w=y.getGUID()+".zip";xi.saveAs(u,w)}catch(u){console.error("Error Generating Zip: "+u.message,u),window.alert(`Error Generating the zip:
`+u.message)}},h=async()=>{r();const y=n.current.files[0];try{const u=await Ht.LoadZip(a,y);t(new Ce().withActiveMod(u))}catch(u){console.error("Error Loading Mod: "+u.message,u),window.alert(`Error Loading the zip:
`+u.message)}},g=y=>{console.log("Create Module ",y),t(e.withActiveModule(new xe(y,e.getContextProvider())))},p=async y=>{console.log("Load Module ",y);try{const u=await xe.loadFromStore(a,y,e.getContextProvider());t(e.withActiveModule(u))}catch(u){console.error(u)}},_=async y=>{if(!window.confirm("Confirm deletion of module: "+y))return;console.log("Delete Module ",y),await xe.deleteFromStore(a,y);const u=e.getActiveMod();u.unregisterMod(y),await u.saveToStore(a),t(e.withActiveModule(null))},d=[];if(e.getActiveMod())for(const y of Object.values(ge)){const u=y.id,w=[],f=e.getActiveMod(),k=e.getActiveModule();if(f!=null)for(const S of f.getModIds(u))k&&k.getGUID()===S?w.push(T("div",{className:"module selected",children:[T("button",{onClick:()=>_(S),children:"X"}),T("div",{className:"module_id",children:S})]})):w.push(T("div",{className:"module",children:[T("button",{onClick:()=>_(S),children:"X"}),T("div",{className:"module_id",onClick:()=>p(S),children:S})]}));d.push(T("div",{className:"mod_type",children:[T("div",{className:"title",children:[T("div",{className:"label",children:y.label}),T("button",{onClick:()=>g(u),children:"+"})]}),w]}))}return T("div",{id:"main_menu",className:"main_menu",children:[T("div",{className:"main_menu_header",children:[T("img",{width:"100%",src:"paladins_oath_logo.png"}),T("div",{class:"title",children:"Mod Editor"}),e.getActiveMod()?T("div",{className:"mod_id",children:e.getActiveMod().header.guid}):null]}),T("div",{className:"main_menu_options",children:[T("button",{onClick:i,children:"Import Mod"}),T("button",{onClick:s,children:"New Mod"}),e.getActiveMod()?T("button",{onClick:c,children:"Export Mod"}):null,e.getActiveMod()?T("button",{onClick:o,children:"Edit Header"}):null]}),T("div",{className:"modules",children:d}),T("div",{className:"socials",children:[T("a",{href:"https://paladinsoath.fandom.com/wiki/Paladin%27s_Oath_Wiki",children:"Paladin's Oath Wiki"}),T("a",{href:"https://steamcommunity.com/app/1671590/discussions/",children:"Steam Forums"}),T("a",{href:"https://www.getpaint.net/",children:"Paint Dot Net"})]}),T("div",{className:"sample_mods",children:[T("div",{className:"title",children:T("b",{children:"Sample Mods"})}),T("div",{className:"links",children:[T("a",{href:"samples/mods/com.firebiscuit.agamoto.zip",children:"Character"}),T("span",{children:"|"}),T("a",{href:"samples/mods/com.firebiscuit.dragons_peak.zip",children:"Map Section"}),T("a",{href:"samples/mods/com.firebiscuit.wolfhide.zip",children:"Enemy"}),T("span",{children:"|"}),T("a",{href:"samples/mods/com.firebiscuit.sample_script.zip",children:"Script"}),T("span",{children:"|"}),T("a",{href:"samples/mods/com.firebiscuit.lang.en.zip",children:"Language"})]})]}),T("input",{type:"file",id:"file",ref:n,style:{display:"none"},onChange:h,accept:".zip"})]})}function Ea(a){const e=a.dataStore,t=a.initialState,[n,r]=ye(t||new Ce),i=ni(()=>({appState:n,setAppState:r}),[n]);let s=null;if(n.getActiveMod())if(n.getActiveModule()){const o=n.getActiveMod(),c=n.getActiveModule(),h=_=>{try{return c.validateAll(_),n.getEditorError()!==null&&r(n.withEditorError()),!0}catch(d){return n.getEditorError()!=d.message&&r(n.withEditorError(d.message)),!1}},g=async()=>{const _=o.findModType(c.getGUID());if(!_)console.log("Register new module "+c.getModType()+">"+c.getGUID()),o.registerMod(c.getModType(),c.getGUID()),await o.saveToStore(e);else if(_!==c.getModType()){window.alert("Cannot override module "+_+" with the same ID");return}await c.saveToStore(e),r(n.withEditorError(null))},p={specs:c.getModSpecs(),data:c.getDataWithFileData(),error:n.getEditorError(),saveData:async _=>{if(!_.guid){window.alert("Cannot save without GUID");return}if(h(_),n.getEditorError()!==null){window.alert("Cannot save module with error: "+n.getEditorError());return}try{(c.getGUID()===null||_.guid!==c.getGUID())&&(c.getGUID()!==null&&(console.log("Module ID changed from "+c.getGUID()+" to "+_.guid),await xe.deleteFromStore(e,c.getGUID()),o.unregisterMod(c.getGUID())),o.registerMod(c.getModType(),_.guid),await o.saveToStore(e)),c.setProperties(_),r(n.withEditorError())}catch(d){r(n.withEditorError(d.message))}await g()},validateData:_=>{h(_)}};s=T(We,{data:p},c.getModType()+":"+c.getGUID())}else{const o=n.getActiveMod(),c=at,h=p=>{if(!c.validator)return!0;try{return c.validator(p),n.getEditorError()!==null&&r(n.withEditorError()),!0}catch(_){return n.getEditorError()!=_.message&&r(n.withEditorError(_.message)),!1}},g={specs:c,error:n.getEditorError(),data:o.header,titleOverride:"Editing Mod",saveData:async p=>{if(!h(p))return;const _=n.getActiveMod();_.setHeader(p),await _.saveToStore(e),r(new Ce().withActiveMod(_))},validateData:p=>{h(p)}};s=T(We,{data:g},"edit_mod")}else{const o=at,c=g=>{if(!o.validator)return!0;try{return o.validator(g),n.getEditorError()!==null&&r(n.withEditorError()),!0}catch(p){return n.getEditorError()!=p.message&&r(n.withEditorError(p.message)),!1}},h={specs:o,error:n.getEditorError(),saveData:async g=>{if(!c(g))return;await e.clear();const p=new Ve(g);await p.saveToStore(e),r(new Ce().withActiveMod(p))},validateData:g=>{c(g)}};s=T(We,{data:h},"new_mod")}return T(ot.Provider,{value:e,children:T(lt.Provider,{value:i,children:T("div",{className:"main_grid_container",children:[T(Ca,{}),T("div",{className:"main_content",children:s})]})})})}const Ue=new Ai({version:1});Ue.init().then(async()=>{let a=new Ce;try{const e=await Ve.loadFromStore(Ue,"*");e?(a=a.withActiveMod(e),console.log("Loaded Draft Mod "+e.getGUID())):(console.log("No Draft mod, cleaning the database"),await Ue.clear())}catch(e){console.error("Error loading draft mod: "+e.message),await Ue.clear()}Ot(T(Ea,{dataStore:Ue,initialState:a}),document.getElementById("root"))}).catch(a=>{console.error(a),Ot(T("div",{children:"Error initializing Datastore: "+a.message}),document.getElementById("root"))});
